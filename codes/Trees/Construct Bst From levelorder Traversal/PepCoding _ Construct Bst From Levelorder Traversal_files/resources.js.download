!function(e,c){e.PEP=e.PEP||{};var d=e.PEP;function a(){var e=c(this).attr("play-speed"),t=c(this).attr("data-target");c(this).parents(".ojquestionVideo").children("video#"+t)[0].playbackRate=e}function n(){c("#editorial .codeEditor, #summaryTxt .codeEditor").each(function(){var t,o,e,a,n=c(this),s=c(this).find(".editorialCode").text(),i=c(this).find(".output").html(),r=c(this).find(".canRunCode").text();s&&(i&&(e=i.match(/\s*\n[\t\s]*/),i=i.replace(new RegExp(e,"g"),"\n")),t=c(this).find(".language").text(),o="tutorial_editor_"+c(this).attr("id"),e="true"==r?"/templates/code-editor.html":"/templates/code-editor-static.html",a={[t]:{code:s.replace(";",";\r\n")}},c.get(e,function(e){e=(e=(e=e).replace("{{code}}",JSON.stringify(a)).replaceAll("{{editor-id}}",o).replace("{{output}}",i||"")).replace("{{selected-lang}}",t);n.html(e),d.CodeEditor.Init(o,{sampleCode:a,readOnly:!1,saveInSessionStorage:!1,setCursor:!0,disableAutoCollapseOutput:"true"!=r}),d.CodeEditor.SetLang(o,t),d.CodeEditor.SetContent(o,s.replace(";",";\r\n"),!0),c(".colap-code").collapsible({inDuration:100,outDuration:100}),n.find(".tabs").tabs({})}))})}$fwdVideo=c(".fwdVideo"),$payCoinForm=c("#payCoinForm"),$fullScreenQuestion=c("#fullScreenQuestion"),$payCoinForm.submit(function(e){e.preventDefault();var t=new FormData(this),o=c(this),e=o.attr("method"),o=o.attr("action");c.ajax({type:e,url:o,data:t,cache:!1,contentType:!1,processData:!1,success:function(e){e&&e.data&&(c("#resourceContent").html(e.data),c.getScript("/js/bundle/videoPlayer.js?v2.4"),c.getScript("/js/bundle/mcq.js?v2.4"),c("#resourceNavTabs li").removeClass("disabled"),c("#resourceNavTabs").tabs({onShow:d.ResourceEditorInit}),d.User.IsSignedIn()&&(window.PEP.ShowCompaniesBadges(),window.PEP.showTagBadges()),c(".collapsible").collapsible(),c(".fwdVideo").on("click",a),c(".fixed-action-btn").floatingActionButton({direction:"right"}),n())},error:function(e){window.PEP.handleException(e)}})}),$fullScreenQuestion.on("click",function(){var e=c("#splitQuestion")[0];e&&(e.mozRequestFullScreen||e.webkitRequestFullscreen||e.requestFullscreen||e.msRequestFullscreen).call(e)}),d.ShowCompaniesBadges=function(){var e=c("#quesId").val();e&&c.ajax({url:"/company/ojquestion/"+e,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){e&&e.data?(c("#companiesSection").removeClass("hide"),c("#companiesList").empty().append(e.data)):c("#companiesSection").addClass("hide")},error:function(e){window.PEP.handleException(e)}})},d.showTagBadges=function(){var e=c("#quesId").val();e&&c.ajax({url:"/tags/ojquestion/"+e,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){e&&e.data&&e.data.tagDiv?(c("#tagsSection").removeClass("hide"),c("#tagList").empty().append(e.data.tagDiv),c("meta[property=keywords]").attr("content",e.data.allTags)):c("#tagsSection").addClass("hide")},error:function(e){window.PEP.handleException(e)}})},n(),c("#resourceNavTabs").tabs({onShow:d.ResourceEditorInit}),c(".modal").modal(),c(".fixed-action-btn").floatingActionButton({direction:"right"}),$fwdVideo.on("click",a),c(".likeVideo").on("click",function(){var e,t;d.readCookie("token")?(e=c("#videoId").val())&&(e=(e=e.replace("https://www.youtube.com/embed/","")).replace("?rel=0",""),(t=new Headers).append("Authorization","Bearer "+d.readCookie("token")),fetch(`https://www.googleapis.com/youtube/v3/videos/rate?id=${e}&rating=like`,{method:"POST",headers:t}).then(e=>{401==e.status&&(d.createCookie("token","","",!1),M.toast({html:"Something went wrong. Please try again",classes:"red-text"})),204==e.status&&M.toast({html:"Youtube video liked",classes:"green-text"}),e.text()}).then(e=>console.log(e)).catch(e=>console.log("error",e))):window.open(`https://accounts.google.com/o/oauth2/v2/auth?client_id=458958442206-nstdi8m8r1ru8qbfd9qmpmhllq5gbui7.apps.googleusercontent.com&redirect_uri=${window.location.origin}/authorizing.html&scope=https://www.googleapis.com/auth/youtube.force-ssl&response_type=code&access_type=offline`)}),c("#postYoutubeComment").on("click",function(){var e,t,o;d.readCookie("token")?!(e=c("#commentContent").val())||(o=c("#videoId").val())&&(o=(o=o.replace("https://www.youtube.com/embed/","")).replace("?rel=0",""),(t=new Headers).append("Authorization","Bearer "+d.readCookie("token")),t.append("Content-Type","application/json"),o=JSON.stringify({snippet:{channelId:"UC7rNzgC2fEBVpb-q_acpsmw",topLevelComment:{snippet:{textOriginal:e}},videoId:o}}),fetch("https://youtube.googleapis.com/youtube/v3/commentThreads?part=snippet",{method:"POST",headers:t,body:o}).then(e=>{e.ok?(M.toast({html:"Youtube comment posted successfully",classes:"green-text"}),c("#videoComment").modal("close")):M.toast({html:"Something went wrong. Please try again",classes:"red-text"})}).then(e=>console.log(e)).catch(e=>console.log("error",e))):window.open(`https://accounts.google.com/o/oauth2/v2/auth?client_id=458958442206-nstdi8m8r1ru8qbfd9qmpmhllq5gbui7.apps.googleusercontent.com&redirect_uri=${window.location.origin}/authorizing.html&scope=https://www.googleapis.com/auth/youtube.force-ssl&response_type=code&access_type=offline`)}),"false"==c("#isPrivate").val()&&c(window).on("load",function(e,t){e.PEP=e.PEP||{};var o=e.PEP.User.GetUserUID(),a=t("#completeProfilePromptThreshold").val();o&&t.ajax({url:"/stats/submissionsCount",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){e&&e.successfulSubmissionsCount>a&&t("#updateProfileModal"+o).modal("open")},error:function(e){e.responseJSON&&e.responseJSON.message&&window.PEP.handleException(e)}})}(window,window.jQuery))}(window,window.jQuery);