!function(E,R){function n(r,t){var l=null,n=E("#"+r+"_lang_select"),o=E("#"+r+"_theme_select"),c=E("#"+r+"_font_select"),u=E("#"+r+"_key_binding"),d=E("#"+r+"_reset_code"),m=E("#"+r+"_format_code"),h=E("#"+r+"_full_screen"),p=E("#"+r+"_compile_code"),g=E("#"+r+"_submit_code"),f=E("#"+r+"_customInput"),S=E("#"+r+"_message"),_=E("#"+r+"_compile_time"),y=E("#"+r+"_compile_memory"),v=E("#"+r+"_compile_actual_output"),C=E("#"+r+"_submit_actual_output"),x={java:62,cpp:54,python:71,javascript:63,ruby:72},b={"18px":"18px","17px":"17px","16px":"16px","15px":"15px","14px":"14px","13px":"13px","12px":"12px"},I={ruby:"ruby",python:"python",js:"javascript",java:"java",cpp:"cpp"},L={ruby:"ace/mode/ruby",python:"ace/mode/python",javascript:"ace/mode/javascript",cpp:"ace/mode/c_cpp",java:"ace/mode/java"},O={vim:"ace/keyboard/vim",ecmas:"ace/keyboard/emacs",vscode:"ace/keyboard/sublime"},w={cobalt:"ace/theme/cobalt",vibrant:"ace/theme/vibrant_ink",Chaos:"ace/theme/chaos",monokai:"ace/theme/monokai",solarized:"ace/theme/merbivore_soft",twilight:"ace/theme/twilight",crimson:"ace/theme/crimson_editor",dracula:"ace/theme/dracula"},U={lang:I.java,theme:w.cobalt,font:b["12px"],keyBinding:O.vscode},G=R.User.GetUserUID()?R.User.GetUserUID()+"_editor_settings":"_editor_settings";R.Utilities.GetItemFromLocalStorage(G)&&(U=JSON.parse(R.Utilities.GetItemFromLocalStorage(G)));var a=R.User.GetUserUID()?R.User.GetUserUID()+"_"+U.lang+"_"+r:U.lang+"_"+r;function k(e,t,n){var o,a,s=e.length;for(i=s-1;0<=i;i--)e.remove(i);for(o in e.innerHtml="",t)t.hasOwnProperty(o)&&((a=document.createElement("option")).text=o,a.value=t[o],t[o]==n&&(a.selected=!0),e.add(a,0))}function F(e){var t=e.getSession();E.ajax({url:"/format",data:{language:U.lang,code:t.getValue()},dataType:"json",method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){window.PEP.hideLoader(),e&&e.data&&t.setValue(e.data)},error:function(e){window.PEP.handleException(e)}})}function T(){var e="";if($sampleCode=E("#"+r+"_sample_code"),!(e=t.saveInSessionStorage&&R.Utilities.isSessionStorageAvailable&&R.Utilities.GetItemFromLocalStorageWithExpiry(a)?JSON.parse(R.Utilities.GetItemFromLocalStorageWithExpiry(a)):e)&&$sampleCode.val())try{e=JSON.parse($sampleCode.val())[U.lang].code}catch(e){}return e}function P(){var e;t.disableAutoCollapseOutput||!M.Collapsible||!E("#"+r+"_collapsible")||(e=M.Collapsible.getInstance(E("#"+r+"_collapsible")))&&e.close(),t.saveInSessionStorage&&R.Utilities.SetItemInLocalStorageWithExpiry(a,JSON.stringify(l.getValue()),1),t&&t.changeFn&&t.changeFn()}this.Init=function(e){R.Utilities.GetItemFromLocalStorage(G)&&(U=JSON.parse(R.Utilities.GetItemFromLocalStorage(G))),(l=ace.edit(r)).setTheme(U.theme),l.getSession().setMode(L[U.lang]),l.getSession().on("change",P),l.setHighlightGutterLine(!1),l.setShowPrintMargin(!1),l.setOptions({indentedSoftWrap:!1,fontSize:U.font,fontFamily:"monospace",readOnly:!(!e||!e.readOnly)&&e.readOnly}),l.session.setUseWrapMode(!0),e.copyPasteDisabled&&l.commands.addCommand({name:"breakTheEditor",bindKey:"ctrl-c|ctrl-v|ctrl-x|ctrl-shift-v|shift-del|cmd-c|cmd-v|cmd-x",exec:function(){}}),E("#"+r+"_tab").tabs();var t=T();function a(){S.attr("class",""),S[0].innerText="",_[0].innerText="Time",S[0].innerText="Status",y[0].innerText="Memory",v[0].innerHTML="",C.html(""),C.hide()}function s(e,t){E("#"+r+"_collapsible")&&M.Collapsible.getInstance(E("#"+r+"_collapsible")).open(),E("#"+r+"_tab")&&M.Tabs.getInstance(E("#"+r+"_tab")).select(0),e&&(S&&S[0]&&(S.attr("class",e.success?"green-text":"red-text"),S[0].innerText=e.message),_&&_[0]&&(_[0].innerText=e.time?+e.time+"sec":"Time"),S&&S[0]&&(S[0].innerText=e.message),y&&y[0]&&(y[0].innerText=e.memory?+e.memory+"kb":"Memory"),v&&v[0]&&(v[0].innerHTML=e.actualOutput),t&&C?(C.html(e.actualOutput),v.hide(),C.show()):v&&v[0]&&(v[0].innerHTML=e.actualOutput,C.hide(),v.show()))}l.setValue(t,-1),o[0]&&k(o[0],w,U.theme),n[0]&&k(n[0],I,U.lang),c[0]&&k(c[0],b,U.font),u[0]&&k(u[0],O,U.keyBinding),n.on("change",function(e){var t;this.value&&(t=E(this).attr("id").split("_")[0],R.CodeEditor.SetLang(t,this.value))}),u.on("change",function(e){var t=E(this).attr("id").split("_")[0];R.CodeEditor.SetkeyBinding(t,this.value)}),o.on("change",function(){this.value&&(U.theme=this.value,l.setOptions({theme:U.theme}),R.Utilities.SetItemInLocalStorage(G,JSON.stringify(U)))}),c.on("change",function(){var e;this.value&&(e=E(this).attr("id").replace("_font_select",""),R.CodeEditor.SetFontSize(e,this.value))}),d.on("click",function(){var e=E(this).attr("id").replace("_reset_code","");R.CodeEditor.ResetCode(e)}),m.on("click",()=>F(l)),h.on("click",function(){var e=E("#"+r)[0];e&&(e.mozRequestFullScreen||e.webkitRequestFullscreen||e.requestFullscreen||e.msRequestFullscreen).call(e)}),p.on("click",function(){$compile_only=E("#"+r+"_compileOnly"),a();var e=l.getSession(),t=E("#contestId"),n=e.getValue(),i=x[U.lang];if(!n||!n.trim())return R.Component.alert("Please write code."),!1;var o=!(!f||!f.val()),e="";$compile_only.val()&&"false"!=$compile_only.val()?o=!0:e=R.Resources.ResourceId(),t={source_code:n,language_id:i,isCustomInput:o,input:f.val().trim(),contestId:t.val()},window.PEP.showLoader(),E.ajax({url:"/compileCode"+(e?"/"+e:""),data:t,dataType:"json",method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){window.PEP.hideLoader(),s(e.data)},error:function(e){window.PEP.handleException(e),s()}})}),g.on("click",function(e){e.preventDefault(),a();var t=l.getSession(),n=E("#contestId"),e=t.getValue(),t=x[U.lang];if(!e||!e.trim())return R.Component.alert("Please write code."),!1;e={source_code:e,language_id:t,marks:E("#marks").val(),contestId:n.val()},window.PEP.showLoader();t=R.Resources.ResourceId();E.ajax({url:"/submitCode/"+t,data:e,dataType:"json",method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){E(".historyTab a").click(),s(e.data,!0),window.PEP.hideLoader(),n&&(E("#questionStatus").text(e.data.success?"Solved":"Attempted "),E("#questionStatus").attr("class",e.data.success?"solved":"attempted "),E("#markObtained").text(e.data.marks),showStats(1))},error:function(e){window.PEP.handleException(e)}})}),e.setCursor&&(l.focus(),l.gotoLine(0))},this.FormatCode=function(){F(l)},this.ResetCode=function(){R.Component.dialog("your changes will be lost",{title:"Please Confirm",modalType:"modal-fixed-footer",buttons:{close:{className:"  red white-text",text:"close",modalClose:!0},confirm:{className:" ",text:"confirm",modalClose:!0,callback:function(){var e=function(){$sampleCode=E("#"+r+"_sample_code");var e="";if($sampleCode.val())try{e=JSON.parse($sampleCode.val())[U.lang].code}catch(e){}return e}(U.lang);l.setValue(e,-1),e&&R.Utilities.SetItemInLocalStorageWithExpiry(a,JSON.stringify(e),1)}}}})},this.ChangeReadOnly=function(e){l.setReadOnly(e)},this.isReadOnly=function(){return l.$readOnly},this.GetContent=function(){return l.getValue()},this.SetContent=function(e){l.setValue(E.trim(e)),l.session.setOption("indentedSoftWrap",!1),l.session.setUseWrapMode(!0),l.scrollToLine(1,!0,!0,function(){})},this.SetLang=function(e){e&&(U.lang=e,l.session.setMode(L[U.lang]),R.Utilities.SetItemInLocalStorage(G,JSON.stringify(U)),a=R.User.GetUserUID()?R.User.GetUserUID()+"_"+U.lang+"_"+r:U.lang+"_"+r,t.saveInSessionStorage&&R.Utilities.isSessionStorageAvailable&&R.Utilities.GetItemFromLocalStorage(a)?(e=JSON.parse(R.Utilities.GetItemFromLocalStorageWithExpiry(a)),l.setValue(e,-1)):l.setValue(T(),-1))},this.SetkeyBinding=function(e){U.keyBinding=e,l.setKeyboardHandler(U.keyBinding),R.Utilities.SetItemInLocalStorage(G,JSON.stringify(U))},this.SetFontSize=function(e){U.font=e,l.setOptions({fontSize:U.font}),R.Utilities.SetItemInLocalStorage(G,JSON.stringify(U))},this.GetSelectedLangCode=function(e){return x[U.lang]},this.GetAllThemes=function(){return I},this.GetAllLanguages=function(){return w},this.GetAllFonts=function(){return b},this.GetAllKeyBindings=function(){return O},this.SetFullScreen=function(){}}R.CodeEditor=new function(){var i={};this.Init=function(e,t){i[e]||(i[e]=new n(e,t),i[e].Init(t))},this.GetContent=function(e){return i[e].GetContent()},this.SetContent=function(e,t,n=!1){i[e].SetContent(t),n&&i[e].FormatCode()},this.FormatCode=function(e){i[e].FormatCode()},this.ResetCode=function(e){i[e].ResetCode()},this.ChangeReadOnly=function(e,t){return i[e].ChangeReadOnly(t)},this.isReadOnly=function(e){return i[e].isReadOnly()},this.GetSelectedLangCode=function(e){return i[e].GetSelectedLangCode()},this.GetAllThemes=function(e){return i[e].GetAllThemes(content)},this.GetAllLanguages=function(e){return i[e].GetSelectedLanguage(content)},this.GetFonts=function(e){return i[e].GetFonts(content)},this.SetLang=function(e,t){i[e].SetLang(t)},this.FullScreen=function(e){return i[e].SetFullScreen()},this.SetFontSize=function(e,t){return i[e].SetFontSize(t)},this.SetkeyBinding=function(e,t){i[e].SetkeyBinding(t)}}}(window.jQuery,window.PEP);