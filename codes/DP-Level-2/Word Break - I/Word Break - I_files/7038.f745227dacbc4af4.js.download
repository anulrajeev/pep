(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7038,8823],{25010:function(e,t,r){"use strict";r.d(t,{Z:function(){return Ar}});var n=r(85893),o=r(67294),i=r(88767),a=r(97375),u=r(68527),l=r(37496),c=r(10894),s=r(15193),d=r(34051),f=r.n(d),p=r(43238),v=r(7657),m=r(47398),h=r(86893),g=r(63750),x=r(5434),b=r(73465),y=r(11391);function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var k=function(e){var t=e.changeAudioInSetting,r=e.changeAudioOutSetting,i=e.changeVideoSetting,a=e.audioInDevice,l=e.audioOutDevice,c=e.cameraDevice,s=(0,o.useState)(0),d=s[0],f=s[1],p=(0,o.useState)({audio:[],video:[],audioout:[]}),v=p[0],m=p[1];return(0,o.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then((function(e){console.log(e);var t=[],r=[],n=[];e.forEach((function(e){"audioinput"===e.kind&&r.push(e),"videoinput"===e.kind&&t.push(e),"audiooutput"===e.kind&&n.push(e)})),m({video:t,audio:r,audioout:n})}))}),[]),(0,n.jsx)(u.kC,{h:"13.875rem",w:"80%",zIndex:11,maxW:"450px",minW:"275px",bgColor:"background.paper",flexDir:"column",borderRadius:"10px",children:(0,n.jsxs)(b.mQ,{variant:"unstyled",onChange:function(e){return f(e)},h:"3.5rem",w:"100%",mt:"10px",children:[(0,n.jsxs)(b.td,{color:"white",justifyContent:"space-between",alignItems:"center",h:"100%",w:"100%",children:[(0,n.jsx)(S,{i:0,tabIndex:d,headings:["Audio","Video"]}),(0,n.jsx)(S,{i:1,tabIndex:d,headings:["Audio","Video"]})]}),(0,n.jsxs)(b.nP,{children:[(0,n.jsxs)(b.x4,{display:"flex",flexDir:"column",alignItems:"center",children:[(0,n.jsx)(O,{value:"boolean"===typeof a?JSON.stringify(v.audio[0]):JSON.stringify(a),onChange:function(e){t(JSON.parse(e.target.value))},values:v.audio,heading:"Microphone"}),(0,n.jsx)(O,{value:"boolean"===typeof l?JSON.stringify(v.audio[0]):JSON.stringify(l),onChange:function(e){r(JSON.parse(e.target.value))},values:v.audioout,heading:"Speaker"})]}),(0,n.jsx)(b.x4,{alignItems:"center",display:"flex",flexDir:"column",children:(0,n.jsx)(O,{value:"boolean"===typeof c?JSON.stringify(v.video[0]):JSON.stringify(c),onChange:function(e){i(JSON.parse(e.target.value))},values:v.video,heading:"Camera"})})]})]})})},S=function(e){var t=e.tabIndex,r=e.i,o=e.headings;return(0,n.jsxs)(b.OK,{p:0,h:"100%",fontSize:"12px",_selected:{color:"active.primary",boxShadow:"none"},display:"flex",justifyContent:"center",alignItems:"center",w:"50%",flexDirection:"column",children:[o[r],t==r?(0,n.jsx)(c.JO,{fontSize:6,mt:"0.5rem",viewBox:"0 0 200 200",color:"active.primary",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}):(0,n.jsx)(c.JO,{fontSize:6,mt:"0.5rem",viewBox:"0 0 200 200",color:"background.paper",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})})]})},O=function(e){var t=e.heading,r=e.values,o=C(e,["heading","values"]);return(0,n.jsxs)(u.kC,{alignItems:"center",mb:"24px",w:"80%",justifyContent:"flex-start",children:[(0,n.jsx)(u.xv,{variant:"b2",mr:"24px",textAlign:"start",flex:"0.5",children:t}),(0,n.jsx)(y.Ph,w({},I,o,{children:r.map((function(e,t){return(0,n.jsx)("option",{value:JSON.stringify(e),label:e.label,style:{fontWeight:600,padding:"10px"},children:e.label},e.label+t)}))}))]})},I={color:"text.buttonNonActive",fontWeight:"600",fontSize:"12px",h:"2rem",flex:"1",bgColor:"button.nonActive",border:"none"},R=r(2804),A=r(88810),E=r(61193),F=r.n(E),U=r(53657),P=r(38853),D=r.n(P),M=r(29092),z=r(90269),_=r(30381),B=r.n(_);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(e){var t=e.pipMode,r=(0,o.useState)(0),i=r[0],a=r[1],l=Z((0,R.useRecoilState)(A.l),2),c=l[0],s=(l[1],(0,o.useRef)(null));return(0,o.useEffect)((function(){return s.current=setInterval((function(){a((function(e){return e+1}))}),1e3),console.log(c.outgoing),c.outgoing&&!c.incoming&&(clearInterval(s.current),a(0)),function(){clearInterval(s.current)}}),[c]),(0,o.useEffect)((function(){console.log(B()().diff(c.time,"seconds")),a(0!==c.time?B()().diff(c.time,"seconds"):0)}),[c.time]),"audio"===c.type?(0,n.jsx)(u.xv,{as:"caption",children:(0,z.g6)(i)}):t?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(u.kC,{bgGradient:"linear(97.01deg, #F1EEF9 -23.05%, rgba(241, 238, 249, 0) 164.72%)",backdropFilter:"blur(8px)",border:"1px solid #F1EEF9 ",borderRadius:"10px",h:"2.5rem",w:"6.875rem",pos:"absolute",left:"1.5rem",top:"1rem",pl:"0.5rem",pr:"0.5rem",alignItems:"center",justifyContent:"center",children:[(0,n.jsx)(u.kC,{w:"30%",children:(0,n.jsx)(h.TCC,{size:20,color:"brand.600"})}),(0,n.jsx)(u.xv,{as:"h3",ml:"0.5rem",fontWeight:"600",color:"brand.600",w:"70%",children:(0,z.g6)(i)})]})},W=r(21157),L=r(86704),q=r(28040),V=r(85230),J=r(31573);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){K(e,t,r[t])}))}return e}function H(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(e){var t,r,i,a,l,c,s,d,m,b=e.isOpenDrawer,y=e.DrawerToggle,j=function(){Ne&&(clearInterval(Be.current),navigator.mediaDevices.getUserMedia({video:"video"===je.type,audio:!0}).then((function(e){we(G({},je,{incoming:!1,active:!0})),Ge((function(t){return G({},t,{my:e})})),ke.current&&(ke.current.srcObject=e);var t=new(D())({initiator:!1,trickle:!1,stream:e});Ie.current=t,t.on("signal",(function(e){var t;console.log("signal accept peer"),Ne.emit("acceptCall",{signal:e,to:null===(t=je.from)||void 0===t?void 0:t.uuid})})),t.on("stream",(function(e){var t;we(G({},je,{active:!0,incoming:!1,time:B()()})),console.log(e," given by caller buddy"),Ge((function(t){return G({},t,{friend:e})})),(null===(t=e.getVideoTracks()[0])||void 0===t?void 0:t.enabled.valueOf())?Fe(!0):Fe(!1),Se.current&&(Se.current.srcObject=e)})),t.on("error",(function(e){Ye(!0),console.log("error aaya 2"),Te({duration:3e3,isClosable:!0,render:function(){return(0,n.jsx)(q.V,{children:"Call Error"})}}),Ne.disconnect();var t=W.$j(L.Z.server,{transports:["websocket"]});We(t)})),t.signal(je.incomingSignal),Ne.on("close",(function(){Ye(!1),t.destroy(),Ne.disconnect();var e=W.$j(L.Z.server,{transports:["websocket"]});We(e)}))})).catch((function(e){console.log("%c error hai bhaisab ","background:#b6b6b6;color:blue;padding:20px"),Te({duration:3e3,isClosable:!0,render:function(){return(0,n.jsx)(q.V,{children:"Call could'nt be connected"})}}),Ye(!0)})))},w=function(e){Ye(!1),Te({duration:3e3,isClosable:!0,render:function(){return(0,n.jsx)(q.V,{children:"Call declined"})}}),e.destroy(),null===Ne||void 0===Ne||Ne.disconnect();var t=W.$j(L.Z.server,{transports:["websocket"]});We(t)},C=(0,o.useState)(!0),S=C[0],O=C[1],I=(0,o.useState)(!0),E=I[0],P=I[1],z=(0,o.useState)(!0),_=z[0],T=z[1],Z=(0,o.useState)(!0),$=Z[0],K=Z[1],H=(0,o.useState)(!0),X=H[0],te=H[1],re=(0,o.useState)(!1),ne=re[0],oe=re[1],ie=(0,o.useState)(!1),ae=ie[0],ue=ie[1],le=(0,o.useState)(""),ce=le[0],se=le[1],de=(0,o.useState)(!1),fe=de[0],pe=de[1],ve=(0,o.useState)(!1),me=ve[0],he=ve[1],ge=(0,o.useState)(!1),xe=ge[0],be=ge[1],ye=Y((0,R.useRecoilState)(A.l),2),je=ye[0],we=ye[1],Ce=(0,o.useRef)(null),ke=(0,o.useRef)(null),Se=(0,o.useRef)(null),Oe=(0,R.useRecoilValue)(M.ZP),Ie=(0,o.useRef)(null),Re=(0,o.useRef)(null),Ae=(0,o.useState)(!0),Ee=Ae[0],Fe=Ae[1],Ue=(0,o.useState)(!1),Pe=Ue[0],De=Ue[1],Me=(0,o.useState)(!1),ze=Me[0],_e=Me[1],Be=(0,o.useRef)(null),Te=(0,p.pm)(),Ze=Y((0,R.useRecoilState)(U.Z),2),Ne=Ze[0],We=Ze[1],Le=(0,o.useRef)(),qe=(0,o.useState)(1),Ve=qe[0],Je=qe[1],$e=(0,J.Z)();(0,o.useEffect)((function(){Je($e&&$e>765&&$e<1024?-1:$e&&$e>765?1:0)}),[$e]);var Qe=(0,o.useState)({my:null,friend:null}),Ke=Qe[0],Ge=Qe[1],He=function(){navigator.mediaDevices.getUserMedia({audio:!0,video:"video"===je.type}).then((function(e){var t;if(null===(t=Le.current)||void 0===t||t.play(),Ge((function(t){return G({},t,{my:e})})),Ne){ke.current&&(ke.current.srcObject=e),we((function(e){return G({},e,{active:!0,incoming:!1,outgoing:!0})}));var r=new(D())({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:stun01.sipphone.com"},{urls:"stun:stun.ekiga.net"},{urls:"stun:stun.fwdnet.net"},{urls:"stun:stun.ideasip.com"},{urls:"stun:stun.iptel.org"},{urls:"stun:stun.rixtelecom.se"},{urls:"stun:stun.schlund.de"},{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stunserver.org"},{urls:"stun:stun.softjoys.com"},{urls:"stun:stun.voiparound.com"},{urls:"stun:stun.voipbuster.com"},{urls:"stun:stun.voipstunt.com"},{urls:"stun:stun.voxgratia.org"},{urls:"stun:stun.xten.com"},{urls:"turn:3.6.116.136:3478?transport=tcp",credential:"mypass",username:"myuser"},{urls:"turn:3.108.5.50:3478?transport=tcp",credential:"pass1",username:"user1"}]},stream:e});Ie.current=r,r.on("signal",(function(e){we((function(t){var r,n,o;(console.log("test",t.outgoing),t.outgoing)&&(console.log("signal call peer"),console.log(null===(r=t.to)||void 0===r?void 0:r.userId,null===(n=t.to)||void 0===n?void 0:n.name),Ne.emit("callUser",{type:t.type,to:null===(o=t.to)||void 0===o?void 0:o.userId,signalData:e,from:Oe}),De(!0));return t}))})),r.on("stream",(function(e){console.log(e," given by buddy"),we(G({},je,{outgoing:!1,time:B()()})),De(!1),Ge((function(t){return G({},t,{friend:e})})),Se.current&&(Se.current.srcObject=e)})),r.on("error",(function(e){Ye(!0),console.log("error aaya 1"),Ne.disconnect(),Te({duration:3e3,isClosable:!0,render:function(){return(0,n.jsx)(q.V,{children:"Call Error"})}});var t=W.$j(L.Z.server,{transports:["websocket"]});We(t)})),Ne.on("callAccepted",(function(e){var t;null===(t=Le.current)||void 0===t||t.pause(),clearInterval(Be.current),console.log("call accepted "+S||0),O((function(e){var t;return null===Ne||void 0===Ne||Ne.emit("video-toggle",{video:e,to:je.to?je.to.userId:null===(t=je.from)||void 0===t?void 0:t.uuid}),e})),r.signal(e)})),Ne.on("busy",(function(){console.log("busy"),_e(!0)})),Ne.on("close",(function(){console.log("call closed"),Ye(!1),r.destroy(),Ne.disconnect();var e=W.$j(L.Z.server,{transports:["websocket"]});We(e)})),Ne.on("user-offline",(function(e){var t,n,o=e.id;we((function(e){return n=e.outgoing,e})),n&&(null===(t=je.to)||void 0===t?void 0:t.userId)===o&&(console.log("user offline hua"),w(r))})),Ne.on("rejected",(function(){console.log("call rejected"),w(r)}))}})).catch((function(e){console.log("%c error hai bhaisab ","background:#b6b6b6;color:blue;padding:20px"),Te({duration:3e3,isClosable:!0,render:function(){return(0,n.jsx)(q.V,{children:"Media device not found"})}}),Ye(!0)}))},Ye=function(e){var t,r;(null===(t=Le.current)||void 0===t||t.pause(),e)&&(null===Ne||void 0===Ne||Ne.emit("close",{to:null!==je.to?je.to.userId:null===(r=je.from)||void 0===r?void 0:r.uuid}),console.log("close emited"));"video"===je.type&&ke.current&&Ke.my&&(ke.current.pause(),ke.current.src="",console.log("Vid off")),Re.current&&"video"===je.type&&Re.current.getTracks().forEach((function(e){e.stop()})),Ge((function(e){var t;return console.log({st:e}),null===(t=e.my)||void 0===t||t.getTracks().forEach((function(e){e.stop()})),e})),we(G({},je,{active:!1,incoming:!1,outgoing:!1,time:0}))};(0,o.useEffect)((function(){ze&&setTimeout((function(){console.log("ye busy vala func chla"),Ye(!1)}),3e3)}),[ze]),(0,o.useEffect)((function(){console.log("hello streams updating wow",Ke),ke.current&&(ke.current.srcObject=Ke.my),Se.current&&(Se.current.srcObject=Ke.friend)}),[je,Ke,xe]),(0,o.useEffect)((function(){ke.current&&(ke.current.srcObject=ne?Ke.friend:Ke.my),Se.current&&(Se.current.srcObject=ne?Ke.my:Ke.friend),ue(!ae)}),[ne]),(0,o.useEffect)((function(){clearTimeout(Ce.current),Ce.current=setTimeout((function(){se("")}),3e3)}),[ce]),(0,o.useEffect)((function(){return je.incoming||He(),Be.current=setInterval((function(){Ye(!0)}),75e3),Le.current=new Audio("/assets/sounds/ringtone.ogg"),Le.current.loop=!0,function(){console.log("clean up func chl gya"),_e((function(e){return Ye(!e),!0})),Ne&&(Ne.removeListener("rejected"),Ne.removeListener("close"))}}),[]),(0,o.useEffect)((function(){we(G({},je,{acceptCall:j,callUser:He})),null===Ne||void 0===Ne||Ne.on("close",(function(){console.log("call closed"),Ye(!1)})),null===Ne||void 0===Ne||Ne.on("video-toggle",(function(e){Fe(e.video),console.log(je.outgoing||e.video),console.log("frined video changed "+e.video)}))}),[Ne]),(0,o.useEffect)((function(){var e;(je.incoming||Ke.my&&(Ke.my.getVideoTracks()[0].enabled=S),je.incoming||je.outgoing||!je.active)||(console.log("video toggle event send"),console.log(je.to?je.to:je.from),null===Ne||void 0===Ne||Ne.emit("video-toggle",{video:S||me,to:je.to?je.to.userId:null===(e=je.from)||void 0===e?void 0:e.uuid}))}),[S,me]),(0,o.useEffect)((function(){je.incoming||Ke.my&&(Ke.my.getAudioTracks()[0].enabled=E)}),[E]);var Xe=function(){var e,t=(e=f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(t),!Se.current){e.next=4;break}return e.next=4,Se.current.setSinkId(t.deviceId);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Q(i,n,o,a,u,"next",e)}function u(e){Q(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),et=function(){me?navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){ke.current&&(ke.current.srcObject=e,he(!1))})):navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0}).then((function(e){var t;he(!0),Re.current=e,Ie.current.replaceTrack(null===Ke||void 0===Ke||null===(t=Ke.my)||void 0===t?void 0:t.getVideoTracks()[0],e.getVideoTracks()[0],Ke.my),e.getTracks()[0].onended=function(){var t;he(!1),Ie.current.replaceTrack(e.getVideoTracks()[0],null===Ke||void 0===Ke||null===(t=Ke.my)||void 0===t?void 0:t.getVideoTracks()[0],Ke.my),ke.current.srcObject=Ke.my}}))};return je.incoming&&!je.active?(0,n.jsx)(n.Fragment,{}):xe||"audio"===je.type?(0,n.jsx)(F(),{axis:"both",defaultPosition:{x:20,y:80},grid:[25,25],scale:1,cancel:".chakra-button",children:(0,n.jsx)(u.oM,{h:"173px",w:"266px",zIndex:2500,pos:"absolute",bgColor:"button.nonActive",left:0,top:["3rem","3rem","3rem","0","0"],ratio:16/9,borderRadius:"10px",children:(0,n.jsxs)(u.kC,{h:"100%",w:"100%",pos:"relative",children:[(je.outgoing||je.active&&"audio"===je.type||(ne?!S:!Ee))&&(0,n.jsxs)(u.kC,{pos:"absolute",top:"1rem",flexDir:"column",alignItems:"center",children:[(0,n.jsx)(v.qE,{mb:"0.5rem",src:ne?null===Oe||void 0===Oe?void 0:Oe.profileUrl:je.to?je.to.profileUrl:null===(t=je.from)||void 0===t?void 0:t.profileUrl}),(0,n.jsx)(u.xv,{as:"h4",mb:"0.25rem",children:ne?null===Oe||void 0===Oe?void 0:Oe.fullName:je.to?je.to.name:null===(r=je.from)||void 0===r?void 0:r.fullName}),je.outgoing||je.incoming?(0,n.jsx)(u.xv,{as:"caption",fontWeight:ze?"600":"",children:ze?"User is busy":Pe?"Ringing":"Calling"}):(0,n.jsx)(N,{pipMode:xe})]}),(0,n.jsx)(u.oM,{pos:"absolute",ratio:1,h:"100%",w:"100%",zIndex:"-1",children:(0,n.jsx)("video",{ref:ne?ke:Se,style:{position:"absolute",backgroundColor:"button.nonActive"},height:"100%",autoPlay:!0})}),(0,n.jsxs)(u.kC,{pos:"absolute",bottom:"8px",alignItems:"center",justifyContent:"space-between",children:["video"===je.type&&(0,n.jsx)(N,{pipMode:xe}),"video"===je.type&&(0,n.jsx)(ee,{"aria-label":S?"Turn off camera":"Turn on camera",mr:"0.5rem",onClick:function(e){1===e.detail&&(O(!S),se(S?"Camera is off":"Camera is on"))},children:S?(0,n.jsx)(h.HwW,{size:20}):(0,n.jsx)(h.P8L,{size:20})}),(0,n.jsx)(ee,{"aria-label":E?"Turn off mic":"Turn on mic",onClick:function(e){1===e.detail&&(P(!E),se(E?"Mic is off":"Mic is on"))},children:E?(0,n.jsx)(h.dnc,{size:20}):(0,n.jsx)(h.v1j,{size:20})}),"audio"===je.type&&(0,n.jsx)(ee,{"aria-label":"Exit meeting",ml:"1rem",onClick:function(e){1===e.detail&&Ye(!0)},children:(0,n.jsx)(x.hoo,{size:20})}),"video"===je.type&&(0,n.jsx)(ee,{ml:"0.5rem","aria-label":"Full screen",children:(0,n.jsx)(g.Ljx,{size:20,onClick:function(e){1===e.detail&&be(!xe)}})})]})]})})}):(0,n.jsx)(u.kC,{zIndex:"modal",pos:"fixed",h:["full","full","full","100vh","100vh"],transition:"all .3s ease",w:["full","full","full",b?"calc(".concat(-1===Ve?"60%":"72%"," - ").concat(V.ZR,")"):"full",b?"calc(".concat(-1===Ve?"60%":"72%"," - ").concat(V.ZR,")"):"full"],bgColor:"black",left:0,top:0,overflow:"hidden",children:(0,n.jsxs)(u.kC,{pos:"relative",h:"100%",w:"100%",boxSize:"100%",color:"brand.600",borderRadius:"0.625rem",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,n.jsx)(u.oM,{pos:"absolute",ratio:1,h:"100%",w:"100%",objectFit:"contain",children:(0,n.jsx)("video",{ref:Se,muted:ne,src:ne?null===(i=ke.current)||void 0===i?void 0:i.src:null===(a=Se.current)||void 0===a?void 0:a.src,style:{position:"absolute",backgroundColor:"black",borderRadius:"10px",objectFit:"contain"},height:"100%",width:"100%",autoPlay:!0})}),""!==ce&&(0,n.jsx)(u.kC,{bgColor:"background.paper",p:"10px",pos:"absolute",top:"1rem",left:"45%",borderRadius:"10px",children:(0,n.jsx)(u.xv,{variant:"b2",children:ce})}),(je.outgoing||(ne?!S:!Ee))&&(0,n.jsxs)(u.kC,{pos:"absolute",color:"text.primary",top:"7.9375rem",flexDir:"column",alignItems:"center",children:[(0,n.jsx)(v.qE,{src:ne?null===Oe||void 0===Oe?void 0:Oe.profileUrl:je.to?je.to.profileUrl:null===(l=je.from)||void 0===l?void 0:l.profileUrl,h:"140px",w:"140px",mb:"1rem",border:"4px solid ".concat(je.outgoing||je.incoming?"#EA9A91":"#8ECB7E")}),(0,n.jsx)(u.xv,{as:"h2",mb:"1rem",fontWeight:"500",children:ne?null===Oe||void 0===Oe?void 0:Oe.fullName:je.to?je.to.name:null===(c=je.from)||void 0===c?void 0:c.fullName}),je.outgoing&&(0,n.jsx)(u.xv,{as:"h4",fontWeight:"600",children:ze?"User is busy":Pe?"Ringing":"Calling"})]}),fe&&(0,n.jsxs)(u.kC,{h:"100%",w:"100%",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,n.jsx)(u.kC,{h:"100%",w:"100%",z:"10",position:"absolute",onClick:function(){fe&&pe(!fe)}}),(0,n.jsx)(k,{changeAudioInSetting:function(e){T(e),navigator.mediaDevices.getUserMedia({video:"boolean"===typeof $?$:{deviceId:$.deviceId},audio:{deviceId:e.deviceId}}).then((function(e){var t;ke.current&&(ke.current.srcObject=e),Ie.current.replaceTrack(null===(t=Ke.my)||void 0===t?void 0:t.getAudioTracks()[0],e.getAudioTracks()[0],Ke.my)}))},changeAudioOutSetting:Xe,changeVideoSetting:function(e){K(e),navigator.mediaDevices.getUserMedia({video:{deviceId:e.deviceId},audio:"boolean"===typeof _?_:{deviceId:_.deviceId}}).then((function(e){var t;ke.current&&(ke.current.srcObject=e),Ie.current.replaceTrack(null===(t=Ke.my)||void 0===t?void 0:t.getVideoTracks()[0],e.getVideoTracks()[0],Ke.my)}))},cameraDevice:$,audioInDevice:_,audioOutDevice:X})]}),(0,n.jsx)(N,{pipMode:xe}),(0,n.jsx)(u.kC,{h:"5.8125rem",w:"5.4375rem",pos:"absolute",top:"80px",right:"1rem",borderRadius:"10px",border:"1px solid #8ECB7E",justifyContent:"center",alignItems:"center",cursor:"pointer",children:(0,n.jsxs)(u.kC,{w:"100%",h:"100%",pos:"relative",alignItems:"center",justifyContent:"center",children:[(ne?!Ee:!S)&&(0,n.jsx)(u.kC,{pos:"absolute",zIndex:"modal",h:"100%",w:"100%",top:"0",justifyContent:"center",alignItems:"center",children:(0,n.jsx)(v.qE,{src:ne?je.to?je.to.profileUrl:null===(s=je.from)||void 0===s?void 0:s.profileUrl:null===Oe||void 0===Oe?void 0:Oe.profileUrl,h:"3rem",w:"3rem",mb:"0.5rem",border:"1px solid ".concat(je.outgoing||je.incoming?"#EA9A91":"#8ECB7E")})}),(0,n.jsx)(u.oM,{ratio:1,h:"100%",w:"100%",children:(0,n.jsx)("video",{ref:ke,src:ne?null===(d=Se.current)||void 0===d?void 0:d.src:null===(m=ke.current)||void 0===m?void 0:m.src,style:{objectFit:"contain",position:"absolute",backgroundColor:"black",borderRadius:"10px"},height:"100%",width:"100%",autoPlay:!0,muted:!ne})}),(0,n.jsx)(ee,{pos:"absolute",zIndex:"modal","aria-label":"",opacity:0,_hover:{opacity:1},onClick:function(e){1===e.detail&&oe(!ne)},icon:(0,n.jsx)(g.GVK,{size:20})})]})}),(0,n.jsxs)(u.kC,{pos:"absolute",h:"10%",w:"100%",bottom:0,bgGradient:"linear(360deg, #1F1B2C -434.02%, rgba(31, 27, 44, 0) 209.21%)",borderRadius:"0px 0px 10px 10px ",pl:"1.5rem",pr:"1.5rem",alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(ee,{"aria-label":"Settings",onClick:function(e){1===e.detail&&pe(!fe)},children:(0,n.jsx)(h.nbt,{size:20})}),(0,n.jsxs)(u.kC,{flexBasis:"16rem",justifyContent:["space-evenly","space-evenly","space-evenly","space-between","space-between"],children:[(0,n.jsx)(ee,{"aria-label":S?"Turn off camera":"Turn on camera",onClick:function(e){1===e.detail&&(O(!S),se(S?"Camera is off":"Camera is on"))},children:S?(0,n.jsx)(h.HwW,{size:20}):(0,n.jsx)(h.P8L,{size:20})}),(0,n.jsx)(ee,{"aria-label":E?"Turn off mic":"Turn on mic",onClick:function(e){1===e.detail&&(P(!E),se(E?"Mic is off":"Mic is on"))},children:E?(0,n.jsx)(h.dnc,{size:20}):(0,n.jsx)(h.v1j,{size:20})}),(0,n.jsx)(ee,{"aria-label":"Screen share",disabled:me||je.outgoing,onClick:function(e){1===e.detail&&!je.outgoing&&et()},display:["none","none","none","flex","flex"],children:(0,n.jsx)(x.Viv,{size:20})}),(0,n.jsx)(ee,{"aria-label":"Chat",onClick:function(e){1===e.detail&&y()},display:["none","none","none","flex","flex"],children:b?(0,n.jsx)(g.Ljx,{size:20}):(0,n.jsx)(g.aPP,{size:20})}),(0,n.jsx)(ee,{"aria-label":"Pip",onClick:function(e){1===e.detail&&be(!xe)},display:["none","none","none","flex","flex"],children:(0,n.jsx)(g.Obn,{size:20})})]}),(0,n.jsx)(ee,{"aria-label":"Exit meeting",onClick:function(e){1===e.detail&&Ye(!0)},children:(0,n.jsx)(x.hoo,{size:20})})]})]})})},ee=function(e){var t=e.children,r=H(e,["children"]);return(0,n.jsx)(m.u,{label:r["aria-label"],p:"0.5rem 1rem 0.5rem 1rem",bgColor:"background.paper",fontSize:"12px",borderRadius:"8px",children:(0,n.jsx)(s.hU,G({boxSize:"2.5rem",variant:"unstyled",bgGradient:"linear(97.01deg, #F1EEF9 -23.05%, rgba(241, 238, 249, 0) 164.72%)",backdropFilter:"blur(8px)",border:"1px solid #F1EEF9 ",borderRadius:"20px",display:"flex",justifyContent:"center",alignItems:"center",icon:t||r.icon},r))})},te=r(79215),re=r(25675),ne=r(246),oe=r.n(ne),ie=r(38845),ae=r(54107),ue="skeleton.end",le="skeleton.start",ce=function(e){var t=e.isReverse;return(0,n.jsxs)(u.kC,{w:"100%",flexGrow:1,flexDir:t?"row-reverse":"row",alignItems:"flex-start",my:"10px",children:[(0,n.jsx)(ae.s7,{size:"12",startColor:le,endColor:ue}),(0,n.jsxs)(u.kC,{w:"90%",flexDirection:"column",ml:"0.5rem",children:[(0,n.jsx)(ae.Od,{height:"5px",width:"40%",startColor:le,endColor:ue,mt:"0.5rem",borderRadius:"10px"}),(0,n.jsx)(ae.Od,{height:"18px",display:"flex",flexGrow:1,startColor:le,endColor:ue,mt:"0.5rem",borderRadius:"5px"})]})]})},se=r(85450),de=r(23279),fe=r.n(de),pe=r(4612),ve=r(59876),me=function(e){var t=e.searchInput,r=e.setSearchInput;return(0,n.jsx)(u.kC,{pos:"relative",p:"0 1rem",children:(0,n.jsxs)(pe.BZ,{mb:"10px",border:"0.01px solid gray",borderRadius:"0.5rem",color:"black",children:[(0,n.jsx)(pe.Z8,{display:"flex",alignItems:"center",pointerEvents:"none",height:"100%",children:(0,n.jsx)(ve.W1,{color:"gray.500"})}),(0,n.jsx)(pe.II,{bgColor:"white",height:"32px",placeholder:"Search Friend",fontSize:"12px",value:t,onChange:function(e){r(e.target.value)},outline:"none"})]})})},he=(0,o.memo)(me),ge=r(23324);function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){be(e,t,r[t])}))}return e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var we=function(e){var t=e.recentUser,r=e.type,o=(0,i.useMutation)(ie.bG),a=je((0,R.useRecoilState)(te.nB),2)[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.kC,{bgColor:"brand.600",p:"0.5rem 0.625rem",_hover:{backgroundColor:"icon.hover",borderRadius:"10px"},onClick:function(){return function(e){var t={uuid:e.id};"friend"==r?o.mutate(t,{onSuccess:function(t){var r={id:t.id,name:e.fullName,profileUrl:e.profileUrl,isRead:1,userId:e.id,isBlocked:t.isBlocked,isBlockedByMe:t.isBlockedByMe,isFriend:!0};e.isOnline?a(ye({},r,{isOnline:e.isOnline})):a(r)},onError:console.error}):a(ye({},e,{name:e.fullName,isRead:1}))}(t)},cursor:"pointer",children:[(0,n.jsx)(u.kC,{mr:"14px",position:"relative",children:(0,n.jsx)(ge.z,{height:"40px",width:"40px",borderWidth:"2px",borderColor:t.isOnline?"green":"white",borderStyle:"solid",src:null===t||void 0===t?void 0:t.profileUrl,name:null===t||void 0===t?void 0:t.fullName,UserRole:null===t||void 0===t?void 0:t.role})}),(0,n.jsx)(u.kC,{justifyContent:"center",flexDir:"column",flexGrow:1,children:(0,n.jsx)(u.xv,{w:"11.25rem",isTruncated:!0,fontSize:"0.875rem",fontWeight:"500",color:"text.primary",children:null===t||void 0===t?void 0:t.fullName})})]})})},Ce=r(40077);function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}function Ie(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Re=function(){var e=(0,R.useRecoilValue)(te.Or),t=(0,o.useState)(""),r=t[0],a=t[1],l=(0,o.useRef)(),c=(0,o.useState)({data:[],pagination:{limit:0,total:0,offset:0}}),s=c[0],d=c[1],f=(0,o.useRef)(0),p=(0,o.useState)(!1),v=p[0],m=p[1],h=(0,i.useQuery)(["getUserFriendList",{uuid:null,offset:f.current,query:r}],ie.NV,{enabled:!1,onSuccess:function(t){var r=t.data.map((function(t){return e.includes(t.id)?Oe({},t,{isOnline:!0}):t}));f.current=t.pagination.offset+t.pagination.limit,d((function(e){return{pagination:t.pagination,data:Ie(e.data).concat(Ie(r))}})),m(!1)},onError:function(e){console.error(e),m(!1)}});(0,o.useEffect)((function(){m(!0),l.current=fe()(h.refetch,1e3)}),[]),(0,o.useEffect)((function(){m(!0),f.current=0,d({data:[],pagination:{offset:0,limit:0,total:0}}),l.current()}),[r]),(0,o.useEffect)((function(){d((function(t){var r;return{data:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.map((function(t){return e.includes(t.id)?Oe({},t,{isOnline:!0}):Oe({},t,{isOnline:!1})})),pagination:null===t||void 0===t?void 0:t.pagination}}))}),[e]);var g=(0,o.useRef)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(he,{setSearchInput:a,searchInput:r}),(0,n.jsxs)(Ce.Z,{style:{overflow:"auto",width:"100%",height:"100%"},scrollableNodeProps:{ref:g},children:[(0,n.jsx)(oe(),{loadMore:function(){f.current>=10&&h.refetch()},hasMore:s.pagination.total>f.current&&0!=f.current,loader:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ce,{isReverse:!1})}),style:{width:"100%"},threshold:50,useWindow:!1,getScrollParent:function(){return g.current},children:s&&s.data.length>0||h.isFetching?s.data.map((function(e,t){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(we,{recentUser:e,type:"friend"},e.id)})})):v?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(se.Z,{text:"User"})},"infiniteScroll"),v?(0,n.jsxs)(u.kC,{flexDir:"column",children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!1})]}):(0,n.jsx)(n.Fragment,{})]})]})},Ae=(0,o.memo)(Re);function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Fe(e,t,r[t])}))}return e}function Pe(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var De=function(){var e=(0,R.useRecoilValue)(te.Or),t=(0,o.useState)(""),r=t[0],a=t[1],l=(0,o.useRef)(),c=(0,o.useState)({data:[],pagination:{limit:0,total:0,offset:0}}),s=c[0],d=c[1],f=(0,o.useRef)(0),p=(0,o.useState)(!1),v=p[0],m=p[1],h=(0,i.useQuery)(["getUserFriendList",{offset:f.current,query:r}],ie.S4,{enabled:!1,onSuccess:function(t){var r=t.data.map((function(t){return e.includes(t.id)?Ue({},t,{isOnline:!0}):t}));f.current=t.pagination.offset+t.pagination.limit,d((function(e){return{pagination:t.pagination,data:Pe(e.data).concat(Pe(r))}})),m(!1)},onError:function(e){console.error(e),m(!1)}});(0,o.useEffect)((function(){m(!0),l.current=fe()(h.refetch,1e3)}),[]),(0,o.useEffect)((function(){m(!0),f.current=0,d({data:[],pagination:{offset:0,limit:0,total:0}}),l.current()}),[r]),(0,o.useEffect)((function(){d((function(t){var r;return{data:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.map((function(t){return e.includes(t.id)?Ue({},t,{isOnline:!0}):Ue({},t,{isOnline:!1})})),pagination:null===t||void 0===t?void 0:t.pagination}}))}),[e]);var g=(0,o.useRef)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(he,{setSearchInput:a,searchInput:r}),(0,n.jsxs)(Ce.Z,{style:{overflow:"auto",width:"100%",height:"100%"},scrollableNodeProps:{ref:g},children:[s&&s.data.length>0||h.isFetching?(0,n.jsx)(oe(),{loadMore:function(){h.refetch()},hasMore:s.pagination.total>f.current&&0!=f.current,loader:(0,n.jsx)(n.Fragment,{children:"Loading..."}),style:{width:"100%"},threshold:50,useWindow:!1,getScrollParent:function(){return g.current},children:s&&s.data.map((function(e,t){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(we,{recentUser:e,type:"group"},e.id)})}))},"infiniteScroll"):v?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(se.Z,{text:"group"}),v?(0,n.jsxs)(u.kC,{flexDir:"column",children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!1})]}):(0,n.jsx)(n.Fragment,{})]})]})},Me=r(26901),ze=function(e){var t=e.tabIndex,r=e.setTabIndex,o=e.handleClose,i=(0,R.useSetRecoilState)(te.nB),a=(0,R.useSetRecoilState)(te.Sx),l=(0,R.useRecoilValue)(Me.Oj);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.kC,{alignItems:"center",w:"100%",children:[(0,n.jsx)(u.kC,{cursor:"pointer",alignItems:"start",height:"fit-content",pt:"2px",children:(0,n.jsxs)(c.JO,{width:"13",height:"15",viewBox:"0 0 13 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(){o(),i(null),a(null)},children:[(0,n.jsx)("path",{d:"M1.16154 0.000700951C1.31093 0.000192642 1.45854 0.033165 1.59352 0.0971937C1.7285 0.161222 1.84742 0.254682 1.94154 0.370702L6.77154 6.3707C6.91862 6.54963 6.99902 6.77408 6.99902 7.0057C6.99902 7.23733 6.91862 7.46177 6.77154 7.6407L1.77154 13.6407C1.6018 13.8449 1.35789 13.9733 1.09346 13.9977C0.829033 14.0221 0.565752 13.9404 0.361536 13.7707C0.157319 13.601 0.0288949 13.3571 0.00451517 13.0926C-0.0198646 12.8282 0.0617967 12.5649 0.231535 12.3607L4.70154 7.0007L0.381536 1.6407C0.259253 1.49392 0.181576 1.31518 0.157696 1.12563C0.133817 0.936078 0.164733 0.743653 0.246789 0.571126C0.328846 0.398599 0.458605 0.253187 0.620716 0.152097C0.782826 0.0510063 0.970502 -0.00153065 1.16154 0.000700951Z",fill:"dark"===l?"white":"black"}),(0,n.jsx)("path",{d:"M7.16146 6.86646e-05C7.31088 -0.000439644 7.45852 0.0325289 7.59352 0.0965519C7.72853 0.160574 7.84747 0.254025 7.9416 0.370034L12.7725 6.36947C12.9196 6.54838 13 6.7728 13 7.00441C13 7.23601 12.9196 7.46043 12.7725 7.63935L7.77157 13.6388C7.6018 13.843 7.35785 13.9714 7.09337 13.9958C6.8289 14.0201 6.56557 13.9385 6.36132 13.7688C6.15706 13.599 6.02862 13.3552 6.00423 13.0908C5.97985 12.8264 6.06152 12.5631 6.23129 12.3589L10.7021 6.99941L6.38132 1.63991C6.25902 1.49314 6.18132 1.31442 6.15744 1.12489C6.13356 0.935357 6.16448 0.74295 6.24655 0.570439C6.32862 0.397928 6.4584 0.252531 6.62054 0.15145C6.78268 0.0503702 6.97039 -0.00216293 7.16146 6.86646e-05Z",fill:"dark"===l?"white":"black"})]})}),(0,n.jsx)(u.xv,{ml:"10px",fontSize:"1.25rem",children:"Chat"})]}),(0,n.jsxs)(u.kC,{justifyContent:"space-between",w:"400px",children:[(0,n.jsx)(u.kC,{p:0,h:"100%",alignItems:"center",flexDir:"column",onClick:function(){return r(0)},cursor:"pointer",children:0==t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.xv,{fontSize:"14px",color:"active.primary",children:"Recent"}),(0,n.jsx)(c.JO,{fontSize:8,viewBox:"0 0 200 200",color:"active.primary",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.xv,{fontSize:"14px",children:"Recent"})})}),(0,n.jsx)(u.kC,{p:0,h:"100%",alignItems:"center",flexDir:"column",onClick:function(){return r(1)},cursor:"pointer",children:1==t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.xv,{fontSize:"14px",color:"active.primary",children:"Friend"}),(0,n.jsx)(c.JO,{fontSize:8,viewBox:"0 0 200 200",color:"active.primary",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.xv,{fontSize:"14px",children:"Friend"})})}),(0,n.jsx)(u.kC,{p:0,h:"100%",flexDir:"column",alignItems:"center",onClick:function(){return r(2)},cursor:"pointer",children:2==t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.xv,{fontSize:"14px",color:"active.primary",children:"Group"}),(0,n.jsx)(c.JO,{fontSize:8,viewBox:"0 0 200 200",color:"active.primary",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.xv,{fontSize:"14px",children:"Group"})})})]})]})},_e=r(41664),Be=r(32095),Te=r(11163);function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ne(e,t,r[t])}))}return e}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qe=function(e){var t=e.DrawerToggle,r=e.makeVideoCall,a=e.setRecentUser,l=((0,R.useRecoilValue)(U.Z),(0,R.useRecoilValue)(M.ZP),(0,Te.useRouter)()),c=(0,i.useMutation)(ie.Vw),d=(0,i.useMutation)(ie.ZF),f=Le((0,R.useRecoilState)(te.nB),2),p=f[0],v=f[1],m=Le((0,R.useRecoilState)(A.l),2),g=m[0],x=(m[1],(0,o.useState)(!1)),b=(x[0],x[1]);return(0,n.jsxs)(u.kC,{flex:"0 1 auto",w:"100%",mt:"8px",justifyContent:"space-between",children:[(0,n.jsxs)(u.kC,{alignItems:"center",flexGrow:1,cursor:"pointer",onClick:function(){p&&p.userId&&(t(),l.replace("/profile/".concat((null===p||void 0===p?void 0:p.userId)?null===p||void 0===p?void 0:p.userId:"")))},children:[(0,n.jsx)(u.kC,{position:"relative",mr:"10px",children:(0,n.jsx)(ge.z,{height:"42px",width:"42px",src:null===p||void 0===p?void 0:p.profileUrl,borderWidth:"2px",borderColor:(null===p||void 0===p?void 0:p.isOnline)||(null===p||void 0===p?void 0:p.isBot)?"green":"white",borderStyle:"solid",name:null===p||void 0===p?void 0:p.name,UserRole:(null===p||void 0===p?void 0:p.role)||1})}),(0,n.jsxs)(u.kC,{justifyContent:"flex-start",flexDir:"column",flexGrow:1,children:[(0,n.jsx)(u.xv,{isTruncated:!0,fontSize:"14px",width:"full",fontWeight:"500",children:null===p||void 0===p?void 0:p.name}),(null===p||void 0===p?void 0:p.isTyping)?(0,n.jsx)(u.xv,{color:"active.primary",width:"full",fontSize:"10px",fontWeight:"400",children:"typing..."}):(null===p||void 0===p?void 0:p.isOnline)||(null===p||void 0===p?void 0:p.isBot)?(0,n.jsx)(u.xv,{color:"active.primary",width:"full",fontSize:"10px",fontWeight:"400",children:"Online"}):(0,n.jsx)(n.Fragment,{})]})]}),(0,n.jsx)(u.kC,{children:(null===p||void 0===p?void 0:p.userId)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.hU,{color:"active.primary",colorScheme:"background.paper","aria-label":"audio call icon",borderRadius:"50%",height:"35px",width:"35px",mr:"5px",_hover:{bgColor:"icon.hover"},_active:{bgColor:"brand.600"},_focus:{},onClick:function(e){1===e.detail&&(!(null===p||void 0===p?void 0:p.isBlocked)&&(null===p||void 0===p?void 0:p.userId)&&(null===p||void 0===p?void 0:p.isOnline)||(g.active||g.outgoing||g.incoming))&&r("audio")},disabled:!(!(null===p||void 0===p?void 0:p.isBlocked)&&(null===p||void 0===p?void 0:p.userId)&&(null===p||void 0===p?void 0:p.isOnline))||(g.active||g.incoming||g.outgoing),icon:(0,n.jsx)(ve.qW,{})}),(0,n.jsx)(s.hU,{"aria-label":"video call icon",borderRadius:"50%",height:"35px",width:"35px",mr:"5px",color:"active.primary",colorScheme:"background.paper",_hover:{bgColor:"icon.hover"},_active:{bgColor:"brand.600"},_focus:{},onClick:function(e){1===e.detail&&(!(null===p||void 0===p?void 0:p.isBlocked)&&(null===p||void 0===p?void 0:p.userId)&&(null===p||void 0===p?void 0:p.isOnline)||(g.active||g.outgoing||g.incoming))&&r("video")},disabled:!(!(null===p||void 0===p?void 0:p.isBlocked)&&(null===p||void 0===p?void 0:p.userId)&&(null===p||void 0===p?void 0:p.isOnline))||(g.active||g.outgoing||g.incoming),icon:(0,n.jsx)(h.HwW,{size:22})}),(0,n.jsxs)(Be.J2,{placement:"bottom-start",children:[(0,n.jsx)(Be.xo,{children:(0,n.jsx)(s.hU,{"aria-label":"call icon",borderRadius:"50%",height:"35px",width:"35px",color:"active.primary",colorScheme:"background.paper",_hover:{bgColor:"icon.hover"},_focus:{},icon:(0,n.jsx)(h.K9M,{size:24})})}),(0,n.jsx)(Be.yk,{p:0,width:"118px",outline:"none",border:"2px solid white",borderRadius:"10px",_focus:{},children:(0,n.jsxs)(Be.b,{borderRadius:"10px",p:0,bgColor:"background.paper",_focus:{},children:[(0,n.jsx)(_e.default,{href:"/profile/".concat((null===p||void 0===p?void 0:p.userId)?null===p||void 0===p?void 0:p.userId:""),children:(0,n.jsx)(u.xv,{m:"5px 10px",fontSize:"14px",_hover:{color:"text.buttonNonActive",bgColor:"background.paper"},cursor:"pointer",children:"View profile"})}),p&&p.userId?(0,n.jsx)(u.xv,{m:"5px 10px",cursor:"pointer",fontSize:"14px",_hover:{color:"text.buttonNonActive",bgColor:"background.paper"},onClick:function(){b(!0),p&&p.isBlocked?d.mutate({uuid:(null===p||void 0===p?void 0:p.userId)||""},{onSuccess:function(e){var t=We({},p,{isBlocked:!1,isBlockedByMe:!1});v(t),a((function(e){return{data:e.data.map((function(e){return e.userId==p.userId?We({},e,{isBlocked:!1,isBlockedByMe:!1}):e})),pagination:e.pagination}})),b(!1)},onError:function(e){console.error(e),b(!1)}}):p&&c.mutate({uuid:(null===p||void 0===p?void 0:p.userId)||""},{onSuccess:function(e){var t=We({},p,{isBlocked:!0,isBlockedByMe:!0});v(t),a((function(e){return{data:e.data.map((function(e){return e.userId==(null===p||void 0===p?void 0:p.userId)?We({},e,{isBlocked:!0,isBlockedByMe:!0}):e})),pagination:e.pagination}})),b(!1)},onError:function(e){console.error(e),b(!1)}})},children:p.isBlocked?p.isBlockedByMe?"Unblock":"":"Block"}):(0,n.jsx)(n.Fragment,{})]})})]})]}):(0,n.jsx)(n.Fragment,{})})]})},Ve=(0,o.memo)(qe),Je=r(51854),$e=r(22490),Qe=r(87220),Ke=r(2893),Ge=r(28823),He=r(78093);function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){if(e){if("string"===typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ye(e,t):void 0}}var nt=function(e){e.isFriend,e.isLoading;var t,r,c=e.postUuid,d=e.setPostUuid,f=e.media,p=e.setMedia,v=e.chatUploadFile,m=e.setChatUploadFile,g=e.sendMessage,x=e.disableInput,b=(0,R.useRecoilValue)(te.nB),y=et((0,R.useRecoilState)(te.iP),2),j=y[0],w=y[1],C=(0,R.useRecoilValue)(U.Z),k=((0,R.useRecoilValue)(M.ZP),(0,o.useRef)(null)),S=(0,o.useRef)(null),O=(0,o.useRef)(null),I=(0,o.useRef)(null),A=(0,o.useState)(""),E=A[0],F=A[1],P=(0,J.Z)(),D=(0,o.useState)(!1),z=D[0],_=D[1],B=(0,o.useState)(!0),T=B[0],Z=B[1],N=(0,o.useRef)(!1),W=(0,o.useRef)(),L=((0,o.useRef)(null),(0,o.useState)("")),q=L[0],V=L[1],$=(0,o.useState)({ogTitle:"",ogUrl:"",ogDescription:"",ogImage:""}),Q=$[0],K=$[1],G=(0,i.useMutation)(Ke.ol),H=(0,o.useState)(!1),Y=H[0],X=H[1],ee=(0,o.useState)(!1),re=ee[0],ne=ee[1];(0,a.O3)({ref:k,handler:function(){return ne(!1)}});var oe=function(e){if((!b||!(null===b||void 0===b?void 0:b.isBlocked))&&!e.shiftKey&&"Enter"==e.key&&Y){if(e.preventDefault(),0==e.target.value.trim().length&&f&&0==f.length)return;N.current&&C&&Y&&!N.current&&(null===b||void 0===b?void 0:b.userId)&&(console.log("socket for Stop typing"),console.log("User-Stoped-Typing"),N.current=!1),(null===b||void 0===b?void 0:b.isCourseBot)&&j&&null===(null===j||void 0===j?void 0:j.query)?(console.log({courseDataChatBox:j}),w((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xe(e,t,r[t])}))}return e}({},e,{query:E})}))):g({messageInput:E,ogCardData:Q}),F(""),_(!1),m(!1),V(""),K({ogTitle:"",ogUrl:"",ogDescription:"",ogImage:"",ogVideo:""})}},ie=function(e){e.target.files&&e.target.files[0]&&("application"==e.target.files[0].type.split("/")[0]&&_(!0),p((function(t){return[e.target.files[0]].concat(tt(t))})))},ae=function(){if(b){if(b.userId){if(!1===b.isFriend)return void Z(!1);if(!0===b.isBlocked)return void Z(!1)}Z(!0)}},ue=function(){var e;C&&(F((function(t){return e=t,t})),console.log("socket for Stop typing"),console.log("User-Stoped-Typing",e));N.current=!1};(0,o.useEffect)((function(){W.current=fe()(ue,1e3)}),[]),(0,o.useEffect)((function(){console.log(c),c.length&&(F((function(e){return e+c})),d(""))}),[c]),(0,o.useEffect)((function(){F(""),p([]),ae()}),[null===b||void 0===b?void 0:b.id]),(0,o.useEffect)((function(){ae()}),[null===b||void 0===b?void 0:b.id,null===b||void 0===b?void 0:b.isBlocked,null===b||void 0===b?void 0:b.isFriend]),(0,o.useEffect)((function(){var e=Je.sE(E).filter((function(e){return"url"===e.type}));e.length>0&&e[0].href!=q?e[0].href!=q&&V(e[0].href):0==e.length&&V("")}),[E]),(0,o.useEffect)((function(){q.trim().length>0?G.mutate({url:q},{onSuccess:function(e){console.log({data:e.data}),F((function(t){if(t.includes(e.data.ogUrl)){var r=e.data;r.ogUrl.includes("https://leetcode.com")&&(r.ogImage="https://leetcode.com"+r.ogImage),K(e.data)}return t}))},onError:console.error}):K({ogTitle:"",ogUrl:"",ogDescription:"",ogImage:""})}),[q]);return(0,o.useEffect)((function(){X(!!(P&&P>765))}),[P]),(0,o.useEffect)((function(){console.log(x),Z(x)}),[x]),(0,n.jsxs)(u.kC,{flex:"0 1 40px",w:"100%",flexDir:"column",children:[(0,n.jsx)(u.xu,{height:"0.5px",width:"100%",border:"0.5px solid",borderColor:"text.placeholder",opacity:.2,mt:"5px"}),T?(0,n.jsxs)(l.UO,{in:v,children:[f&&f.length>0?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.kC,{height:"60px",width:"100%",zIndex:"1000000",children:f.map((function(e,t){var r=et(e.type.split("/"),2),o=r[0];r[1];return"image"==o?(0,n.jsxs)(u.kC,{overflow:"auto",width:"70px",height:"60px",pos:"relative",className:"uploadedImage_container",alignItems:"center",justifyContent:"center",children:[(0,n.jsx)("img",{src:URL.createObjectURL(e),style:{height:"60px",objectFit:"contain"}}),(0,n.jsx)(u.kC,{pos:"absolute",top:0,right:0,className:"deleteUploadedImage",bgColor:"background.paper",borderRadius:"50%",onClick:function(){p((function(e){return e.filter((function(e,r){return r!=t}))}))},children:(0,n.jsx)(h.$Rx,{color:"text.primary",size:20})})]},t):"video"==o?(0,n.jsxs)(u.kC,{overflow:"auto",pos:"relative",className:"uploadedImage_container",height:"60px",width:"70px",alignItems:"center",justifyContent:"center",children:[(0,n.jsx)("video",{src:URL.createObjectURL(e),style:{height:"60px",objectFit:"contain"}}),(0,n.jsx)(u.kC,{pos:"absolute",top:0,right:0,className:"deleteUploadedImage",bgColor:"background.paper",borderRadius:"50%",onClick:function(){p((function(e){return e.filter((function(e,r){return r!=t}))}))},children:(0,n.jsx)(h.$Rx,{color:"text.primary",size:20})})]},t):(0,n.jsx)(Qe.s,{fileName:e.name,showCloseButton:!0,idx:t,deleteMedia:function(){p([]),_(!1)}})}))})}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)(u.kC,{bgColor:"brand.600",flexDir:"row",mt:"10px",justifyContent:"space-between",children:[(0,n.jsx)(s.hU,{"aria-label":"Upload Image",height:"40px",flex:.3,bgColor:"background.paper",color:"text.primary",disabled:!!(z||f&&f.length>3),icon:(0,n.jsx)(h.LFN,{color:"text.primary",size:22}),_hover:{bgColor:"brand.300"},onClick:function(){var e;null===(e=S.current)||void 0===e||e.click()}}),(0,n.jsx)("input",{ref:S,onChange:ie,type:"file",id:"img",name:"img",accept:"image/*",style:{display:"none"}}),(0,n.jsx)(s.hU,{"aria-label":"Upload Image",height:"40px",flex:.3,bgColor:"background.paper",color:"text.primary",disabled:!!(z||f&&f.length>3),icon:(0,n.jsx)(h.HwW,{color:"text.primary",size:22}),_hover:{bgColor:"brand.300"},onClick:function(){var e;null===(e=O.current)||void 0===e||e.click()}}),(0,n.jsx)("input",{ref:O,onChange:ie,type:"file",id:"img",name:"img",accept:"video/*",style:{display:"none"}}),(0,n.jsx)(s.hU,{"aria-label":"Upload Image",height:"40px",flex:.3,disabled:!!(z||f&&f.length>0),icon:(0,n.jsx)(h.UH,{color:"text.primary",size:22}),bgColor:"background.paper",color:"text.primary",_hover:{bgColor:"brand.300"},onClick:function(){var e;null===(e=I.current)||void 0===e||e.click()}}),(0,n.jsx)("input",{ref:I,onChange:ie,type:"file",id:"img",name:"img",accept:".pdf",style:{display:"none"}})]})]}):(0,n.jsx)(n.Fragment,{}),Q&&((null===Q||void 0===Q||null===(t=Q.ogDescription)||void 0===t?void 0:t.length)>0||(null===Q||void 0===Q||null===(r=Q.ogTitle)||void 0===r?void 0:r.length)>0)?(0,n.jsx)(Ge.default,{ogCardData:Q,isPreview:!0,handleDeleteOgCard:function(){K({ogTitle:"",ogUrl:"",ogDescription:"",ogImage:"",ogVideo:""}),V("")},isChat:!0}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)(u.kC,{mb:"5px",w:"100%",mt:"10px",pb:"10px",children:[!0===(null===b||void 0===b?void 0:b.isBot)?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(u.kC,{cursor:T?"pointer":"not-allowed",mr:"5px",height:"35px",align:"center",children:v?(0,n.jsx)(h.$Rx,{color:"text.primary",size:26,onClick:function(){T&&m((function(e){return!e}))}}):(0,n.jsx)(h.OvN,{color:"text.primary",size:26,onClick:function(){T&&(m((function(e){return!e})),console.log(T))}})}),(0,n.jsxs)(pe.BZ,{width:"calc(100% - 34px)",children:[(0,n.jsx)(He.Z,{className:"mentionChatInput",isChat:!0,isInputEnabled:T,style:{cursor:T?"text":"not-allowed",disabled:!T},a11ySuggestionsListLabel:"Type anything, use the @ symbol to tag other users.",value:E,setValue:function(e){!function(e){(null===b||void 0===b?void 0:b.userId)&&(N.current||"Enter"===e.key||(C&&(C.emit("typing",{conversationId:null===b||void 0===b?void 0:b.id,userId:null===b||void 0===b?void 0:b.userId,isTyping:!0}),console.log("socket for Start typing"),N.current=!0),console.log("typing")),W.current&&W.current())}(e),function(e){b&&(null===b||void 0===b?void 0:b.isBlocked)||F(e.target.value)}(e)},autoFocus:!0,singleLine:!1,placeholder:"Type a message ..",disabled:!T,onPaste:function(e){var t=function(e){var t=r[e];if("file"===t.kind){var n=t.getAsFile();n&&f.length<4&&(p((function(e){return tt(e).concat([n])})),m(!0))}};console.log("paste chla",e);var r=(e.clipboardData||e.originalEvent.clipboardData).items;for(var n in console.log("Start"),console.log(JSON.stringify(r)),console.log("End"),r)t(n)},onKeyPress:function(e){oe(e)},children:(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)(pe.xH,{display:"flex",height:"32px",children:(0,n.jsx)(n.Fragment,{children:Y?(0,n.jsxs)(u.kC,{ref:k,pos:"relative",height:"100%",width:"26px",alignItems:"end",pb:"2px",borderRadius:"50%",cursor:T?"pointer":"not-allowed",children:[(0,n.jsx)($e.Z,{showEmoji:re,addEmoji:function(e){var t=e.native;F(E+t)},style:{position:"absolute",bottom:"28px",right:"0"}}),(0,n.jsx)(h.jMy,{color:"text.primary",size:24,onClick:function(){T&&ne(!re)}})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.LbG,{onClick:function(){(null===b||void 0===b?void 0:b.isBlocked)||0==E.trim().length&&f&&0==f.length||(g({messageInput:E,ogCardData:Q}),F(""),m(!1),V(""),K({ogTitle:"",ogUrl:"",ogDescription:"",ogImage:"",ogVideo:""}))},cursor:"pointer",fontSize:"1.2rem"})})})})]})]})]})},ot=(0,o.memo)(nt),it=r(11604),at=r(46337),ut=r(25934),lt=r(98708),ct=r(43057),st=r(4905);function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){dt(e,t,r[t])}))}return e}var pt=function(){var e=(0,R.useRecoilValue)(te.Sx),t=(0,o.useState)(!1),r=t[0],i=t[1],a=(0,R.useSetRecoilState)(te.kE),l=function(t){i(!0),t?a((function(e){return ft({},e,{newEntry:!0})})):1===(null===e||void 0===e?void 0:e.status)?a((function(e){return ft({},e,{newEntry:!1})})):0!==(null===e||void 0===e?void 0:e.status)&&2!==(null===e||void 0===e?void 0:e.status)||a((function(e){return ft({},e,{newEntry:!0})}))};return(0,n.jsxs)(u.kC,{children:[(0,n.jsx)(st.Z,{mr:"0.5rem",maxW:"16.875rem",fontSize:"0.875rem",height:"2.5rem",mt:"1rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",color:"text.primary",backgroundColor:"brand.100",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},disabled:r,onClick:function(){l(!1)},children:"Continue"}),1===(null===e||void 0===e?void 0:e.status)?(0,n.jsx)(st.Z,{mr:"0.5rem",maxW:"16.875rem",fontSize:"0.875rem",height:"2.5rem",mt:"1rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",color:"text.primary",backgroundColor:"brand.100",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){l(!0)},disabled:r,children:"Start New"}):(0,n.jsx)(n.Fragment,{})]})};function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mt=function(){var e=(0,o.useState)(!1),t=e[0],r=e[1],i=(0,R.useSetRecoilState)(te.kE),a=function(e){r(!0),i((function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){vt(e,t,r[t])}))}return e}({},t,{questionResp:e})}))};return(0,n.jsxs)(u.kC,{children:[(0,n.jsx)(st.Z,{mr:"0.5rem",color:"text.primary",maxW:"16.875rem",fontSize:"0.875rem",height:"2.5rem",mt:"1rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",backgroundColor:"brand.600",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(e){a(1)},disabled:t,children:"Yes"}),(0,n.jsx)(st.Z,{color:"text.primary",maxW:"16.875rem",fontSize:"0.875rem",height:"2.5rem",mt:"1rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",backgroundColor:"brand.600",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){a(0)},disabled:t,children:"No"})]})},ht=function(e){var t=e.data,r=(0,o.useState)(!1),i=r[0],a=r[1],l=(0,R.useSetRecoilState)(te.CO);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.kC,{flexDir:"row",flexWrap:"wrap",children:t&&t.map((function(e,t){return(0,n.jsx)(s.zx,{color:"text.primary",maxW:"16.875rem",fontSize:"0.875rem",height:"2.5rem",m:"0.1rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",backgroundColor:"brand.600",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){var t;t=e,console.log({doubtData:t}),l(t),a(!0)},disabled:i,children:e.name},t)}))})})},gt=r(58163);function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bt(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yt=function(e){var t=e.data,r=(0,R.useSetRecoilState)(te.iP),i=(0,o.useState)(!1),a=i[0],l=i[1],c=(0,o.useState)(0),d=c[0],f=c[1],p=function(e){console.log({course:e}),r(e),l(!0)};return(0,o.useEffect)((function(){console.log({courses:t})}),[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.kC,{mt:"10px",children:(0,n.jsxs)(u.kC,{border:"1px solid lightgrey",borderRadius:"6px",children:[(0,n.jsx)(s.zx,{fontSize:"0.875rem",height:"2.5rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",color:"text.primary",backgroundColor:0!==d?"button.nonActive":"brand.600",mr:"0.2rem",borderWidth:"1px",borderColor:0!==d?"button.nonActive":"active.primary",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){return f(0)},disabled:a,children:"Courses"}),(0,n.jsx)(s.zx,{disabled:a,fontSize:"0.875rem",height:"2.5rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",color:"text.primary",backgroundColor:0!==d?"button.nonActive":"brand.600",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){return f(1)},children:"Programs"})]})}),(0,n.jsx)(u.kC,{flexDir:"row",flexWrap:"wrap",mt:"1rem",children:t&&t.courses&&t.programs?0===d?(0,n.jsx)(n.Fragment,{children:t.courses.map((function(e,t){return(0,n.jsx)(jt,{name:e.title,disable:a,handleClick:function(){return p(e)}},e.id)}))}):(0,n.jsx)(n.Fragment,{children:t.programs.map((function(e,t){return(0,n.jsx)(jt,{name:e.title,disable:a,handleClick:function(){return p(e)}},e.id)}))}):(0,n.jsx)(n.Fragment,{})})]})},jt=function(e){var t=e.name,r=e.disable,o=e.handleClick;return(0,n.jsx)(s.zx,{color:"text.primary",maxW:"16.875rem",fontSize:"0.875rem",height:"2.5rem",m:"0.1rem",pl:"1.5rem",pr:"1.5rem",borderRadius:"0.375rem",backgroundColor:"brand.100",borderWidth:"1px",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){o()},disabled:r,children:t})},wt=function(e){var t=e.data,r=(0,R.useSetRecoilState)(te.iP);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.kC,{borderRadius:"0.625rem",flexGrow:1,width:"full",my:"0.625rem",children:(0,n.jsxs)(u.kC,{flexDir:"column",align:"center",justify:"center",w:"full",children:[(0,n.jsxs)(u.kC,{width:"full",align:"center",justify:"center",bgColor:"active.primary",borderTopRadius:"6px",padding:"0.5rem 0",children:[(0,n.jsx)(gt.RY,{width:14,height:14}),(0,n.jsx)(u.xv,{textTransform:"capitalize",ml:["1rem","0.625rem","0.625rem","1rem"],fontSize:["0.6rem","0.8rem","0.8rem","0.8rem","0.8rem","1rem"],fontWeight:600,color:"brand.600",children:null===t||void 0===t?void 0:t.title})]}),(0,n.jsxs)(u.kC,{width:"full",bgColor:"background.paper",borderBottomRadius:"10px",flexDir:"column",py:"0.7rem",children:[[null===t||void 0===t?void 0:t.duration].concat(bt((null===t||void 0===t?void 0:t.features)||[])).map((function(e,t){return(0,n.jsxs)(u.kC,{p:"0.4rem 2rem",color:"text.primary",children:[0===t?(0,n.jsx)(gt.xy,{size:4}):(0,n.jsx)(gt.P$,{size:4}),(0,n.jsx)(u.xv,{ml:"0.625rem",fontWeight:500,fontSize:["0.75rem","0.875rem"],children:e})]})})),(0,n.jsxs)(u.kC,{justify:"flex-end",mt:"0.2rem",children:[(0,n.jsx)(s.zx,{bgColor:"button.nonActive",borderWidth:"0.0625rem",borderColor:"transparent",height:"2rem",fontSize:"0.75rem",_hover:{borderColor:"active.primary",borderWidth:"0.0625rem"},_active:{borderColor:"active.primary",borderWidth:"0.0625rem"},_focus:{borderColor:"active.primary",borderWidth:"0.0625rem"},onClick:function(){r({id:t.id,title:t.title,query:null})},children:"Query"}),(0,n.jsx)(s.zx,{mx:"0.5rem",bgColor:"brand.600",borderWidth:"0.0625rem",borderColor:"active.primary",height:"2rem",fontSize:"0.75rem",_hover:{borderColor:"active.primary",borderWidth:"0.0625rem"},_active:{borderColor:"active.primary",borderWidth:"0.0625rem"},_focus:{borderColor:"active.primary",borderWidth:"0.0625rem"},onClick:function(){window.open(t.link)},children:"Explore"})]})]})]})})})},Ct=function(e){var t,r,o,i,a,l,s,d,f,p,v=e.Message,m=(0,R.useRecoilValue)(M.ZP),h=(0,R.useRecoilValue)(te.nB),g=(null===v||void 0===v||null===(t=v.from)||void 0===t?void 0:t.id)==(null===m||void 0===m?void 0:m.uuid),x=(0,R.useRecoilValue)(Me.Oj);return(0,n.jsxs)(u.kC,{width:"100%",m:"10px 0",flexDir:g?"row-reverse":"row",children:[(0,n.jsx)(u.kC,{mr:g?"":"10px",ml:g?"10px":"",children:(0,n.jsx)(_e.default,{href:"/profile/".concat((null===v||void 0===v||null===(r=v.from)||void 0===r?void 0:r.id)?null===v||void 0===v||null===(o=v.from)||void 0===o?void 0:o.id:""),children:(0,n.jsx)(ge.z,{height:"35px",width:"35px",cursor:"pointer",src:g?null===m||void 0===m?void 0:m.profileUrl:null===v||void 0===v||null===(i=v.from)||void 0===i?void 0:i.profileUrl,name:null===(a=v.from)||void 0===a?void 0:a.fullName,UserRole:g?1:(null===v||void 0===v||null===(l=v.from)||void 0===l?void 0:l.role)||1})})}),(0,n.jsxs)(u.kC,{w:"calc(100% - 44px)",bgColor:g?"button.nonActive":"brand.600",borderRadius:"10px",p:"10px",flexDir:"column",pos:"relative",children:[(0,n.jsxs)(u.kC,{justifyContent:"space-between",mb:2,w:"100%",children:[(0,n.jsx)(u.xv,{fontSize:"12px",fontWeight:"500",color:"active.primary",children:g?null===v||void 0===v||null===(s=v.from)||void 0===s?void 0:s.fullName:null===v||void 0===v||null===(d=v.from)||void 0===d?void 0:d.fullName}),(0,n.jsx)(u.xv,{fontSize:"12px",fontWeight:"500",children:B()(null===v||void 0===v?void 0:v.createdAt).format("h:mm a")})]}),(0,n.jsx)(u.kC,{w:"full",overflow:"hidden",children:(null===v||void 0===v?void 0:v.meta)?(0,n.jsx)(Ge.default,{ogCardData:null===v||void 0===v?void 0:v.meta,isPreview:!1,isChat:!0}):(0,n.jsx)(n.Fragment,{})}),(null===v||void 0===v?void 0:v.media)&&(null===v||void 0===v?void 0:v.media.length)>0?(0,n.jsx)(lt.Z,{isFeed:!0,media:null===v||void 0===v?void 0:v.media,isChat:!0}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(ct.default,{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"12px",mt:(null===v||void 0===v?void 0:v.media)&&(null===v||void 0===v?void 0:v.media.length)?"10px":"",text:(null===v||void 0===v?void 0:v.text)||"",isChat:!0}),1==(null===v||void 0===v?void 0:v.isFirst)?(null===v||void 0===v?void 0:v.isDoubtSupport)?(0,n.jsx)(ht,{data:(null===v||void 0===v?void 0:v.info)||null}):(null===v||void 0===v?void 0:v.isCourseBot)?(0,n.jsx)(yt,{data:(null===v||void 0===v?void 0:v.info)||null}):(0,n.jsx)(pt,{}):(0,n.jsx)(n.Fragment,{}),(null===v||void 0===v?void 0:v.info)&&(null===v||void 0===v||null===(f=v.info)||void 0===f?void 0:f.isCourseProgram)?(0,n.jsx)(wt,{data:null===v||void 0===v?void 0:v.info}):(0,n.jsx)(n.Fragment,{}),"boolean"===(null===v||void 0===v?void 0:v.resType)?(0,n.jsx)(mt,{}):(0,n.jsx)(n.Fragment,{}),(null===v||void 0===v||null===(p=v.from)||void 0===p?void 0:p.id)===(null===m||void 0===m?void 0:m.uuid)?(null===v||void 0===v?void 0:v.isRead)&&(null===h||void 0===h?void 0:h.userId)?(0,n.jsx)(u.kC,{justifyContent:"flex-end",w:"100%",children:(0,n.jsxs)(c.JO,{width:"14px",height:"14px",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M15 4.94141L5.375 14.0002L1 9.88258",stroke:"dark"===x?"#985EFF":"#ff8971",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15 1L5.375 10.0588L1 5.94118",stroke:"dark"===x?"#985EFF":"#ff8971",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}):v.isSent?(0,n.jsx)(u.kC,{justifyContent:"flex-end",w:"100%",children:(0,n.jsxs)(c.JO,{width:"14px",height:"14px",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M15 4.94141L5.375 14.0002L1 9.88258",stroke:"gray",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15 1L5.375 10.0588L1 5.94118",stroke:"gray",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}):(0,n.jsx)(u.kC,{justifyContent:"flex-end",w:"100%",children:(0,n.jsxs)(c.JO,{width:"14px",height:"14px",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M6.5 12C9.53757 12 12 9.53757 12 6.5C12 3.46243 9.53757 1 6.5 1C3.46243 1 1 3.46243 1 6.5C1 9.53757 3.46243 12 6.5 12Z",stroke:"dark"===x?"#985EFF":"#ff8971",strokeWidth:"0.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M6.5 3.35645V6.4993L8.07143 8.07073",stroke:"dark"===x?"#985EFF":"#ff8971",strokeWidth:"0.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}):(0,n.jsx)(n.Fragment,{})]})]})},kt=(0,o.memo)(Ct);function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return St(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var It=function(e){var t=e.sendMessage,r=e.setDisableInput,a=Ot((0,R.useRecoilState)(te.CO),2),l=a[0],c=(a[1],(0,o.useState)(0)),s=c[0],d=c[1],f=(0,R.useRecoilValue)(te.nB),p=(0,o.useState)(),v=p[0],m=p[1],h=(0,i.useQuery)(["GetDoubtSupport"],ie.E5,{enabled:!1,onSuccess:function(e){console.log({ds:e}),m(e)},onError:function(e){console.error(e)}}),g=function(e){switch(s){case 0:e&&t({messageInput:"Your doubt belongs to which of the following categories?",isBot:!1,isFirst:!0,doubtSupport:!0,info:e}),d((function(e){return e+1}));break;case 1:t({messageInput:"Please join the meeting to get your doubts resolved: ".concat(null===l||void 0===l?void 0:l.link),doubtSupport:!0}),d((function(e){return e+1}));break;case 2:(null===l||void 0===l?void 0:l.feedbackLink)&&(t({messageInput:"Please give your feedback: ".concat(null===l||void 0===l?void 0:l.feedbackLink),doubtSupport:!0}),d((function(e){return e+1})))}};return(0,o.useEffect)((function(){0===s&&v&&v.length>0&&g(v)}),[v,s,null===f||void 0===f?void 0:f.id]),(0,o.useEffect)((function(){1===s&&l&&(null===l||void 0===l?void 0:l.id)&&g(l)}),[l]),(0,o.useEffect)((function(){0===s?(h.refetch(),r(!1)):2===s&&(g(l),r(!1))}),[s]),(0,n.jsx)(n.Fragment,{children:h.isLoading?(0,n.jsxs)(u.kC,{flexDir:"column",width:"full",alignSelf:"end",justifySelf:"end",children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!0})]}):(0,n.jsx)(n.Fragment,{})})};function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){At(e,t,r[t])}))}return e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||Pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){if(e){if("string"===typeof e)return Rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}var Dt=function(e){var t=e.sendMessage,r=e.setDisableInput,a=Ft((0,R.useRecoilState)(te.iP),2),l=a[0],c=a[1],s=(0,o.useState)(0),d=s[0],f=s[1],p=(0,R.useRecoilValue)(U.Z),v=(0,R.useRecoilValue)(M.ZP),m=(0,o.useState)(),h=m[0],g=m[1],x=(0,o.useState)(""),b=x[0],y=x[1],j=(0,o.useState)(),w=(j[0],j[1],(0,i.useQuery)(["GetCourseQuery"],ie.QV,{enabled:!1,onSuccess:function(e){console.log({ds:e}),g(e)},onError:function(e){console.error(e)}})),C=(0,i.useQuery)(["GetSalesUser"],ie.k6,{enabled:!1,onSuccess:function(e){console.log({sales:e}),y(e)},onError:function(e){console.error(e)}}),k=(0,i.useMutation)(ie.bG),S=Ft((0,R.useRecoilState)(te.jA),2),O=S[0],I=S[1],A=(0,R.useSetRecoilState)(te.nB),E=function(e){switch(d){case 0:e&&(t({messageInput:"Hey, we provide top rated industry course. Below we provide a variety of courses. Please select one to move further",isBot:!1,isFirst:!0,isCourseBot:!0,info:e}),f((function(e){return e+1})));break;case 1:e&&(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e?void 0:e.description)?(t({messageInput:(null===e||void 0===e?void 0:e.description)||"Description",isCourseBot:!0,info:Et({},e,{isCourseProgram:!0})}),f((function(e){return e+1})),c(null)):t({messageInput:"Something went wrong!!!",isCourseBot:!0});break;case 2:e&&(null===e||void 0===e?void 0:e.id)?(t({messageInput:"Please send us your query relate to ".concat(null===e||void 0===e?void 0:e.title,"...!"),isCourseBot:!0}),f((function(e){return e+1}))):t({messageInput:"Something went wrong!!!",isCourseBot:!0});break;case 3:e&&(null===e||void 0===e?void 0:e.id)&&e.query?(k.mutate({uuid:b},{onSuccess:function(e){console.log({createRoom:e,salesUser:b});var t={id:e.id,name:(null===e||void 0===e?void 0:e.fullName)||"Sales Assistance",profileUrl:(null===e||void 0===e?void 0:e.profileUrl)||"https://www.shareicon.net/data/2015/09/24/106427_man_512x512.png",isRead:1,userId:b,isBlocked:e.isBlocked,isBlockedByMe:e.isBlockedByMe,isFriend:!0};if(p){var r,n;console.log("Join ROOM"),p.emit("join-chat-room",{userId:null===v||void 0===v?void 0:v.uuid,conversationId:null===e||void 0===e?void 0:e.id});var o=(0,ut.Z)(),i={text:(null===(r=l)||void 0===r?void 0:r.query)||"",media:[],createdAt:B()().toString(),id:o,meta:{ogTitle:"",ogUrl:"",ogDescription:"",ogImage:""},from:{id:(null===v||void 0===v?void 0:v.uuid)||"",fullName:(null===v||void 0===v?void 0:v.fullName)||"",profileUrl:(null===v||void 0===v?void 0:v.profileUrl)||""},isSent:!0,isRead:!1};try{if(console.log(O,O["".concat(e.id)]),O["".concat(null===e||void 0===e?void 0:e.id)]){var a=JSON.parse(JSON.stringify(O));a["".concat(null===e||void 0===e?void 0:e.id)]={data:Ut(a["".concat(null===e||void 0===e?void 0:e.id)].data).concat([i]),pagination:a["".concat(null===e||void 0===e?void 0:e.id)].pagination},console.log(a),I(a)}}catch(u){console.error(u)}p.emit("send-message",{creator:null===v||void 0===v?void 0:v.uuid,recipient:null===e||void 0===e?void 0:e.id,text:(null===(n=l)||void 0===n?void 0:n.query)||"",media:[],uuid:o,meta:{ogTitle:"",ogUrl:"",ogDescription:"",ogImage:""}}),p.on("new-message",(function(e){p.emit("leave-chat-room",{userId:null===v||void 0===v?void 0:v.uuid,conversationId:null===e||void 0===e?void 0:e.id}),p.removeListener("new-message"),A(t)}))}},onError:function(e){console.error(e),t({messageInput:"Something went wrong!!!",isCourseBot:!0})}}),c(null)):t({messageInput:"Something went wrong!!!",isCourseBot:!0})}};return(0,o.useEffect)((function(){0===d&&E(h)}),[h,d]),(0,o.useEffect)((function(){1===d&&l?E(l):2===d&&l?(E(l),r(!0)):3===d&&l&&(console.log({finalMessage:l}),E(l))}),[l]),(0,o.useEffect)((function(){0===d&&(w.refetch(),C.refetch(),r(!1))}),[d]),(0,n.jsx)(n.Fragment,{children:w.isLoading?(0,n.jsxs)(u.kC,{flexDir:"column",width:"full",alignSelf:"end",justifySelf:"end",children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!0})]}):(0,n.jsx)(n.Fragment,{})})};function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){zt(e,t,r[t])}))}return e}function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||Zt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e){return function(e){if(Array.isArray(e))return Mt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){if(e){if("string"===typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mt(e,t):void 0}}var Nt=function(e){var t=e.setDisableInput,r=e.sendMessage,a=Bt((0,R.useRecoilState)(te.Sx),2),l=a[0],c=a[1],s=(0,o.useState)(),d=s[0],f=s[1],p=(0,o.useState)(),v=p[0],m=p[1],h=(0,o.useState)(!1),g=h[0],x=h[1],b=Bt((0,R.useRecoilState)(te.nB),2),y=b[0],j=b[1],w=(0,R.useRecoilValue)(M.ZP),C=(0,o.useState)(),k=C[0],S=C[1],O=(0,R.useRecoilValue)(U.Z),I=(0,o.useState)(!1),A=I[0],E=I[1],F=(0,o.useState)(!1),P=F[0],D=F[1],z=(0,R.useRecoilValue)(te.Or),_=Bt((0,R.useRecoilState)(te.jA),2),T=_[0],Z=_[1],N=Bt((0,R.useRecoilState)(te.kE),2),W=N[0],L=N[1],q=(0,i.useMutation)(ie.qs),V=(0,i.useMutation)(ie.bG),J=(0,i.useQuery)(["getapplicantStatus"],ie.Mn,{enabled:!1,onSuccess:function(e){console.log(e),c((function(){return{questionId:null===e||void 0===e?void 0:e.questionId,status:null===e||void 0===e?void 0:e.status}}))}}),$=(0,i.useQuery)(["getQuestion",{questionNo:k,newEntry:P}],ie.a5,{enabled:!1,onSuccess:function(e){Q(e)}}),Q=function(e){m({description:null===e||void 0===e?void 0:e.description,responseType:null===e||void 0===e?void 0:e.responseType,skipCount:null===e||void 0===e?void 0:e.skipCount}),r({messageInput:null===e||void 0===e?void 0:e.description,isBot:!0,isFirst:!1,resType:e.responseType}),D(!1),"boolean"!==e.responseType&&t(!0)},K=function(e){q.mutate(e,{onSuccess:function(e){var t,r;console.log(e),null===(null===e||void 0===e?void 0:e.nextQuestion)&&f({user:null===(t=e.data)||void 0===t?void 0:t.user,responses:null===(r=e.data)||void 0===r?void 0:r.responses}),S(null===e||void 0===e?void 0:e.nextQuestion)}})},G=function(){if(console.log(k),null!==k)$.refetch();else if(null===k){console.log(d);var e={uuid:d.user.id};V.mutate(e,{onSuccess:function(e){var t;console.log(e);for(var r={id:null===e||void 0===e?void 0:e.id,name:null===d||void 0===d?void 0:d.user.fullName,profileUrl:null===d||void 0===d?void 0:d.user.profileUrl,isRead:1,userId:d.user.id,isBlocked:e.isBlocked,isBlockedByMe:e.isBlockedByMe,isFriend:!0,isOnline:z.includes(d.user.id),role:null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.role},n=[],o=d.responses,i=0;i<o.length;i++){var a="Question ".concat(i+1,"\n            ").concat(o[i].description,"\n            ").concat("boolean"===o[i].responseType?1===Number(o[i].response)?"Yes":"No":o[i].response,"\n            ");n.push(a)}var u=n.join("\n");if(O){console.log("Join ROOM"),O.emit("join-chat-room",{userId:null===w||void 0===w?void 0:w.uuid,conversationId:null===e||void 0===e?void 0:e.id});var l=(0,ut.Z)(),c={text:u||"",media:[],createdAt:B()().toString(),id:l,meta:{ogTitle:"",ogUrl:"",ogDescription:"",ogImage:""},from:{id:(null===w||void 0===w?void 0:w.uuid)||"",fullName:(null===w||void 0===w?void 0:w.fullName)||"",profileUrl:(null===w||void 0===w?void 0:w.profileUrl)||""},isSent:!0,isRead:!1};try{if(console.log(T,T["".concat(e.id)]),T["".concat(null===e||void 0===e?void 0:e.id)]){var s=JSON.parse(JSON.stringify(T));s["".concat(null===e||void 0===e?void 0:e.id)]={data:Tt(s["".concat(null===e||void 0===e?void 0:e.id)].data).concat([c]),pagination:s["".concat(null===e||void 0===e?void 0:e.id)].pagination},console.log(s),Z(s)}}catch(f){console.error(f)}O.emit("send-message",{creator:null===w||void 0===w?void 0:w.uuid,recipient:null===e||void 0===e?void 0:e.id,text:u||"",media:[],uuid:l,meta:{ogTitle:"",ogUrl:"",ogDescription:"",ogImage:""}}),O.on("new-message",(function(e){O.emit("leave-chat-room",{userId:null===w||void 0===w?void 0:w.uuid,conversationId:null===e||void 0===e?void 0:e.id}),O.removeListener("new-message"),j(r)}))}}})}},H=function(e){switch(console.log(e),null===v||void 0===v?void 0:v.responseType){case"string":if(isNaN(e))t(!1),K({response:e,questionNo:k,skip:!1}),L((function(e){return _t({},e,{messageInput:null})}));else console.log({string:"Me chla "}),E(!0);break;case"number":if(isNaN(e))console.log({Number:"Me chla "}),E(!0);else t(!1),K({response:e,questionNo:k,skip:!1});break;case"boolean":if(0===Number(e)||1===Number(e)){var n={response:Number(e),questionNo:k,skip:!1};K(n),r({messageInput:0===Number(e)?"No":"Yes",setResp:!1}),L((function(e){return _t({},e,{questionResp:null})}))}else console.log({boolean:"Me chla "}),E(!0)}};return(0,o.useEffect)((function(){A&&(r({messageInput:"Enter Valid Answer",isBot:!0}),E(!1))}),[A]),(0,o.useEffect)((function(){P&&G()}),[P]),(0,o.useEffect)((function(){g?(x(!1),0===(null===l||void 0===l?void 0:l.status)?(r({messageInput:"Welcome to Pepcoding's placement Assistance. Hi, I am pep Bot. I will help you in getting placed. To proceed further I need to ask few questions . To answer them press continue",isBot:!0,isFirst:!0}),t(!1)):1===(null===l||void 0===l?void 0:l.status)?(t(!1),r({messageInput:"Hey , you have a pending application. Do you want to proceed with that one ?",isBot:!0,isFirst:!0})):2===(null===l||void 0===l?void 0:l.status)&&(r({messageInput:"Hey , you have already submitted an application for placement assistance. Do you want to submit another one",isBot:!0,isFirst:!0}),t(!1))):G()}),[k]),(0,o.useEffect)((function(){var e;console.log(W),null!==W.newEntry&&(e=W.newEntry,console.log(e),e?(D(!0),S(1)):G(),L((function(e){return _t({},e,{newEntry:null})}))),null!==W.questionResp?H(W.questionResp):null!==W.messageInput&&H(W.messageInput)}),[W]),(0,o.useEffect)((function(){(null===y||void 0===y?void 0:y.isBot)&&(x(!0),S(null===l||void 0===l?void 0:l.questionId))}),[l]),(0,o.useEffect)((function(){return J.refetch(),function(){c(null),L({newEntry:null,questionResp:null,messageInput:null})}}),[]),(0,n.jsx)(n.Fragment,{children:J.isLoading?(0,n.jsxs)(u.kC,{flexDir:"column",width:"full",alignSelf:"end",justifySelf:"end",children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!0})]}):(0,n.jsx)(n.Fragment,{})})};function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Lt(e,t,r[t])}))}return e}function Vt(e){return function(e){if(Array.isArray(e))return Wt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jt=function(e){var t=e.setChat,r=e.setChatOffset,i=e.setLoading,a=e.updateRecentUser,u=e.chatMessageRef,l=(0,R.useSetRecoilState)(te.jA),c=(0,R.useRecoilValue)(U.Z),s=(0,R.useRecoilValue)(te.nB),d=(0,R.useRecoilValue)(M.ZP);return(0,o.useEffect)((function(){c&&c.on("connect",(function(){console.log("reconnected"),l({}),t({data:[],pagination:{limit:0,total:0,offset:0}}),r(0),(null===s||void 0===s?void 0:s.id)&&(void 0===s.userId||s.isFriend&&!s.isBlocked)&&(c.emit("join-chat-room",{userId:null===d||void 0===d?void 0:d.uuid,conversationId:null===s||void 0===s?void 0:s.id}),c.on("room-joined",(function(e){i(!1)})))}))}),[c]),(0,o.useEffect)((function(){return c&&(null===s||void 0===s?void 0:s.id)&&(void 0===s.userId||s.isFriend&&!s.isBlocked)?(c.emit("join-chat-room",{userId:null===d||void 0===d?void 0:d.uuid,conversationId:null===s||void 0===s?void 0:s.id}),c.on("room-joined",(function(e){i(!1)})),c.on("new-message",(function(e){var n;console.log(e),(null===e||void 0===e||null===(n=e.from)||void 0===n?void 0:n.id)!==(null===d||void 0===d?void 0:d.uuid)?(t((function(t){return{pagination:t.pagination,data:Vt(t.data).concat([e])}})),c.emit("read-message",{userId:null===d||void 0===d?void 0:d.uuid,messageId:e.id,conversationId:null===s||void 0===s?void 0:s.id})):t((function(t){return{data:t.data.map((function(t){return t.id==e.id?qt({},t,{isSent:!0}):t})),pagination:t.pagination}})),r((function(e){return e+1})),setTimeout((function(){var e;null===u||void 0===u||null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})),l((function(t){var r=JSON.parse(JSON.stringify(t));return e.conversationId in r&&r["".concat(e.conversationId)].data.push(qt({},e,{isSent:!0})),r})),a()})),c.on("read-message",(function(e){console.log({payload:e}),e.userId!==(null===d||void 0===d?void 0:d.uuid)&&(t((function(t){return{data:t.data.map((function(t){return e.messageIds.includes(t.id)?qt({},t,{isRead:!0}):t})),pagination:t.pagination}})),l((function(t){var r=JSON.parse(JSON.stringify(t));return e.conversationId in r&&(r["".concat(e.conversationId)].data=r["".concat(e.conversationId)].data.map((function(t){return e.messageIds.includes(t.id)?qt({},t,{isRead:!0}):t}))),r})))}))):i(!1),function(){c&&(null===s||void 0===s?void 0:s.id)&&s.isFriend&&(c.off("new-message"),c.emit("leave-chat-room",{userId:null===d||void 0===d?void 0:d.uuid,conversationId:null===s||void 0===s?void 0:s.id}))}}),[null===s||void 0===s?void 0:s.id,null===s||void 0===s?void 0:s.isFriend,c]),(0,n.jsx)(n.Fragment,{})};function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qt(e,t,r[t])}))}return e}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||Yt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e){return function(e){if(Array.isArray(e))return $t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Yt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){if(e){if("string"===typeof e)return $t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(e,t):void 0}}var Xt=function(e){var t=e.DrawerToggle,r=e.recentUsers,a=e.makeVideoCall,l=e.setRecentUserList,c=(0,R.useRecoilValue)(M.ZP),s=(0,R.useRecoilValue)(U.Z),d=Gt((0,R.useRecoilState)(te.nB),2),f=d[0],p=(d[1],(0,o.useRef)(null)),v=(0,o.useRef)(null),m=(0,o.useState)(!1),h=m[0],g=m[1],x=(0,i.useMutation)(at.eu),b=(0,i.useMutation)(at.xF),y=(0,o.useRef)(null),j=(0,o.useState)(!1),w=j[0],C=j[1],k=Gt((0,R.useRecoilState)(te.jA),2),S=k[0],O=k[1],I=(0,R.useSetRecoilState)(te.Sd),A=(0,o.useState)(""),E=A[0],F=A[1],P=(0,o.useState)([]),D=P[0],_=P[1],T=(0,o.useState)({data:[],pagination:{limit:0,total:0,offset:0}}),Z=T[0],N=T[1],W=(0,o.useState)(0),L=W[0],q=W[1],V=(0,o.useState)(!0),J=V[0],$=V[1],Q=(0,R.useSetRecoilState)(te.kE),K=(0,i.useQuery)(["getUserConversation",{uuid:(null===f||void 0===f?void 0:f.id)?null===f||void 0===f?void 0:f.id:"",offset:L}],ie.$I,{enabled:!1,onSuccess:function(e){console.log({data:e}),N((function(t){if(f){var r=JSON.parse(JSON.stringify(S));r["".concat(null===e||void 0===e?void 0:e.conversationId)]={data:Ht(e.data).concat(Ht(t.data)),pagination:e.pagination},O(r)}return f&&f.id===e.conversationId?{data:Ht(e.data).concat(Ht(t.data)),pagination:e.pagination}:t})),q(e.pagination.offset+e.pagination.limit)}}),G=function(e){var t,r,n,o;console.log(e);var i=(0,ut.Z)(),a={id:i,media:D.map((function(e){return{url:URL.createObjectURL(e),type:e.type.split("/")[0],filename:null===e||void 0===e?void 0:e.name}})),text:null===e||void 0===e?void 0:e.messageInput,from:{id:(null===e||void 0===e?void 0:e.isBot)||(null===e||void 0===e?void 0:e.doubtSupport)||(null===e||void 0===e?void 0:e.isCourseBot)?(0,ut.Z)():null===c||void 0===c?void 0:c.uuid,fullName:(null===e||void 0===e?void 0:e.isBot)?"Placement assistance":(null===e||void 0===e?void 0:e.doubtSupport)?"Doubt Support":(null===e||void 0===e?void 0:e.isCourseBot)?"Course assistance":null===c||void 0===c?void 0:c.fullName,profileUrl:(null===e||void 0===e?void 0:e.isBot)||(null===e||void 0===e?void 0:e.doubtSupport)||(null===e||void 0===e?void 0:e.isCourseBot)?"https://www.shareicon.net/data/2015/09/24/106427_man_512x512.png":null===c||void 0===c?void 0:c.profileUrl},createdAt:B()().toString(),isSent:!!(null===f||void 0===f?void 0:f.isBot),isRead:!!(null===f||void 0===f?void 0:f.isBot),isBot:!!(null===e||void 0===e?void 0:e.isBot),isFirst:!!(null===e||void 0===e?void 0:e.isFirst),resType:null===e||void 0===e?void 0:e.resType,info:null===e||void 0===e?void 0:e.info,isDoubtSupport:!!e.doubtSupport,isCourseBot:!!e.isCourseBot};((null===e||void 0===e?void 0:e.ogCardData)&&(null===e||void 0===e||null===(t=e.ogCardData)||void 0===t||null===(r=t.ogTitle)||void 0===r?void 0:r.length)>0||(null===e||void 0===e?void 0:e.ogCardData)&&(null===e||void 0===e||null===(n=e.ogCardData)||void 0===n||null===(o=n.ogDescription)||void 0===o?void 0:o.length)>0)&&(a.meta=null===e||void 0===e?void 0:e.ogCardData),!0!==(null===f||void 0===f?void 0:f.isBot)||(null===e||void 0===e?void 0:e.isBot)||(null===e||void 0===e?void 0:e.activeAssistant)?(null===e||void 0===e?void 0:e.doubtSupport)||(null===e||void 0===e?void 0:e.isCourseBot)?console.log("send Message",e):(D&&0!=D.length?H(null===e||void 0===e?void 0:e.messageInput,i,null===e||void 0===e?void 0:e.ogCardData):null===s||void 0===s||s.emit("send-message",{creator:null===c||void 0===c?void 0:c.uuid,recipient:(null===f||void 0===f?void 0:f.id)?null===f||void 0===f?void 0:f.id:"",text:null===e||void 0===e?void 0:e.messageInput,media:[],uuid:i,meta:null===e||void 0===e?void 0:e.ogCardData}),!1===(null===f||void 0===f?void 0:f.isBot)&&X()):!1===(null===e||void 0===e?void 0:e.setResp)||Q((function(t){return Kt({},t,{messageInput:e.messageInput})})),N((function(e){return console.log(a),{data:Ht(e.data).concat([a]),pagination:e.pagination}})),setTimeout((function(){var e;null===v||void 0===v||null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}))},H=function(e,t,r){var n=D.map((function(e){return{type:"chat",mediaType:"application"===e.type.split("/")[0]?"file":e.type.split("/")[0],extension:e.type.split("/")[1]}}));x.mutate(n,{onSuccess:function(n){return Y(n,e,t,r)}})},Y=function(e,t,r,n){for(var o=function(t){var r,n=new FormData;Object.keys(e[t].fields).forEach((function(r){n.append(r,e[t].fields[r])})),n.append("file",D[t]),i.push({url:e[t].url,formData:n}),a.push({url:e[t].url+"/"+e[t].fields.key,type:"application"===D[t].type.split("/")[0]?"file":D[t].type.split("/")[0],filename:null===(r=D[t])||void 0===r?void 0:r.name})},i=[],a=[],u=0;u<e.length;u++)o(u);console.log(n),b.mutate(i,{onSuccess:function(){var e,o;n&&(null===n||void 0===n||null===(e=n.ogTitle)||void 0===e?void 0:e.length)>0||n&&(null===n||void 0===n||null===(o=n.ogDescription)||void 0===o?void 0:o.length)>0?null===s||void 0===s||s.emit("send-message",{creator:null===c||void 0===c?void 0:c.uuid,recipient:(null===f||void 0===f?void 0:f.id)?null===f||void 0===f?void 0:f.id:"",text:t,media:a,uuid:r,meta:n}):null===s||void 0===s||s.emit("send-message",{creator:null===c||void 0===c?void 0:c.uuid,recipient:(null===f||void 0===f?void 0:f.id)?null===f||void 0===f?void 0:f.id:"",text:t,media:a,uuid:r}),N((function(e){return{data:e.data.map((function(e){return e.id==r?Kt({},e,{media:a}):e})),pagination:e.pagination}})),_([])},onError:console.error})},X=function(){r.data.length>0&&r.data[0].id===(null===f||void 0===f?void 0:f.id)||l((function(e){var t=e.data.findIndex((function(e){return e.id==(null===f||void 0===f?void 0:f.id)}));if(-1==t)return{data:[Kt({},f,{isRead:1})].concat(Ht(e.data)),pagination:e.pagination};var r=JSON.parse(JSON.stringify(e.data));return(0,z.yf)(r,t,0),{data:Ht(r),pagination:e.pagination}}))};return(0,o.useEffect)((function(){(null===f||void 0===f?void 0:f.isFriend)&&C(!0),N({data:[],pagination:{limit:0,total:0,offset:0}}),q(0)}),[null===f||void 0===f?void 0:f.id]),(0,o.useEffect)((function(){if(0==Z.data.length&&f)if(console.log("Data Fetching",S,Z),S[f.id]){var e=S[f.id];0!==e.data.length&&N((function(t){return{data:Ht(e.data).concat(Ht(t.data)),pagination:e.pagination}})),q(e.pagination.offset+e.pagination.limit),setTimeout((function(){y.current&&(y.current.scrollTop=y.current.scrollHeight+y.current.scrollHeight)}))}else void 0===f.isBot&&(console.log("GET CONVERSATION"),K.refetch().then((function(){y.current&&(y.current.scrollTop=y.current.scrollHeight+y.current.scrollHeight)})));console.log("Data Fetched",S,Z)}),[Z.data]),(0,o.useEffect)((function(){return p&&p.current&&(p.current.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()})),p.current.addEventListener("drop",(function(e){var t;e.stopPropagation(),e.preventDefault(),I((function(e){return console.log(e),F(e),""}));var r=(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)||"";!r||!r[0]||D.filter((function(e){return"application"==e.type})).length>0||(_((function(e){return Ht(e).concat([r[0]])})),g(!0))}))),function(){p&&p.current&&(p.current.removeEventListener("dragover",(function(){})),p.current.removeEventListener("drop",(function(){})))}}),[]),(0,o.useEffect)((function(){console.log(Z)}),[Z]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Jt,{setChat:N,setChatOffset:q,setLoading:C,updateRecentUser:X,chatMessageRef:v}),(0,n.jsxs)(u.kC,{pos:"relative",flex:1,overflow:"auto",flexDir:"column",color:"text.primary",ref:p,children:[(0,n.jsx)(Ve,{DrawerToggle:t,setRecentUser:l,makeVideoCall:a}),(0,n.jsx)(u.kC,{as:Ce.Z,flex:"1 1 auto",mt:"10px",w:"100%",flexDir:"column",className:"noScrollBar",overflowY:"auto",overflowX:"hidden",pos:"relative",scrollableNodeProps:{ref:y},children:(0,n.jsxs)(oe(),{loadMore:function(){L>=10&&K.refetch()},hasMore:Z.pagination.total>L&&0!=L,loader:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!0})]}),style:{width:"100%"},threshold:250,useWindow:!1,isReverse:!0,initialLoad:!1,start:10,getScrollParent:function(){return y.current},children:[Z.data.map((function(e,t,r){return t>0&&!B()(e.createdAt).isSame(B()(null===Z||void 0===Z?void 0:Z.data[t-1].createdAt),"day")||0===t?(0,n.jsxs)(it.m$.span,{children:[(0,n.jsx)(u.kC,{justifyContent:"center",children:(0,n.jsx)(u.xu,{fontSize:"12px",color:"active.primary",display:"inline-block",padding:"2px 10px",fontWeight:500,borderRadius:"10px",bgColor:"icon.hover",children:B()(e.createdAt).format("MMM Do YY")})}),(0,n.jsx)(kt,{Message:e})]},e.id):(0,n.jsx)(kt,{Message:e},e.id)})),f&&(null===f||void 0===f?void 0:f.isDoubtSupport)&&(0,n.jsx)(It,{sendMessage:G,setDisableInput:$}),f&&(null===f||void 0===f?void 0:f.isCourseBot)&&(0,n.jsx)(Dt,{sendMessage:G,setDisableInput:$}),f&&(null===f||void 0===f?void 0:f.isBot)&&(0,n.jsx)(Nt,{sendMessage:G,setDisableInput:$}),f&&void 0===f.userId||(null===f||void 0===f?void 0:f.isBot)||(null===f||void 0===f?void 0:f.isDoubtSupport)||(null===f||void 0===f?void 0:f.isCourseBot)?(0,n.jsx)(u.kC,{}):(null===f||void 0===f?void 0:f.isFriend)?f&&f.isBlocked?f.isBlockedByMe?(0,n.jsx)(u.kC,{w:"100%",children:(0,n.jsx)(u.kC,{justifyContent:"center",w:"100%",children:(0,n.jsx)(u.kC,{borderRadius:"4px",padding:"5px 10px",fontSize:"0.8rem",color:"active.primary",children:"You blocked this user"})})}):(0,n.jsx)(u.kC,{justifyContent:"center",w:"100%",children:(0,n.jsx)(u.kC,{borderRadius:"4px",color:"active.primary",padding:"5px 10px",fontSize:"0.8rem",children:"You have been blocked by this user"})}):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(u.kC,{justifyContent:"center",w:"100%",children:(0,n.jsx)(u.kC,{borderRadius:"4px",color:"active.primary",padding:"5px 10px",fontSize:"0.8rem",children:"You are no longer friends"})}),(0,n.jsx)("div",{ref:v,style:{height:0,width:0}})]},"infiniteScroll")}),K.isLoading&&0===L?(0,n.jsxs)(u.kC,{flexDir:"column",width:"full",alignSelf:"end",justifySelf:"end",children:[(0,n.jsx)(ce,{isReverse:!1}),(0,n.jsx)(ce,{isReverse:!0})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(ot,{postUuid:E,setPostUuid:F,isFriend:null===f||void 0===f?void 0:f.isFriend,isLoading:w,media:D,setMedia:_,chatUploadFile:h,setChatUploadFile:g,sendMessage:G,disableInput:J})]})]})},er=(0,o.memo)(Xt),tr=r(19342);function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){nr(e,t,r[t])}))}return e}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ar=function(e){var t=e.setRecentUserList,r=e.recentUser,o=e.isCarousel,i=e.DrawerToggle,a=ir((0,R.useRecoilState)(te.nB),2),l=a[0],s=a[1];return(0,n.jsxs)(u.kC,{onClick:function(){return e=r,void(l&&(null===l||void 0===l?void 0:l.id)==(null===e||void 0===e?void 0:e.id)||(t((function(t){return{data:t.data.map((function(t){return(null===t||void 0===t?void 0:t.id)==(null===e||void 0===e?void 0:e.id)?or({},t,{isRead:1}):t})),pagination:t.pagination}})),s(or({},e,{isRead:1})),i&&i()));var e},pos:"relative",flexDir:"column",width:o?"60px":"50px",alignItems:"center",cursor:"pointer",children:[o&&!r.isTyping?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v.qE,{size:"md",name:null===r||void 0===r?void 0:r.name,src:null===r||void 0===r?void 0:r.profileUrl,_hover:{borderColor:"".concat(o?"":"active.primary")},m:"5px",w:o?"45px":"40px",h:o?"45px":"40px",borderWidth:"2px",borderColor:(null===r||void 0===r?void 0:r.isOnline)?"green":"white",borderStyle:"solid"})}):(0,n.jsx)(m.u,{placement:r.isTyping?"bottom":"left",borderRadius:"0.625rem",label:null===r||void 0===r?void 0:r.name,fontSize:"10px","aria-label":"Username",children:(0,n.jsx)(v.qE,{size:"md",name:null===r||void 0===r?void 0:r.name,src:null===r||void 0===r?void 0:r.profileUrl,_hover:{borderColor:"".concat(o?"":"active.primary")},m:"5px",w:o?"45px":"40px",h:o?"45px":"40px",borderWidth:"2px",borderColor:(null===r||void 0===r?void 0:r.isOnline)?"green":"white",borderStyle:"solid"})}),r&&1!==(null===r||void 0===r?void 0:r.role)?(0,n.jsx)(tr.RoleIcon,{pos:"absolute",top:10,height:"14px",width:"14px",right:1,UserRole:(null===r||void 0===r?void 0:r.role)||1}):(0,n.jsx)(n.Fragment,{}),Boolean(null===r||void 0===r?void 0:r.isRead)?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(c.JO,{pos:"absolute",top:"0.5px",right:"0.5px",fontSize:12,viewBox:"0 0 200 200",color:"active.primary",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}),o?r.isTyping?(0,n.jsx)(m.u,{placement:"bottom-start",borderRadius:"0.625rem",label:null===r||void 0===r?void 0:r.name,"aria-label":"Username",children:(0,n.jsxs)(u.xu,{width:"60px",className:"loader",children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})}):(0,n.jsx)(m.u,{placement:"bottom-start",borderRadius:"0.625rem",label:null===r||void 0===r?void 0:r.name,"aria-label":"Username",children:(0,n.jsx)(u.xv,{cursor:"pointer",isTruncated:!0,width:"90%",fontSize:"12px",textAlign:"center",mt:"0.5rem",children:null===r||void 0===r?void 0:r.name})}):(0,n.jsx)(n.Fragment,{})]})},ur=(0,o.memo)(ar),lr=r(89747),cr=function(e){var t=e.recentUsers,r=e.setRecentUser,i=e.recentUserLoadMore,a=(0,o.useRef)(),l=(0,o.useRef)(null),c=(0,o.useRef)(),d=(0,lr.R)(c),f=(0,lr.R)(a);return(0,o.useEffect)((function(){d&&t.pagination.total>t.data.length&&i()}),[d]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.kC,{pos:"relative",w:"100%",children:[f?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(u.kC,{pos:"absolute",left:"0",top:"6px",zIndex:100,bgColor:"transparent",onClick:function(){l.current&&l.current.scrollTo({top:0,left:l.current.scrollLeft-=60,behavior:"smooth"})},children:(0,n.jsx)(s.hU,{"aria-label":"Left Arrow",borderRadius:"50%",bgColor:"#23223486",_focus:{},_hover:{bgColor:"#232234d7"},icon:(0,n.jsx)(ve.wy,{fontSize:"2rem",color:"white"})})}),(0,n.jsxs)(u.kC,{ref:l,animation:"ease 2s",pos:"relative",w:"100%",style:{overflowX:"auto",scrollBehavior:"smooth"},children:[(0,n.jsx)(u.xu,{ref:a,height:"100%",w:"5px",border:"1px solid red",visibility:"hidden"}),t&&t.data.map((function(e,t){return(0,n.jsx)(ur,{recentUser:e,setRecentUserList:r,isCarousel:!0},t)})),(0,n.jsx)(u.xu,{ref:c,height:"100%",w:"5px",visibility:"hidden",border:"1px solid red"})]}),d?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(u.kC,{pos:"absolute",right:"0",top:"6px",bgColor:"transparent",onClick:function(){l.current&&l.current.scrollTo({top:0,left:l.current.scrollLeft+=60,behavior:"smooth"})},children:(0,n.jsx)(s.hU,{"aria-label":"Left Arrow",borderRadius:"50%",bgColor:"#23223486",_focus:{},_hover:{bgColor:"#232234d7"},icon:(0,n.jsx)(ve.XC,{fontSize:"2rem",color:"white"})})})]})})},sr=r(44002);function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return dr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pr=function(e){var t,r,i=e.setRecentUser,a=e.recentUsers,l=e.recentChatLoadMore,c=e.isOpenDrawer,s=e.DrawerToggle,d=e.makeVideoCall,f=e.mobile,p=(0,o.useState)(0),v=p[0],m=p[1],h=fr((0,R.useRecoilState)(te.nB),2),g=h[0],x=h[1];return(0,o.useEffect)((function(){m(0)}),[null===g||void 0===g?void 0:g.id]),(0,o.useEffect)((function(){console.log({recentUsers:a,activeUser:g,isOpenDrawer:c}),!Boolean(g)&&c&&x(a.data[0])}),[c]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(sr.Z,{isOpen:c,unmountOnExit:!0,direction:"right",mobile:f,isChatSlide:!0,children:[(0,n.jsx)(u.kC,{w:"100%",p:"22px 16px",bgColor:"background.paper",color:"text.primary",children:(0,n.jsx)(ze,{tabIndex:v,setTabIndex:m,handleClose:s})}),(0,n.jsx)(u.kC,{height:"calc(100% - 110px + 42px)",flexDir:"column",w:"100%",p:"0 16px",overflow:"auto",bgColor:"background.paper",children:0===v?g||(null===a||void 0===a?void 0:a.data)&&(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.length)>0?(0,n.jsxs)(n.Fragment,{children:[(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.length)>0?(0,n.jsx)(cr,{recentUsers:a,setRecentUser:i,recentUserLoadMore:l}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(u.xu,{height:"0.5px",width:"100%",border:"0.5px solid ",borderColor:"text.primary",opacity:.2,m:"5px 0"}),g&&g.id?(0,n.jsx)(er,{DrawerToggle:s,recentUsers:a,setRecentUserList:i,makeVideoCall:d}):(0,n.jsx)(n.Fragment,{})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.kC,{flexDirection:"column",mt:"2.5rem",justifyContent:"center",children:[(0,n.jsx)(re.default,{width:"322.24px",height:"233px",src:"/assets/chat/NoRecentUser.svg"}),(0,n.jsx)(u.xv,{textAlign:"center",mt:"2rem",fontSize:"14px",children:"To start a conversation, please make some Connections"})]})}):1===v?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Ae,{})}):2==v?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(De,{})}):(0,n.jsx)(n.Fragment,{})})]})})},vr=(0,o.memo)(pr);function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){hr(e,t,r[t])}))}return e}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||yr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e){return function(e){if(Array.isArray(e))return mr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){if(e){if("string"===typeof e)return mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mr(e,t):void 0}}var jr=function(e){var t=e.isOpenDrawer,r=e.setRecentUsers,i=e.showNotification,a=(0,R.useRecoilValue)(U.Z),u=(0,R.useRecoilValue)(M.ZP),l=(0,o.useRef)(),c=xr((0,R.useRecoilState)(te.Or),2),s=c[0],d=c[1],f=xr((0,R.useRecoilState)(te.nB),2),p=f[0],v=f[1],m=xr((0,R.useRecoilState)(te.jA),2),h=(m[0],m[1]),g=xr((0,R.useRecoilState)(te.VM),2),x=g[0],b=g[1],y=(0,R.useRecoilValue)(Me.kG);return(0,o.useEffect)((function(){return l.current=new Audio("/assets/sounds/notification.wav"),function(){l.current&&(l.current=null)}}),[]),(0,o.useEffect)((function(){a&&a.hasListeners("message-notification")&&a.off("message-notifcation"),a&&a.on("message-notification",(function(e){var n,o,a;(null===e||void 0===e||null===(n=e.from)||void 0===n?void 0:n.id)!==(null===u||void 0===u?void 0:u.uuid)&&(y&&(null===(a=l.current)||void 0===a||a.play()));i.current||(null===e||void 0===e||null===(o=e.from)||void 0===o?void 0:o.id)===(null===u||void 0===u?void 0:u.uuid)||t||(i.current=!0);var c=!1;v((function(t){return(null===t||void 0===t?void 0:t.userId)===e.from.id&&(c=!0),t})),c||(p&&p.id==e.conversationId?console.log("exit same notification",e.conversationId,p,p.id==e.conversationId):(h((function(t){var r=JSON.parse(JSON.stringify(t));return e.conversationId in r&&r["".concat(e.conversationId)].data.push(gr({},e,{isSent:!0,createdAt:B()().toString()})),r})),r((function(t){var r,n,o,i=t.data.findIndex((function(t){return t.id==(null===e||void 0===e?void 0:e.conversationId)}));if(-1==i)return{data:[{id:null===e||void 0===e?void 0:e.conversationId,name:null===e||void 0===e||null===(r=e.from)||void 0===r?void 0:r.fullName,profileUrl:null===e||void 0===e||null===(n=e.from)||void 0===n?void 0:n.profileUrl,isRead:(null===p||void 0===p?void 0:p.id)===e.conversationId?1:0,userId:null===e||void 0===e||null===(o=e.from)||void 0===o?void 0:o.id,isFriend:!0}].concat(br(t.data)),pagination:t.pagination};var a=JSON.parse(JSON.stringify(t.data));return(0,z.yf)(a,i,0),a[0]=gr({},a[0],{isRead:(null===p||void 0===p?void 0:p.id)===e.conversationId?1:0}),{data:br(a),pagination:t.pagination}}))))}))}),[a]),(0,o.useEffect)((function(){return a&&(a.on("new-user-online",(function(e){a.emit("current-user-online",{from:null===u||void 0===u?void 0:u.uuid,to:e.id}),d((function(t){return br(t).concat([e.id])}))})),a.on("current-user-online",(function(e){d((function(t){return br(t).concat([e.id])}))})),a.on("user-offline",(function(e){d((function(t){return t.filter((function(t){return t!==e.id}))}))})),a.on("user-block",(function(e){v((function(t){return(null===t||void 0===t?void 0:t.userId)==e.userId?gr({},t,{isBlocked:!0,isBlockedByMe:!1}):t})),r((function(t){return{data:t.data.map((function(t){return t.userId==e.userId?gr({},t,{isBlocked:!0,isBlockedByMe:!1}):t})),pagination:t.pagination}}))})),a.on("user-unblock",(function(e){v((function(t){return(null===t||void 0===t?void 0:t.userId)==e.userId?gr({},t,{isBlocked:!1,isBlockedByMe:!1}):t})),r((function(t){return{data:t.data.map((function(t){return t.userId==e.userId?gr({},t,{isBlocked:!1,isBlockedByMe:!1}):t})),pagination:t.pagination}}))})),a.on("user-unfriend",(function(e){e.id&&(v((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id)?(a.emit("leave-chat-room",{userId:null===u||void 0===u?void 0:u.uuid,conversationId:null===t||void 0===t?void 0:t.id}),gr({},t,{isFriend:!1})):t})),r((function(t){return{data:t.data.map((function(t){return t.id===(null===e||void 0===e?void 0:e.id)?gr({},t,{isFriend:!1}):t})),pagination:t.pagination}})))})),a.on("friend-request-accepted",(function(e){e.id&&(v((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.id)?gr({},t,{isFriend:!0}):t})),r((function(t){return{data:t.data.map((function(t){return t.id===(null===e||void 0===e?void 0:e.id)?gr({},t,{isFriend:!0}):t})),pagination:t.pagination}})))})),a.on("typing",(function(e){console.log(e),e.isTyping?(setTimeout((function(){b((function(t){return t.includes(e.conversationId)?t.filter((function(t){return t!==e.conversationId})):t}))}),1e4),b((function(t){return br(t).concat([e.conversationId])}))):b((function(t){return t.filter((function(t){return t!==e.conversationId}))}))}))),function(){a&&(a.removeListener("new-user-online"),a.removeListener("current-user-online"),a.removeListener("user-block"),a.removeListener("user-unblock"),a.removeListener("user-offline"),a.removeListener("user-unfriend"),a.removeListener("friend-request-accepted"),a.removeListener("typing"))}}),[a]),(0,o.useEffect)((function(){r((function(e){var t;return v((function(e){return p&&x.includes(null===p||void 0===p?void 0:p.id)?gr({},e,{isTyping:!0}):p?gr({},e,{isTyping:!1}):void 0})),{data:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return x.includes(e.id)?gr({},e,{isTyping:!0}):gr({},e,{isTyping:!1})})),pagination:null===e||void 0===e?void 0:e.pagination}}))}),[x]),(0,o.useEffect)((function(){r((function(e){var t;return v((function(e){return p&&s.includes(null===p||void 0===p?void 0:p.userId)?gr({},e,{isOnline:!0}):p?gr({},e,{isOnline:!1}):void 0})),{data:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return s.includes(e.userId)?gr({},e,{isOnline:!0}):gr({},e,{isOnline:!1})})),pagination:null===e||void 0===e?void 0:e.pagination}}))}),[s]),(0,n.jsx)(n.Fragment,{})};function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Cr(e,t,r[t])}))}return e}function Sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||Ir(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e){return function(e){if(Array.isArray(e))return wr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ir(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){if(e){if("string"===typeof e)return wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wr(e,t):void 0}}var Rr=function(e){var t,r=e.isNav,d=(0,a.qY)(),f=d.isOpen,p=(d.onToggle,d.onOpen),v=d.onClose,m=(0,R.useRecoilValue)(te.Or),h=Sr((0,R.useRecoilState)(A.l),2),x=h[0],b=h[1],y=Sr((0,R.useRecoilState)(te.nB),2),j=y[0],w=y[1],C=(0,o.useRef)(!1),k=Sr((0,R.useRecoilState)(te.Mq),2),S=k[0],O=k[1],I=function(){O(!0)},E=function(){O((function(e){return!e}))},F=(0,o.useState)({data:[],pagination:{limit:0,offset:0,total:0}}),U=F[0],P=F[1],D=(0,o.useState)(0),M=D[0],z=D[1],_=(0,i.useQuery)(["getRecentUsers",{offset:M}],ie.V_,{enabled:!1,onSuccess:function(e){var t=e.data.map((function(e){return m.includes(e.userId)?kr({},e,{isOnline:!0}):kr({},e,{isOnline:!1})}));z(e.pagination.offset+e.pagination.limit),P((function(r){return{data:Or(r.data).concat(Or(t)),pagination:e.pagination}}))}});return(0,o.useEffect)((function(){j&&I()}),[j]),(0,o.useEffect)((function(){O(S)}),[S]),(0,o.useEffect)((function(){_.refetch()}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(jr,{setRecentUsers:P,isOpenDrawer:S,showNotification:C}),(0,n.jsxs)(u.kC,(t={bgColor:"red",flexDir:"column",w:"55px",justify:"center",onMouseLeave:v,onMouseEnter:function(){r||(C.current=!1,p())},pos:r?"relative":"fixed",zIndex:r?99:"modal",bottom:r?"0rem":"1rem",right:r?"unset":"0"},Cr(t,"bgColor","brand.600"),Cr(t,"borderRadius","40px"),Cr(t,"children",[U&&U.data.length>0?(0,n.jsxs)(l.UO,{in:f,children:[(0,n.jsx)(u.kC,{flexDir:"column",pt:"0.8rem",px:"0.2rem",rounded:"md",w:"max-content",children:null===U||void 0===U?void 0:U.data.map((function(e,t){if(t<4)return(0,n.jsx)(ur,{setRecentUserList:P,isCarousel:!1,recentUser:e,DrawerToggle:E},null===e||void 0===e?void 0:e.id);n.Fragment}))}),(0,n.jsx)(u.xu,{height:"0.5px",width:"100%",border:"0.5px solid #F1EEF9",opacity:.2,m:"5px 0"})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)(u.kC,{position:"relative",children:[C.current?(0,n.jsx)(c.JO,{pos:"absolute",top:"0.5px",right:"0.5px",fontSize:12,zIndex:"2",viewBox:"0 0 200 200",color:"active.primary",children:(0,n.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(s.hU,{display:["none","none","none","flex"],alignItems:"center",justifyContent:"center","aria-label":"Chat Icon",height:"55px",borderRadius:"100%",width:"55px",bgColor:f?"brand.600":"background.paper",_focus:{},_active:{},_hover:{},onClick:function(){!j&&U.data.length>0&&(P((function(e){return{data:e.data.map((function(e,t){return 0==t?kr({},e,{isRead:1}):e})),pagination:e.pagination}})),w(kr({},U.data[0],{isRead:1}))),I(),C.current=!1},disabled:!!_.isFetching,cursor:"pointer",color:"active.primary",icon:(0,n.jsx)(g.i0Y,{fontSize:"1.5rem"})})]})]),t)),(x.active||x.incoming)&&(0,n.jsx)(X,{isOpenDrawer:S,DrawerToggle:E,endVideoCall:function(){b(kr({},x,{to:null,active:!1,incoming:!1}))}}),(0,n.jsx)(vr,{mobile:!!r,recentChatLoadMore:function(){_.refetch()},recentUsers:U,setRecentUser:P,isOpenDrawer:S,DrawerToggle:function(){w(null),O(!1)},makeVideoCall:function(e){b(kr({},x,{to:j,incoming:!1,active:!0,type:e}))}})]})},Ar=(0,o.memo)(Rr)},28040:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var n=r(85893),o=(r(67294),r(68527)),i=r(86893),a=function(e){var t=e.children,r=e.Icon;return(0,n.jsxs)(o.kC,{borderRadius:"0.625rem",border:"1px",borderColor:"warning.main",h:"3rem",bg:"warning.100",align:"center",justify:"left",pl:"1rem",children:[r?(0,n.jsx)(r,{}):(null===t||void 0===t?void 0:t.startsWith("Code"))?(0,n.jsx)(i.xqv,{size:18,color:"#941B0B"}):(0,n.jsx)(i.Wrt,{size:18,color:"#941B0B"}),(0,n.jsx)(o.xv,{ml:"1rem",color:"warning.main",variant:"hb",fontSize:"12px",fontWeight:"600",textOverflow:"ellipsis",whiteSpace:"nowrap",children:t})]})}},89747:function(e,t,r){"use strict";r.d(t,{R:function(){return a}});var n=r(67294);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0px",r=(0,n.useState)(!1),o=r[0],a=r[1];return(0,n.useEffect)((function(){var r=new IntersectionObserver((function(e){var t=i(e,1)[0];a(t.isIntersecting)}),{rootMargin:t});return e.current&&r.observe(e.current),function(){e.current&&r&&r.unobserve(e.current)}}),[]),o}},22490:function(e,t,r){"use strict";var n=r(85893),o=(r(67294),r(87898),r(79099)),i=r(2804),a=r(26901);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){u(e,t,r[t])}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.Z=function(e){var t=e.showEmoji,r=e.addEmoji,u=c(e,["showEmoji","addEmoji"]),s=(0,i.useRecoilValue)(a.Oj);return(0,n.jsx)(n.Fragment,{children:t?(0,n.jsx)(o.cW,l({showPreview:!1,emojiSize:18,title:""},u,{theme:"dark"===s?"dark":"light",onSelect:r})):(0,n.jsx)(n.Fragment,{})})}},78093:function(e,t,r){"use strict";var n=r(34051),o=r.n(n),i=r(85893),a=r(7657),u=r(68527),l=r(67294),c=r(27833),s=r(59576);function d(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,u,"next",e)}function u(e){d(i,n,o,a,u,"throw",e)}a(void 0)}))}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var h=function(e){var t=e.data,r=e.type,n=e.isChat;return(0,i.jsxs)(u.kC,{bgColor:"brand.600",flexDir:"column",w:n?"200px":"300px",_hover:{opacity:.8},_active:{opacity:.5},children:[(0,i.jsxs)(u.kC,{flexDir:"row",alignItems:"center",px:"0.5rem",children:["@"===r&&(0,i.jsx)(a.qE,{size:"sm",name:t.display,src:t.photoUrl}),(0,i.jsxs)(u.kC,{flexDir:"column",py:"0.25rem",children:[(0,i.jsx)(u.xv,{as:"h5",fontWeight:"500",ml:"0.5rem",children:t.display}),"@"===r&&(0,i.jsx)(u.xv,{fontSize:"xs",fontWeight:"300",ml:"0.5rem",noOfLines:1,children:t.tagLine})]})]}),(0,i.jsx)(u.xu,{h:"2px",w:"100%",bg:"background.white",mt:"0.2rem",opacity:"0.2"})]})};t.Z=function(e){var t=e.isChat,r=e.isInputEnabled,n=e.value,a=e.setValue,u=m(e,["isChat","isInputEnabled","value","setValue"]),d=(0,l.useRef)(null),p=function(){var e=f(o().mark((function e(t,r,n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=22;break}return e.next=3,n({queryKey:["SearchQuery",{query:t}]});case 3:if(a=e.sent.data,"@"!==i){e.next=12;break}if(!a){e.next=9;break}return e.abrupt("return",r(a.map((function(e){return{id:e.id,display:e.fullName,tagLine:e.tagLine,photoUrl:e.profileUrl}}))));case 9:case 10:case 19:e.next=22;break;case 12:if("#"!==i){e.next=22;break}if(!a){e.next=21;break}if(0!==a.length||""===t){e.next=18;break}return e.abrupt("return",r([{id:"1123",display:t}]));case 18:return e.abrupt("return",r(a.map((function(e){return{id:e.id,display:e.name}}))));case 21:return e.abrupt("return",r([]));case 22:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){void 0!==r&&d.current&&(d.current.style.cursor=r?"text":"not-allowed")}),[r]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(c.r,v({style:{height:"100%"}},u,{value:n,onChange:function(e){a(t?e:e.target.value)},inputRef:d,allowSpaceInQuery:!0,children:[(0,i.jsx)(c.p,{appendSpaceOnAdd:!0,markup:"@[__display__](__id__) ",trigger:"@",data:function(e,t){p(e,t,s.Zd,"@")},renderSuggestion:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.jsx)(h,{isChat:!0,type:"@",data:t[0]})}}),(0,i.jsx)(c.p,{markup:"#__display__ ",trigger:"#",displayTransform:function(e,t){return"#".concat(t)},data:function(){var e=f(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t,r,s.q3,"#");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),renderSuggestion:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.jsx)(h,{isChat:!0,type:"#",data:t[0]})}})]}))})}},43057:function(e,t,r){"use strict";r.r(t);var n=r(85893),o=r(68527),i=r(90269),a=r(67294),u=r(41664),l=r(2804),c=r(70436),s=r(62402);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){f(e,t,r[t])}))}return e}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var t=e.text,r=e.isChat,u=v(e,["text","isChat"]),l=(0,a.useState)(!1),c=l[0],d=l[1],f=(0,i.Zs)("@",t,"mention"),m=function(e){return e.split(" ").map((function(e){return e.includes("#")?e.split("#").map((function(e,t){return 0===t?e:e.split("\n").map((function(e,t){return 0===t?(0,n.jsx)(g,{id:e,type:"#",children:"#"+e+" "}):"\n"+e}))})):e+" "}))},h=function(){var e=[];return f.forEach((function(r,o,i){if(0===o&&o!==i.length-1){var a=t.substring(0,parseInt(r.startIdx)-1);e.push(a),e.push((0,n.jsx)(g,{type:"@",id:r.id,children:"@"+r.fullName}))}else if(o===i.length-1){var u="",l=t.substring(parseInt(r.endIdx)+1);u=0===o?t.substring(0,parseInt(r.startIdx)-1):t.substring(parseInt(i[o-1].endIdx)+1,parseInt(r.startIdx)-1),e.push(u),e.push((0,n.jsx)(g,{type:"@",id:r.id,children:"@"+r.fullName})),e.push(l)}else{var c=t.substring(parseInt(i[o-1].endIdx)+1,parseInt(r.startIdx)-1);e.push(c),e.push((0,n.jsx)(g,{type:"@",id:r.id,children:"@"+r.fullName}))}})),e};return r?(0,n.jsx)(o.xv,p({fontSize:"14px",whiteSpace:"pre-wrap"},u,{children:(0,n.jsx)(s.Z,{options:{target:"_blank",className:"postCardUrl"},children:f.length>0?h().map((function(e){return"string"===typeof e?m(e):e})):m(t)})})):function(e,t,r){var n=0;return r.length>0&&r.map((function(e){n+=e.id.length+4})),t.length-n>e}(255,t,f)||t.split("\n").length>5?c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.xv,p({fontSize:"14px",variant:"button",whiteSpace:"pre-wrap"},u,{children:(0,n.jsx)(s.Z,{options:{target:"_blank",className:"postCardUrl"},children:f.length>0?h().map((function(e){return"string"===typeof e?m(e):e})):m(t)})})),(0,n.jsx)(o.xv,{fontSize:"14px",variant:"s1",color:"gray",onClick:function(){return d(!c)},cursor:"pointer",children:"read less"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.xv,p({fontSize:"14px",variant:"button",noOfLines:4,whiteSpace:"pre-wrap"},u,{children:(0,n.jsx)(s.Z,{options:{target:"_blank",className:"postCardUrl"},children:f.length>0?h().map((function(e){return"string"===typeof e?m(e):e})):m(t)})})),(0,n.jsx)(o.xv,{fontSize:"14px",variant:"s1",color:"gray",onClick:function(){return d(!c)},cursor:"pointer",children:"read more"})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.xv,p({variant:"b1",fontSize:"14px",whiteSpace:"pre-wrap"},u,{children:(0,n.jsx)(s.Z,{options:{target:"_blank",className:"postCardUrl"},children:f.length>0?h().map((function(e){return"string"===typeof e?m(e):e})):m(t)})}))})};t.default=a.memo(h);var g=function(e){var t=e.id,r=e.type,i=e.children,a=v(e,["id","type","children"]),s=m((0,l.useRecoilState)(c.o),2),d=(s[0],s[1]);return(0,n.jsx)(u.default,{passHref:!0,href:("@"===r?"/profile/":"/community/tags/")+t,children:(0,n.jsx)(o.xv,p({onClick:function(){return d(t||"")},as:"a",color:"warning.200",cursor:"pointer",_hover:{}},a,{children:i}))})}},4905:function(e,t,r){"use strict";var n=r(85893),o=r(15193);r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.Z=function(e){var t=e.children,r=e.disabled,i=u(e,["children","disabled"]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.zx,a({colorScheme:"brand",disabled:r,h:"3.625rem",borderRadius:"0.625rem",color:"#ffff",backgroundColor:"brand.600"},i,{children:t}))})}},19157:function(e,t,r){"use strict";var n=r(85893),o=(r(67294),r(68527)),i=r(15193),a=r(47398),u=r(10894),l=r(2804),c=r(79215),s=r(25934),d=r(29092),f=r(11163),p=r(85230),v=r(86893),m=r(26901);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.onClose,r=g((0,l.useRecoilState)(c.nB),2),i=(r[0],r[1]),a=(0,f.useRouter)(),u=(0,l.useRecoilValue)(d.ZP),v=g((0,l.useRecoilState)(m.FJ),2),h=(v[0],v[1]),b=g((0,l.useRecoilState)(m.CG),2),y=(b[0],b[1]),j=function(){y(!1),h(-1)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.kC,{w:"full",h:"full",flexDir:"column",p:"1rem 2rem",overflowY:"auto",bgColor:"background.paper",boxShadow:"lg",children:p._n&&p._n.map((function(e,r){return 0===e.type?(0,n.jsx)(x,{title:e.title,info:e.info,contact:e.contact,handleClick:function(){null!==u?(i({id:(0,s.Z)(),name:"Placement Assistant",profileUrl:"https://www.shareicon.net/data/2015/09/24/106427_man_512x512.png",userId:null,isBot:!0}),t(),j&&j()):a.push("/auth/login")}},r):1===e.type?(0,n.jsx)(x,{title:e.title,info:e.info,contact:e.contact,type:1,handleClick:function(){null===u?(console.log({user:u}),a.push("/auth/login")):(null===u||void 0===u?void 0:u.batches.length)>0?(console.log({batch:null===u||void 0===u?void 0:u.batches.length}),console.log("Doubt Support"),i({id:(0,s.Z)(),name:"Doubt Support",profileUrl:"https://www.shareicon.net/data/2015/09/24/106427_man_512x512.png",userId:null,isDoubtSupport:!0}),j&&j(),t()):(console.log({user:"Not in any batch "}),j&&j(),window.open("https://www.pepcoding.com/trainings"))}},r):2===e.type?(0,n.jsx)(x,{title:e.title,info:e.info,contact:e.contact,handleClick:function(){null===u?window.open("https://www.pepcoding.com/trainings"):(console.log("Courses assistance"),i({id:(0,s.Z)(),name:"Courses assistance",profileUrl:"https://www.shareicon.net/data/2015/09/24/106427_man_512x512.png",userId:null,isCourseBot:!0}),j&&j(),t())}},r):3===e.type?(0,n.jsx)(x,{title:e.title,info:e.info,contact:e.contact,handleClick:function(){a.push("/contactus"),j&&j(),t()}},r):void 0}))})})};var x=function(e){var t=e.title,r=e.info,u=e.contact,c=e.handleClick,s=e.type,f=(0,l.useRecoilValue)(d.ZP);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.kC,{bgColor:"background.paper",color:"text.primary",width:"full",borderWidth:"0.5px",borderColor:"button.nonActive",borderRadius:"0.625rem",pos:"relative",flexDir:"column",my:"0.5rem",p:"1rem",boxShadow:"lg",children:[(0,n.jsx)(b,{}),(0,n.jsx)(o.xv,{color:"text.primary",width:"full",my:"0.2rem",fontSize:"1rem",fontWeight:700,children:t}),(0,n.jsx)(o.xv,{color:"text.primary",width:"full",my:"0.2rem",fontSize:"0.8rem",children:r}),(0,n.jsx)(o.kC,{width:"full",justify:"end",mt:"0.625rem",children:1===s?(0,n.jsx)(n.Fragment,{children:f&&(null===f||void 0===f?void 0:f.batches.length)>0?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.zx,{width:"fit-content",fontSize:"0.8rem",height:"1.5rem",bgColor:"active.primary",color:"white",_hover:{bgColor:"active.primary"},_active:{bgColor:"active.primary"},onClick:function(){c()},children:u})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.u,{label:" Enroll in a course, To access our Doubt Support !!! ","aria-label":"A tooltip",hasArrow:!0,w:"full",as:"h6",mt:"0.7rem",borderRadius:"4px",children:(0,n.jsxs)(i.zx,{width:"fit-content",fontSize:"0.8rem",height:"1.5rem",bgColor:"active.primary",color:"white",_hover:{bgColor:"active.primary"},_active:{bgColor:"active.primary"},display:"flex",alignItems:"center",justifyItems:"center",onClick:function(){c()},children:[u,(0,n.jsx)(v.UIZ,{size:15,style:{marginLeft:"0.375rem"},color:"white"})]})})})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.zx,{width:"fit-content",fontSize:"0.8rem",height:"1.5rem",bgColor:"active.primary",color:"white",_hover:{bgColor:"active.primary"},_active:{bgColor:"active.primary"},onClick:function(){c()},children:u})})})]})})},b=function(){return(0,n.jsxs)(u.JO,{pos:"absolute",top:0,left:0,zIndex:-100,width:"107",height:"107",viewBox:"0 0 107 107",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M-14.3184 25.8653C-14.3184 25.8653 7.84537 21.7597 13.5639 7.39006C19.0329 -6.38479 41.5613 -10.0874 41.5613 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 32.7718C-14.3184 32.7718 12.8731 28.0331 19.8772 10.6899C26.5551 -5.86679 54.1687 -10.0874 54.1687 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 39.6976C-14.3184 39.6976 17.8815 34.3067 26.1714 14.0281C34.0774 -5.3679 66.7763 -10.0874 66.7763 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 46.6042C-14.3184 46.6042 22.9092 40.5802 32.4847 17.328C41.5997 -4.8499 79.3837 -10.0874 79.3837 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 53.5108C-14.3184 53.5108 27.9368 46.8537 38.798 20.6469C49.1219 -4.33189 91.972 -10.0874 91.972 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 60.4366C-14.3184 60.4366 32.9452 53.1463 45.0922 23.9659C56.6633 -3.83315 104.579 -10.0874 104.579 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 67.3432C-14.3184 67.3432 37.9729 59.4006 51.4055 27.285C64.1857 -3.31514 117.187 -10.0874 117.187 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 74.2498C-14.3184 74.2498 43.0005 65.6741 57.6996 30.5848C71.7079 -2.79714 129.794 -10.0874 129.794 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 81.1757C-14.3184 81.1757 48.0089 71.9668 64.0129 33.9229C79.2302 -2.29839 142.383 -10.0874 142.383 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 88.0817C-14.3184 88.0817 53.0366 78.2404 70.3072 37.242C86.7524 -1.78038 154.99 -10.0874 154.99 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 95.0075C-14.3184 95.0075 58.0642 84.5137 76.6205 40.5609C94.2747 -1.26239 167.598 -10.0874 167.598 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 101.915C-14.3184 101.915 63.0727 90.7874 82.9146 43.88C101.797 -0.763495 180.205 -10.0874 180.205 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 108.82C-14.3184 108.82 68.1003 97.0609 89.2279 47.1797C109.319 -0.245496 192.812 -10.0874 192.812 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 115.746C-14.3184 115.746 73.128 103.334 95.5412 50.5179C116.841 0.272511 205.401 -10.0874 205.401 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 122.654C-14.3184 122.654 78.1364 109.608 101.835 53.8178C124.364 0.771259 218.008 -10.0874 218.008 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 129.561C-14.3184 129.561 83.1641 115.881 108.149 57.1367C131.886 1.28927 230.616 -10.0874 230.616 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 136.487C-14.3184 136.487 88.1917 122.174 114.443 60.4558C139.408 1.80727 243.223 -10.0874 243.223 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"}),(0,n.jsx)("path",{d:"M-14.3184 143.392C-14.3184 143.392 93.2001 128.428 120.756 63.7748C146.931 2.30601 255.812 -10.0874 255.812 -10.0874",stroke:"#F7C193",strokeOpacity:"0.15",strokeMiterlimit:"10"})]})}},76260:function(e,t,r){"use strict";var n=r(85893),o=r(67294),i=r(68527),a=r(53657),u=r(2804),l=r(29092),c=r(26901);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.children,r=(0,u.useRecoilValue)(a.Z),s=p((0,u.useRecoilState)(l.ZP),2),d=s[0],v=s[1],m=(0,o.useRef)(),h=(0,u.useRecoilValue)(c.kG);return(0,o.useEffect)((function(){return null===r||void 0===r||r.on("new-notification",(function(e){var t;h&&(null===(t=m.current)||void 0===t||t.play()),v((function(e){return f({},e,{notificationUnReadCount:((null===e||void 0===e?void 0:e.notificationUnReadCount)||0)+1})}))})),null===r||void 0===r||r.on("remove-notification",(function(e){v((function(e){return f({},e,{notificationUnReadCount:((null===e||void 0===e?void 0:e.notificationUnReadCount)||0)>0?(null===e||void 0===e?void 0:e.notificationUnReadCount)||-1:0})}))})),null===r||void 0===r||r.on("friend-request",(function(e){var t;console.log({FriendReq:e}),h&&(null===(t=m.current)||void 0===t||t.play()),v((function(e){return f({},e,{friendRequestUnreadCount:((null===e||void 0===e?void 0:e.friendRequestUnreadCount)||0)+1})}))})),null===r||void 0===r||r.on("cancel-friend-request",(function(e){v((function(e){return f({},e,{friendRequestUnreadCount:((null===e||void 0===e?void 0:e.friendRequestUnreadCount)||0)>0?(null===e||void 0===e?void 0:e.friendRequestUnreadCount)||-1:0})}))})),function(){r&&(r.off("cancel-friend-request"),r.off("friend-request"),r.off("remove-notification"),r.off("new-notification"))}}),[r]),(0,o.useEffect)((function(){m.current=new Audio("/assets/sounds/notification.wav")}),[]),(0,o.useEffect)((function(){console.log({count:(null===d||void 0===d?void 0:d.friendRequestUnreadCount)+(null===d||void 0===d?void 0:d.notificationUnReadCount),user:d},null===d||void 0===d?void 0:d.friendRequestUnreadCount,null===d||void 0===d?void 0:d.notificationUnReadCount)}),[d]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.kC,{w:"full",children:(0,n.jsxs)(i.kC,{position:"relative",alignItems:"center",w:"100%",_hover:{cursor:"pointer",color:"white"},children:[t,d&&d.friendRequestUnreadCount+d.notificationUnReadCount>0&&(0,n.jsx)(i.xv,{left:["0rem","1.9rem","1.9rem","2.15rem"],w:"full",position:"absolute",top:[-2.5,-2.5,-2.5,0],"white-space":"nowrap",textOverflow:"ellipse",right:d.friendRequestUnreadCount+d.notificationUnReadCount>9?2:4,fontSize:"0.75rem",color:"text.primary",children:d.friendRequestUnreadCount+d.notificationUnReadCount>9?"9+":d.friendRequestUnreadCount+d.notificationUnReadCount})]})})})}},84303:function(e,t,r){"use strict";r.d(t,{Z:function(){return V}});var n=r(85893),o=r(67294),i=r(68527),a=r(34651),u=r(2804),l=(0,u.atom)({key:"friendRequests",default:{notification:{data:[],pagination:{limit:0,offset:0,total:10},unreadCount:0},offset:0}}),c=r(83172),s=r(7657),d=r(75303),f=r(88767),p=r(32882),v=r(41664),m=r(40077),h=r(43238),g=r(24128),x=r(15193),b=function(e){var t,r,a,u,l,c=e.data,p=e.isOpen,v=e.onClose,m=(0,o.useState)(),b=m[0],y=m[1],j=(0,h.pm)(),w=(0,f.useQuery)(["getRecommendationQuery",{recommendationId:c.recommendation.id}],d.Vg,{enabled:!1,onSuccess:function(e){console.log({data:e}),y(e)},onError:function(e){"404"!==(null===e||void 0===e?void 0:e.statusCode)&&"400"!==(null===e||void 0===e?void 0:e.statusCode)||(console.error(e),j({title:"Error",description:"This Recommendation doesn't exists anymore",status:"error",duration:3e3,isClosable:!0}))}}),C=(0,f.useMutation)(d.Os),k=function(e){C.mutate({isApproved:e,recommendationId:c.recommendation.id},{onSuccess:function(t){console.log(t),j({title:"Updated",description:e?"Recommendation Approved":"Recommendation Denied",status:"success",duration:3e3,isClosable:!0})},onError:function(e){"404"!==(null===e||void 0===e?void 0:e.statusCode)&&"400"!==(null===e||void 0===e?void 0:e.statusCode)||(console.error(e),j({title:"Error",description:"This Recommendation doesn't exists anymore",status:"error",duration:3e3,isClosable:!0}))}}),v()};return(0,o.useEffect)((function(){w.refetch()}),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.u_,{isOpen:p,onClose:v,size:"xl",isCentered:!0,children:[(0,n.jsx)(g.ZA,{}),(0,n.jsxs)(g.hz,{width:"95%",height:"fill",borderRadius:"6px",bgColor:"background.paper",fontFamily:"Montserrat",fontWeight:"400",children:[(0,n.jsx)(g.xB,{children:(0,n.jsxs)(i.kC,{justifyContent:"flex-start",p:"0.4rem ",children:[(0,n.jsx)(i.xv,{letterSpacing:"0.5%",fontSize:"16px",lineHeight:"20px",children:"Pending Recommendation"}),(0,n.jsx)(g.ol,{onClick:v,borderRadius:"50%",color:"text.primary",bgColor:"brand.600",borderColor:"active.primary",_hover:{borderWidth:"2px"},_focus:{outline:"none"},mt:"0.5rem"})]})}),(0,n.jsx)(i.iz,{bg:"text.placeholder"}),(0,n.jsx)(i.kC,{justifyContent:"flex-start",children:(0,n.jsxs)(i.Ug,{my:"0.75rem",marginLeft:"1.5rem",p:"0.4rem 0",children:[(0,n.jsx)(s.qE,{height:"40px",width:"40px",name:null===b||void 0===b||null===(t=b.user)||void 0===t?void 0:t.fullName,src:null===b||void 0===b||null===(r=b.user)||void 0===r?void 0:r.profileUrl}),(0,n.jsxs)(i.kC,{flexDirection:"column",justify:"center",children:[(0,n.jsx)(i.xv,{height:"18px",width:"385px",fontSize:"14px",lineHeight:"18px",letterSpacing:"1.25%",color:"text.primary",children:null===b||void 0===b||null===(a=b.user)||void 0===a?void 0:a.fullName}),(null===b||void 0===b||null===(u=b.user)||void 0===u?void 0:u.tagLine)&&(0,n.jsx)(i.xv,{height:"15px",width:"full",fontSize:"12px",lineHeight:"15px",letterSpacing:"0.4%",color:"text.buttonNonActive",isTruncated:!0,whiteSpace:"pre-wrap",children:null===b||void 0===b||null===(l=b.user)||void 0===l?void 0:l.tagLine})]})]})}),(0,n.jsx)(i.iz,{bg:"text.placeholder"}),(0,n.jsxs)(g.fe,{children:[(0,n.jsx)(i.kC,{children:(0,n.jsx)(i.xv,{width:"full",fontWeight:"500",fontSize:"12px",lineHeight:"18px",letterSpacing:"0.4%",color:"text.primary",margin:"0.5rem",whiteSpace:"pre-wrap",marginBottom:"1rem",children:null===b||void 0===b?void 0:b.text})}),(0,n.jsx)(i.kC,{justifyContent:"flex-end",children:(0,n.jsxs)(i.Ug,{marginBottom:"0.5rem",children:[(0,n.jsx)(x.zx,{width:"82px",height:"40px",bgColor:"background.buttonCancel",borderRadius:"4px",color:"#9492A0",borderColor:"text.placeholder",fontSize:"14px",lineHeight:"18px",letterSpacing:"1.25%",_hover:{color:"text.primary",borderColor:"#EA9A91"},borderWidth:"2px",onClick:function(){k(!1)},children:"Deny"}),(0,n.jsx)(x.zx,{width:"82px",height:"40px",bgColor:"brand.600",borderRadius:"4px",borderColor:"white",borderWidth:"2px",color:"text.primary",fontSize:"14px",lineHeight:"18px",letterSpacing:"1.25%",_hover:{borderColor:"active.primary"},onClick:function(){k(!0)},children:"Approve"})]})})]})]})]})})},y=r(85450),j=r(89747),w=r(53657),C=r(29092),k=r(26901);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}var F=function(e){var t,r,o,a,l,c,d,f=e.notification,p=(e.onClose,R((0,u.useRecoilState)(k.FJ),2)),m=(p[0],p[1]),h=R((0,u.useRecoilState)(k.CG),2),g=(h[0],h[1]),x=function(){g(!1),m(-1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.default,{href:"/community/".concat(null===f||void 0===f||null===(t=f.post)||void 0===t?void 0:t.id)||0,children:(0,n.jsxs)(i.kC,{w:"100%",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",_hover:{bgColor:"brand.600",cursor:"pointer"},p:"0.5rem",my:"0.4rem",onClick:function(){x&&x()},children:[(0,n.jsx)(s.qE,{src:null===f||void 0===f||null===(r=f.reactor)||void 0===r?void 0:r.profileUrl,name:null===f||void 0===f||null===(o=f.reactor)||void 0===o?void 0:o.fullName,h:"2.5rem",w:"2.5rem"}),(0,n.jsxs)(i.kC,{ml:"1rem",flexDir:"column",w:"90%",children:[(0,n.jsx)(i.xv,{mb:"0.25rem",variant:"caption",fontWeight:"600",children:(null===f||void 0===f||null===(a=f.reactor)||void 0===a?void 0:a.fullName)+(0===(null===f||void 0===f?void 0:f.type)?((null===f||void 0===f||null===(l=f.post)||void 0===l?void 0:l.totalReactions)>1?" and ".concat((null===f||void 0===f||null===(c=f.post)||void 0===c?void 0:c.totalReactions)-1," ").concat((null===f||void 0===f||null===(d=f.post)||void 0===d?void 0:d.totalReactions)-1===1?"other":"others"):"")+" liked ":" commented on ")+"your post."}),(0,n.jsx)(i.xv,{variant:"smallest",fontWeight:"700",color:"text.button_back",children:null===f||void 0===f?void 0:f.createdAt})]})]})}),(0,n.jsx)(i.kC,{w:"100%",color:"text.button_back",children:(0,n.jsx)(i.iz,{})})]})},U=function(e){var t=e.notification,r=(0,o.useState)(!1),a=r[0],u=r[1];return(0,n.jsxs)(n.Fragment,{children:[a&&(0,n.jsx)(b,{data:t,isOpen:a,onClose:function(){return u(!1)}}),(0,n.jsxs)(i.kC,{w:"100%",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",_hover:{bgColor:"brand.600",cursor:"pointer"},p:"0.5rem",my:"0.5rem",onClick:function(){u(!0)},children:[(0,n.jsx)(s.qE,{src:null===t||void 0===t?void 0:t.reactor.profileUrl,name:null===t||void 0===t?void 0:t.reactor.fullName,h:"2.5rem",w:"2.5rem"}),(0,n.jsxs)(i.kC,{ml:"1rem",flexDir:"column",w:"90%",children:[(0,n.jsx)(i.xv,{mb:"0.25rem",variant:"caption",fontWeight:"600",children:(null===t||void 0===t?void 0:t.reactor.fullName)+" gave you a recommendation."}),(0,n.jsx)(i.xv,{variant:"smallest",fontWeight:"700",color:"text.button_back",children:null===t||void 0===t?void 0:t.createdAt})]})]}),(0,n.jsx)(i.kC,{w:"100%",color:"text.button_back",children:(0,n.jsx)(i.iz,{})})]})},P=function(e){var t=e.onClose,r=(0,o.useState)({data:[],pagination:{offset:0,limit:0,total:0}}),a=r[0],l=r[1],c=(0,o.useState)(0),s=c[0],v=c[1],h=(0,u.useRecoilValue)(w.Z),g=(0,o.useRef)(),x=(0,j.R)(g),b=R((0,u.useRecoilState)(C.ZP),2),k=b[0],S=b[1],O=(0,f.useMutation)(d.JJ),E=(0,f.useQuery)(["getNotificationsPop",{offSet:s,limit:10}],d.fQ,{enabled:!1,onSuccess:function(e){console.log(e),v(e.pagination.offset+e.pagination.limit),l((function(t){return{data:A(t.data).concat(A(e.data)),pagination:e.pagination}}))},onError:console.log}),P=function(){console.log(" loaderMore "),E.refetch()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(k&&(null===k||void 0===k?void 0:k.notificationUnReadCount)>0||e)&&O.mutate({type:1},{onSuccess:function(){S((function(e){return I({},e,{notificationUnReadCount:0})}))}})};return(0,o.useEffect)((function(){D()}),[]),(0,o.useEffect)((function(){null===h||void 0===h||h.on("new-notification",(function(e){D(!0),l((function(t){return{data:[e].concat(A(t.data)),pagination:t.pagination}})),v((function(e){return e+1}))})),null===h||void 0===h||h.on("remove-notification",(function(e){l((function(t){return{data:t.data.filter((function(t){return t.id!==e.id})),pagination:t.pagination}})),v((function(e){return e-1}))}))}),[h]),(0,o.useEffect)((function(){console.log(x,"<---scrollBox"),x&&a.pagination.total>s&&P(),0===a.pagination.total&&P()}),[x]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.kC,{h:"full",width:"full",pb:"0.25rem",bgColor:"background.paper",borderRadius:"10px",color:"text.primary",flexDir:"column",overflowY:"hidden",children:(0,n.jsxs)(i.kC,{as:m.Z,pos:"relative",flexDir:"column",overflow:"scroll",mb:"0.25rem",px:"1rem",children:[console.log(a.data),a.data.map((function(e){return 2!==(null===e||void 0===e?void 0:e.type)?(0,n.jsx)(F,{onClose:t,notification:e},null===e||void 0===e?void 0:e.id):(0,n.jsx)(U,{notification:e},null===e||void 0===e?void 0:e.id)})),E.isFetching?(0,n.jsx)(i.kC,{p:"1rem",flexDir:"column",width:"full",children:[0,1,2,3,4].map((function(e){return(0,n.jsx)(p.Z,{},e)}))}):0===a.data.length&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(y.Z,{text:"No new notifications",type:"notifications"})}),(0,n.jsx)(i.xu,{h:"1px",w:"full",ref:g})]})})})},D=r(88569);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){z(e,t,r[t])}))}return e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}var N=function(){var e=(0,f.useMutation)(D._b),t=(0,o.useState)({data:[],pagination:{limit:0,total:0,offset:0}}),r=t[0],a=t[1],l=(0,o.useState)(0),c=l[0],h=l[1],g=B((0,u.useRecoilState)(C.ZP),2),b=g[0],S=g[1],O=(0,u.useRecoilValue)(w.Z),I=(0,o.useRef)(null),R=(0,j.R)(I),A=(0,f.useMutation)(d.JJ),E=B((0,u.useRecoilState)(k.FJ),2),F=(E[0],E[1]),U=B((0,u.useRecoilState)(k.CG),2),P=(U[0],U[1]),M=function(){P(!1),F(-1)},z=function(t,r){e.mutate({accept:t,id:r},{onSuccess:function(){W(r)}})},Z=(0,f.useQuery)(["getFriendsPop",{offSet:c,limit:10}],D.uA,{onSuccess:function(e){a((function(t){return{data:T(t.data).concat(T(e.data)),pagination:e.pagination}})),h(e.pagination.offset+e.pagination.limit)},enabled:!1}),N=function(){console.log("Load More"),Z.refetch()},W=function(e){a((function(t){return{data:t.data.filter((function(t){return t.id!==e})),pagination:t.pagination}})),h((function(e){return e-1}))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(b&&b.friendRequestUnreadCount>0||e)&&A.mutate({type:2},{onSuccess:function(){S((function(e){return _({},e,{friendRequestUnreadCount:0})}))}})};return(0,o.useEffect)((function(){L()}),[]),(0,o.useEffect)((function(){null===O||void 0===O||O.on("friend-request",(function(e){L(!0),a((function(t){return{data:[e].concat(T(t.data)),pagination:t.pagination}})),h((function(e){return e+1}))})),null===O||void 0===O||O.on("cancel-friend-request",(function(e){console.log({cancelReq:e}),a((function(t){return{data:t.data.filter((function(t){return t.id!=e.id})),pagination:t.pagination}})),h((function(e){return e-1}))}))}),[O]),(0,o.useEffect)((function(){return R&&r.pagination.total>c&&(console.log("API FOR FRIENDS USEEFFECT"),N()),0===r.pagination.total&&(console.log("API FOR FRIENDS USEEFFECT swati  "),N()),function(){I.current=null}}),[R]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.kC,{h:"100%",w:"100%",bgColor:"background.paper",pb:"0.25rem",borderRadius:"10px",color:"text.primary",flexDir:"column",children:(0,n.jsxs)(i.kC,{as:m.Z,flexDir:"column",h:"90%",overflow:"scroll",mb:"0.25rem",px:"1rem",pt:"0.5rem",borderRadius:"10px",children:[r.data.map((function(t,r){return(0,n.jsxs)(i.kC,{w:"100%",justifyContent:"space-between",alignItems:"center",borderRadius:"10px",_hover:{bgColor:"brand.600",cursor:"pointer"},p:"0.5rem",mb:"0.25rem",children:[(0,n.jsxs)(i.kC,{alignItems:"center",onClick:function(){M&&M()},children:[(0,n.jsx)(s.qE,{src:t.profileUrl,h:"2.5rem",w:"2.5rem",name:t.fullName}),(0,n.jsx)(v.default,{href:"/profile/".concat(t.id),children:(0,n.jsx)(i.xv,{textAlign:"left",variant:"caption",ml:"1rem",_hover:{textDecor:"underline"},children:t.fullName})})]}),(0,n.jsxs)(i.kC,{children:[(0,n.jsx)(x.zx,{bgColor:"background.paper",color:"text.buttonNonActive",size:"xs",_hover:{bgColor:"button.nonActive",color:"text.primary"},onClick:function(e){1===e.detail&&z(!1,t.id),M&&M()},disabled:e.isLoading,children:"Decline"}),(0,n.jsx)(x.zx,{colorScheme:"blue",bgColor:"indicator.primary",size:"xs",ml:"6px",onClick:function(e){1===e.detail&&z(!0,t.id),M&&M()},disabled:e.isLoading,children:"Accept"})]})]},r)})),Z.isFetching?(0,n.jsx)(i.kC,{p:"1rem",flexDir:"column",children:[0,1,2,3,4].map((function(e){return(0,n.jsx)(p.Z,{},e)}))}):0===r.data.length&&(0,n.jsx)(y.Z,{text:"No pending requests",type:"notifications"}),(0,n.jsx)(i.xu,{h:"1px",w:"full",ref:I})]})})})},W=r(31573);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=function(){var e=(0,o.useState)(0),t=e[0],r=e[1],s=(0,u.useRecoilValue)(C.ZP),d=q((0,u.useRecoilState)(l),2),f=(d[0],d[1],q((0,u.useRecoilState)(c.w),2)),p=(f[0],f[1],(0,u.useRecoilValue)(k.Oj),(0,W.Z)());(0,o.useMemo)((function(){return p&&p>=768}),[p]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.kC,{width:"full",height:"full",bgColor:"background.paper",flexDir:"column",boxShadow:"lg",children:[(0,n.jsxs)(i.kC,{height:"fit-content",width:"full",px:"1rem",pt:"1rem",pb:"0.5rem",children:[(0,n.jsxs)(i.kC,{direction:"column",align:"center",mx:2,pos:"relative",children:[(0,n.jsx)(i.xv,{as:"p",fontSize:{base:"12px",xs:"14px",lg:"16px"},cursor:"pointer",color:0===t?"active.primary":"text.button_back",onClick:function(e){1===e.detail&&r(0)},fontWeight:600,children:"Notification"}),s&&(null===s||void 0===s?void 0:s.notificationUnReadCount)>0&&(0,n.jsx)(i.xv,{top:-10,right:-4,position:"absolute",bgColor:"background.paper",fontSize:"0.75rem",color:"active.primary",children:(null===s||void 0===s?void 0:s.notificationUnReadCount)>9?"9+":null===s||void 0===s?void 0:s.notificationUnReadCount}),0===t?(0,n.jsx)(a.Ee,{src:"/assets/community/activedot.svg",h:"6px",w:"6px",mt:"0.5rem",alt:"picture"}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsxs)(i.kC,{direction:"column",align:"center",mx:2,pos:"relative",children:[(0,n.jsx)(i.xv,{as:"p",fontSize:{base:"12px",xs:"14px",lg:"16px"},cursor:"pointer",color:1===t?"active.primary":"text.button_back",onClick:function(e){1===e.detail&&r(1)},fontWeight:600,children:"Friend Request"}),s&&(null===s||void 0===s?void 0:s.friendRequestUnreadCount)>0&&(0,n.jsx)(i.xv,{top:-10,right:-4,position:"absolute",bgColor:"background.paper",fontSize:"0.75rem",color:"active.primary",children:(null===s||void 0===s?void 0:s.friendRequestUnreadCount)>9?"9+":null===s||void 0===s?void 0:s.friendRequestUnreadCount}),1===t?(0,n.jsx)(a.Ee,{src:"/assets/community/activedot.svg",h:"6px",w:"6px",mt:"0.5rem",alt:"picture"}):(0,n.jsx)(n.Fragment,{})]})]}),0===t?(0,n.jsx)(P,{}):(0,n.jsx)(N,{})]})})}},82331:function(e,t,r){"use strict";r.d(t,{ZP:function(){return P}});var n=r(85893),o=r(68527),i=r(15193),a=r(34651),u=r(7657),l=r(38152),c=r(47398),s=r(67294),d=r(90269),f=r(9865),p=r(41664),v=r(19342),m=r(13084),h=r(66653),g=r(2804),x=r(26901);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(e){var t=e.profileCompletion,r=void 0===t?20:t,i=(0,m.sl)(),b=(0,s.useState)(f.Ms),j=b[0],w=b[1],C=y((0,m.AL)(),3),k=(C[0],C[1],C[2]);(0,s.useEffect)((function(){(null===i||void 0===i?void 0:i.coverUrl)&&w(null===i||void 0===i?void 0:i.coverUrl)}),[null===i||void 0===i?void 0:i.coverUrl]),console.log(null===i||void 0===i?void 0:i.doubtScore);var S=(0,g.useRecoilValue)(x.Oj),O=(0,s.useState)(!1),I=O[0],R=O[1];return(0,n.jsxs)(o.xu,{bgColor:"background.paper",w:"100%",pb:"0.3rem",borderRadius:"0.625rem",h:"fit-content",boxShadow:"lg",children:[(0,n.jsxs)(o.xu,{position:"relative",children:[(0,n.jsx)(a.Ee,{height:"6rem",width:"100%",src:j,borderRadius:"0.625rem",borderBottomRadius:"0",objectFit:"cover"}),(0,n.jsx)(o.M5,{pos:"relative",children:(0,n.jsxs)(o.kC,{mt:"7.5rem",mb:"10rem",position:"absolute",children:[(0,n.jsx)(u.qE,{border:"3px solid",height:"6.25rem",width:"6.25rem",name:null===i||void 0===i?void 0:i.fullName.split(" ")[0],src:null===i||void 0===i?void 0:i.profileUrl,position:"relative",onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)},children:I?(0,n.jsx)(l.D8,{value:r,color:"#1F1B2C",size:"7.25rem",position:"absolute",thickness:"3px",children:(0,n.jsx)(l.ip,{position:"absolute",borderRadius:"50%",h:"5.85rem",w:"5.9rem",backgroundColor:"rgba(0, 0, 0, 0.6)",cursor:"context-menu",children:(0,n.jsxs)(o.xv,{color:"white",fontSize:"0.5rem",p:"8px",pt:"1.5rem",children:[r,"% Profile Completed"]})})}):(0,n.jsx)(n.Fragment,{})}),i&&1!==(null===i||void 0===i?void 0:i.role)?(0,n.jsx)(v.RoleIcon,{pos:"absolute",bottom:1,height:"1rem",width:"1rem",right:1,UserRole:null===i||void 0===i?void 0:i.role}):(0,n.jsx)(n.Fragment,{})]})})]}),(0,n.jsxs)(o.kC,{flexDirection:"column",justifyContent:"center",alignItems:"center",mt:"2.2rem",children:[null!==i?(0,n.jsx)(p.default,{href:"/profile/".concat(i.uuid),children:(0,n.jsx)(o.xv,{as:"h5",color:"text.primary",w:"15.875rem",textAlign:"center",noOfLines:1,_hover:{cursor:"pointer",textDecoration:"underline"},onClick:function(){k&&k()},children:null===i||void 0===i?void 0:i.fullName})}):(0,n.jsx)(o.xv,{as:"h5",color:"text.primary",w:"15.875rem",textAlign:"center",noOfLines:1,children:"Guest User"}),(0,n.jsx)(o.xv,{fontSize:"0.75rem",color:"text.primary",w:"15.875rem",opacity:"70%",mt:"0.4rem",mb:"0.3rem",textAlign:"center",noOfLines:3,children:null===i||void 0===i?void 0:i.tagLine})]}),(0,n.jsxs)(o.kC,{justifyContent:"space-around",mt:"0.6rem",alignItems:"center",mb:"1.2rem",w:"full",children:[(0,n.jsxs)(o.kC,{flexDirection:"column",justifyContent:"space-between",w:"3.875rem",children:[(0,n.jsx)(o.xv,{as:"h5",color:"text.primary",children:"Connect"}),(0,n.jsx)(o.xv,{fontSize:"0.75rem",textAlign:"center",fontWeight:"25rem",mt:"0.5rem",color:"text.primary",children:(null===i||void 0===i?void 0:i.totalConnections)?i.totalConnections:0})]}),(0,n.jsxs)(o.kC,{flexDirection:"column",justifyContent:"space-between",w:"2.5rem",children:[(0,n.jsx)(o.xv,{as:"h5",children:"Posts"}),(0,n.jsx)(o.xv,{fontSize:"0.75rem",fontWeight:"25rem",textAlign:"center",mt:"0.5rem",color:"text.primary",children:(null===i||void 0===i?void 0:i.totalPosts)?(0,d.tV)(null===i||void 0===i?void 0:i.totalPosts):0})]}),(0,n.jsxs)(o.kC,{flexDirection:"column",justifyContent:"space-between",w:"4rem",children:[(0,n.jsx)(c.u,{label:"You resolved ".concat((null===i||void 0===i?void 0:i.doubtScore)?(0,d.tV)(null===i||void 0===i?void 0:i.doubtScore):0," doubts"),placement:"bottom-end",hasArrow:!0,children:(0,n.jsxs)(o.kC,{justifyContent:"space-between",children:[(0,n.jsx)(o.xv,{as:"h5",children:"Score"}),(0,n.jsx)(h.hQB,{size:"1rem",color:"dark"===S?"white":"black"})]})}),(0,n.jsx)(o.xv,{fontSize:"0.75rem",textAlign:"center",fontWeight:"25rem",mt:"0.5rem",color:null!==i?(null===i||void 0===i?void 0:i.doubtScore)>=0&&(null===i||void 0===i?void 0:i.doubtScore)<=1e3?"text.primary":i&&(null===i||void 0===i?void 0:i.doubtScore)>1e3&&(null===i||void 0===i?void 0:i.doubtScore)<=2e3?"warning.200":"text.secondary":"text.primary",children:(null===i||void 0===i?void 0:i.doubtScore)?(0,d.tV)(null===i||void 0===i?void 0:i.doubtScore):0})]})]})]})},w=s.memo(j),C=r(10132),k=r(73107),S=r(11163),O=r(86893),I=r(38744),R=r(37589),A=r(29092),E=r(3397);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(){var e=(0,g.useRecoilValue)(A.ZP),t=(0,S.useRouter)(),r=U((0,g.useRecoilState)(x.FJ),2),i=(r[0],r[1],U((0,g.useRecoilState)(x.CG),2));i[0],i[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.kC,{w:"full",h:"full",boxShadow:"lg",paddingY:"1rem",flexDir:"column",align:"center",marginX:"auto",overflowY:"auto",px:"1rem",bgColor:"background.paper",children:[(0,n.jsx)(w,{profileCompletion:null===e||void 0===e?void 0:e.completionPercent}),t.pathname.includes("career")&&(0,n.jsx)(D,{}),null===e?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(M,{views:null===e||void 0===e?void 0:e.profileViews,profileCompletion:null===e||void 0===e?void 0:e.completionPercent})}),(0,n.jsx)(z,{})]})})},D=function(){var e=U((0,g.useRecoilState)(I.E2),2),t=e[0],r=e[1],i=(0,g.useRecoilValue)(A.ZP),a=U((0,g.useRecoilState)(x.FJ),2),u=(a[0],a[1]),l=U((0,g.useRecoilState)(x.CG),2),c=(l[0],l[1]),s=function(){c(!1),u(-1)};return 2===(null===i||void 0===i?void 0:i.recruiterStatus)?(0,n.jsxs)(o.kC,{display:["flex","flex","flex","none"],w:"100%",mt:"1rem",h:"2rem",pos:"relative",children:[["user","recruiter"].map((function(e,i){return(0,n.jsx)(o.kC,{as:(0,C.E)(o.kC),flex:1,align:"center",justify:"center",borderRadius:"md",shadow:"lg",mr:"0.5rem",h:"2rem",cursor:"pointer",whileHover:{scale:1.1,opacity:.75},whileFocus:{opacity:.6,scale:.75,transition:{duration:.001}},onClick:function(){r({type:i}),s&&s()},children:(0,n.jsx)(o.xv,{userSelect:"none",_hover:{color:"active.primary"},sx:t.type===i?{color:"active.primary",scale:.5}:{},children:e})},e)})),(0,n.jsx)(o.xv,{})]}):(0,n.jsx)(n.Fragment,{})},M=function(e){var t=e.views,r=void 0===t?100:t,i=(e.profileCompletion,e.type),a=void 0===i?"question":i,u=(0,k.JQ)({type:E.E7.indexOf(a)}),l=u.data;u.loading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.kC,{flexDirection:"column",bgColor:"background.paper",borderRadius:"0.625rem",w:"100%",mt:"1rem",boxShadow:"lg",children:[(0,n.jsx)(o.xv,{ml:"1rem",mt:"1rem",children:"Number of Submissions"}),(0,n.jsx)(o.xv,{color:"text.secondary",fontSize:"1rem",ml:"1.5rem",mt:"0.4rem",mb:"1rem",children:(null===l||void 0===l?void 0:l.total_contributions)||0})]}),(0,n.jsxs)(o.kC,{flexDirection:"column",bgColor:"background.paper",borderRadius:"0.625rem",w:"full",mt:"1rem",boxShadow:"lg",children:[(0,n.jsx)(o.xv,{ml:"1rem",mt:"1rem",children:"Profile views per month"}),(0,n.jsx)(o.xv,{color:"text.secondary",fontSize:"1rem",ml:"1.5rem",mt:"0.4rem",mb:"1rem",children:r})]})]})},z=function(){var e=(0,S.useRouter)(),t=U((0,g.useRecoilState)(A.ZP),2),r=t[0],a=t[1],u=(0,g.useSetRecoilState)(A.TI),l=(0,s.useState)(!1),c=(l[0],l[1],(0,g.useSetRecoilState)(R.n)),d=U((0,g.useRecoilState)(x.FJ),2),f=(d[0],d[1]),p=U((0,g.useRecoilState)(x.CG),2),v=(p[0],p[1]),m=function(){v(!1),f(-1)},h=function(){c({isOpen:!1,onClose:function(){},title:"Delete",handleSubmit:function(){},body:"Are you sure? You can't undo this action afterwards.",destructiveLabel:"Delete"})},b=function(){h(),a(null),window.localStorage.removeItem("tokens"),localStorage.removeItem("REACT_QUERY_OFFLINE_CACHE"),u({id:"0",name:"Public",logo:""}),window.location.href="/auth/login"},y=function(){c({isOpen:!0,onClose:h,title:"Are you sure you want to logout?",handleSubmit:b,destructiveLabel:"Logout",body:"We recommend you to stay logged in. \nWe will miss you!!!"})};return(0,n.jsx)(n.Fragment,{children:r?(0,n.jsxs)(o.kC,{w:"full",flex:1,justify:"space-between",children:[(0,n.jsx)(i.zx,{color:"text.primary",maxW:"16.875rem",fontSize:"0.875rem",height:"3rem",mt:"1rem",flex:.7,boxSizing:"border-box",borderRadius:"0.375rem",backgroundColor:"background.paper",borderWidth:"1px",boxShadow:"lg",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){e.push("/profile/".concat(null===r||void 0===r?void 0:r.uuid)),m&&m()},children:"View Profile"}),(0,n.jsx)(i.zx,{color:"text.primary",maxW:"16.875rem",fontSize:"0.875rem",height:"3rem",mt:"1rem",flex:.2,boxSizing:"border-box",borderRadius:"0.375rem",backgroundColor:"background.paper",borderWidth:"1px",boxShadow:"lg",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){y()},children:(0,n.jsx)(O.xqh,{size:22})})]}):(0,n.jsx)(o.kC,{w:"full",maxW:"16.875rem",flex:1,justify:"center",children:(0,n.jsx)(i.zx,{color:"text.primary",fontSize:"0.875rem",height:"3rem",mt:"1rem",flex:1,boxSizing:"border-box",borderRadius:"0.375rem",backgroundColor:"background.paper",borderWidth:"1px",boxShadow:"lg",borderColor:"background.paper",_hover:{borderColor:"active.primary",borderWidth:"1px"},_active:{borderColor:"active.primary",borderWidth:"1px"},_focus:{borderColor:"active.primary",borderWidth:"1px"},onClick:function(){e.push("/auth/login")},children:"Login"})})})}},52923:function(e,t,r){"use strict";var n=r(85893),o=r(68527),i=r(94090),a=r(9680),u=(r(67294),r(2804)),l=r(26901),c=r(13084);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(){var e=p((0,c.Ic)(),2),t=e[0],r=e[1].setZenMode,s=p((0,c.Fg)(),2),d=s[0],f=s[1].setTheme,h=p((0,u.useRecoilState)(l.kG),2),g=h[0],x=h[1];return(0,n.jsxs)(o.kC,{h:"full",flexDir:"column",pt:"2rem",px:"1rem",pb:"1rem",bgColor:"background.paper",boxShadow:"lg",children:[(0,n.jsx)(o.xv,{variant:"h3",color:"text.primary",mb:"1.5rem",children:"Settings"}),(0,n.jsx)(o.kC,{w:"full",children:(0,n.jsxs)(i.UQ,{allowMultiple:!0,allowToggle:!0,w:"full",children:[(0,n.jsxs)(i.Qd,{border:"none",children:[(0,n.jsx)(v,{text:"Notification",theme:d}),(0,n.jsxs)(o.kC,{border:"1px solid",borderColor:"dark"===d?"button.nonActive":"text.placeholder",borderTop:"none",flexDirection:"column",children:[(0,n.jsxs)(i.KF,{_active:{border:"none"},_focus:{border:"none"},_hover:{border:"none"},py:"1rem",children:[(0,n.jsx)(o.xv,{color:"text.primary",variant:"s2",children:"Notification Audio"}),(0,n.jsx)(i.XE,{color:"text.primary"})]}),(0,n.jsxs)(i.Hk,{pb:4,color:"text.primary",children:[(0,n.jsx)(o.xv,{variant:"caption",children:"By default we provide Notification audio as ON you can modify as per your needs"}),(0,n.jsx)(a.Ee,{onChange:function(e){x("on"===e)},value:g?"on":"off",py:"0.5rem",colorScheme:"purple",children:(0,n.jsx)(o.Kq,{direction:"row",children:[["on","ON"],["off","OFF"]].map((function(e,t){return(0,n.jsx)(m,{value:e[0],text:e[1]},"opt"+t)}))})})]})]})]}),(0,n.jsx)(v,{text:"Display",theme:d,borderTopRadius:"0px",borderTop:"none"}),(0,n.jsx)(i.Qd,{border:"none",children:(0,n.jsxs)(o.kC,{border:"1px solid",borderColor:"dark"===d?"button.nonActive":"text.placeholder",borderTop:"none",flexDirection:"column",children:[(0,n.jsxs)(i.KF,{py:"1rem",_active:{border:"none"},_focus:{border:"none"},_hover:{border:"none"},children:[(0,n.jsx)(o.xv,{color:"text.primary",variant:"s2",children:"Change Theme"}),(0,n.jsx)(i.XE,{color:"text.primary"})]}),(0,n.jsxs)(i.Hk,{pb:4,color:"text.primary",children:[(0,n.jsx)(o.xv,{variant:"caption",children:"By default we provide you the Dark mode that best suites for Coding purposes"}),(0,n.jsx)(a.Ee,{onChange:f,value:d,py:"0.5rem",colorScheme:"purple",children:(0,n.jsx)(o.Kq,{direction:"row",children:[["dark","Dark"],["light","Light"]].map((function(e,t){return(0,n.jsx)(m,{value:e[0],text:e[1]},"opt"+t)}))})})]})]})}),(0,n.jsx)(i.Qd,{border:"none",children:(0,n.jsxs)(o.kC,{border:"1px solid",borderColor:"dark"===d?"button.nonActive":"text.placeholder",borderTop:"none",flexDirection:"column",borderBottomRadius:"6px",children:[(0,n.jsxs)(i.KF,{py:"1rem",_active:{border:"none"},_focus:{border:"none"},_hover:{border:"none"},children:[(0,n.jsx)(o.xv,{color:"text.primary",variant:"s2",children:"Content Mode"}),(0,n.jsx)(i.XE,{color:"text.primary"})]}),(0,n.jsxs)(i.Hk,{pb:4,color:"text.primary",children:[(0,n.jsx)(o.xv,{variant:"caption",children:"By default, we provide you with the Normal Mode that gives you Feed and discussions in one go. Switch to Zen Mode for coding with zero distractions."}),(0,n.jsx)(a.Ee,{onChange:function(e){r("zen"===e)},value:t?"zen":"non-zen",py:"0.5rem",colorScheme:"purple",children:(0,n.jsx)(o.Kq,{direction:"row",children:[["zen","Zen Mode"],["non-zen","Normal Mode"]].map((function(e,t){return(0,n.jsx)(m,{value:e[0],text:e[1]},"opt"+t)}))})})]})]})})]})})]})};var v=function(e){var t=e.text,r=e.theme,i=f(e,["text","theme"]);return(0,n.jsx)(o.xv,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({variant:"hb",color:"active.primary",p:"1rem",border:"1px solid",borderColor:"dark"===r?"button.nonActive":"text.placeholder",borderTopRadius:"6px"},i,{children:t}))},m=function(e){var t=e.value,r=e.text,i=(0,c.C8)();return(0,n.jsx)(a.Y8,{border:"1px solid",borderColor:"dark"===i?"button.nonActive":"text.placeholder",value:t,_focus:{outline:"none"},children:(0,n.jsx)(o.xv,{variant:"caption",fontWeight:"600",children:r})})}},44002:function(e,t,r){"use strict";var n=r(85893),o=r(67294),i=r(86893),a=r(37496),u=r(68527),l=r(15193),c=r(31573),s=r(85230);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.Z=function(e){var t=e.isOpen,r=e.children,p=e.mobile,v=e.closeDrawer,m=e.isChatSlide,h=f(e,["isOpen","children","mobile","closeDrawer","isChatSlide"]),g=(0,o.useState)(1),x=g[0],b=g[1],y=(0,c.Z)();return(0,o.useEffect)((function(){b(y&&y>765&&y<1024?-1:y&&y>765?1:0)}),[y]),(0,n.jsxs)(a.Mi,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({in:t},h,{style:{transform:"translateZ(-10px)",zIndex:"var(--chakra-zIndices-overlay)",position:"fixed",width:-1===x?"40%":1===x?"28%":"100vw",height:"100%",marginRight:t?p?"":"".concat(s.ZR):"",backgroundColor:"#232234",boxShadow:"lg"},children:[m?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(u.kC,{pos:"relative",w:"full",display:["flex","flex","flex","none"],children:(0,n.jsx)(l.hU,{zIndex:"100",borderRadius:"50%","aria-label":"Exit",color:"text.primary",bg:"brand.600",style:{position:"absolute",top:14,right:14},onClick:function(){v&&v()},icon:(0,n.jsx)(i.q5L,{size:24})})}),r]}))}},85450:function(e,t,r){"use strict";var n=r(85893),o=r(68527),i=r(34651),a=r(41664);t.Z=function(e){var t=e.text,r=e.setSaved,u=e.setActive,l=e.type,c=e.state;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.kC,{flexDirection:"column",mt:l?"1rem":"2.5rem",justifyContent:"center",w:"full",children:[(0,n.jsx)(i.Ee,{h:l?"160px":"233px",w:"100%",objectFit:"scale-down",src:"recruiter"===c?"/assets/recruiter/notFound.png":"/assets/chat/NotFound.png"}),(0,n.jsx)(o.xv,{textAlign:"center",mt:"2rem",fontSize:"14px",children:l?t:"Sorry, no ".concat(t," found try something else")}),"post"===t?(0,n.jsx)(a.default,{href:"/community",children:(0,n.jsx)(o.xv,{alignSelf:"center",mt:2,variant:"b1",color:"indicator.primary",_hover:{cursor:"pointer"},onClick:function(){r&&r(!1),u&&u("Latest")},children:"Back to feed"})}):(0,n.jsx)(n.Fragment,{})]})})}},28823:function(e,t,r){"use strict";r.r(t);var n=r(85893),o=(r(67294),r(68527)),i=r(34651),a=r(10894),u=r(86893),l=r(2804),c=r(26901),s=r(18918);t.default=function(e){var t,r,d,f,p,v,m,h=e.ogCardData,g=e.isPreview,x=e.handleDeleteOgCard,b=e.isChat,y=(0,l.useRecoilValue)(c.Oj);return(null===h||void 0===h?void 0:h.ogTitle)||(null===h||void 0===h?void 0:h.ogDescription)?(0,n.jsxs)(o.kC,{p:g?b?"5px 10px":"10px 24px":"10px 0",pos:"relative",w:"full",alignItems:"center",justifyContent:"center",flexDir:"column",cursor:"pointer",height:b?"100px":"unset",children:[g?(0,n.jsx)(o.kC,{justifyContent:"center",alignItems:"center",opacity:.5,_hover:{opacity:1,bg:"icon.hover"},style:{background:"icon.active",borderRadius:"50%",cursor:"pointer",marginRight:"5px",height:"1.5rem",width:"1.5rem"},pos:"absolute",top:b?2:5,right:b?2:10,onClick:x,children:(0,n.jsx)(u.q5L,{size:"1rem",color:"text.primary"})}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)(o.kC,{mx:"auto",bg:"brand.600",color:"text.primary",shadow:"lg",rounded:"lg",w:"full",overflow:"hidden",flexDir:"column",children:[b?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(o.kC,{width:"full",children:(null===h||void 0===h?void 0:h.ogVideo)&&(null===(r=null===h||void 0===h||null===(t=h.ogVideo)||void 0===t?void 0:t.trim())||void 0===r?void 0:r.length)>0?(0,n.jsx)(s.ZP,{options:{sources:[{src:null===h||void 0===h?void 0:h.ogVideo,type:(null===h||void 0===h||null===(d=h.ogVideo)||void 0===d?void 0:d.includes("youtu"))?"video/youtube":"video/mp4"}]}}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsxs)(o.kC,{children:[!(null===h||void 0===h||null===(f=h.ogImage)||void 0===f?void 0:f.trim().length)||!b&&(null===h||void 0===h?void 0:h.ogVideo)&&(null===h||void 0===h||null===(p=h.ogVideo)||void 0===p?void 0:p.trim().length)>0?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(o.kC,{alignItems:"center",height:b?"80px":"unset",justifyContent:"center",w:"33%",children:(0,n.jsx)(i.Ee,{style:{objectFit:"cover",height:"100%",width:"100%"},alt:(null===h||void 0===h?void 0:h.ogTitle)||"og card image",src:null===h||void 0===h?void 0:h.ogImage,onError:function(e){e.target.src="/assets/community/ogTagImage.png"}})}),(0,n.jsxs)(o.kC,{w:(null===h||void 0===h||null===(v=h.ogImage)||void 0===v?void 0:v.trim().length)>0&&(b||!((null===h||void 0===h?void 0:h.ogVideo)&&(null===h||void 0===h||null===(m=h.ogVideo)||void 0===m?void 0:m.trim().length)>0))?"66%":"full",p:b?"10px":"16px",justifyContent:"center",flexDir:"column",children:[(0,n.jsx)(o.xv,{fontSize:b?"10px":"16px",isTruncated:!0,fontWeight:"400",color:"text.primary",children:null===h||void 0===h?void 0:h.ogTitle}),(0,n.jsxs)(o.kC,{alignItems:"center",mt:b?"0":"5px",children:[(0,n.jsxs)(a.JO,{width:b?"10px":"18",height:b?"10px":"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M10.3724 7.62757C9.64433 6.8998 8.65703 6.49097 7.6276 6.49097C6.59817 6.49097 5.61087 6.8998 4.8828 7.62757L2.13712 10.3724C1.40903 11.1004 1 12.0879 1 13.1176C1 14.1473 1.40903 15.1348 2.13712 15.8628C2.8652 16.5909 3.85269 17 4.88236 17C5.91202 17 6.89952 16.5909 7.6276 15.8628L9 14.4904",stroke:"dark"===y?"#985EFF":"#ff8971",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M7.62695 10.3724C8.35502 11.1002 9.34232 11.509 10.3718 11.509C11.4012 11.509 12.3885 11.1002 13.1165 10.3724L15.8622 7.6276C16.5903 6.89952 16.9994 5.91202 16.9994 4.88236C16.9994 3.85269 16.5903 2.8652 15.8622 2.13712C15.1342 1.40903 14.1467 1 13.117 1C12.0873 1 11.0998 1.40903 10.3718 2.13712L8.99935 3.50952",stroke:"dark"===y?"#985EFF":"#ff8971",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,n.jsx)(o.rU,{ml:"5px",display:"flex",alignItems:"center",isTruncated:!0,whiteSpace:"break-spaces",marginY:b?"4px":"unset",fontSize:b?"8px":"10px",fontWeight:"400",color:"text.primary",href:null===h||void 0===h?void 0:h.ogUrl,isExternal:!0,children:null===h||void 0===h?void 0:h.ogUrl})]}),(0,n.jsx)(o.xv,{mt:b?0:2,noOfLines:2,lineHeight:b?"10px":"unset",fontSize:b?"8px":"12px",fontWeight:"400",color:"text.primary",children:null===h||void 0===h?void 0:h.ogDescription})]})]})]})]}):(0,n.jsx)(n.Fragment,{})}},32882:function(e,t,r){"use strict";var n=r(85893),o=(r(67294),r(68527)),i=r(54107);t.Z=function(e){var t=e.type;return(0,n.jsxs)(o.kC,{alignItems:"center",justifyContent:"search"===t?"":"space-around",pt:"10px",pl:"8px",pr:"8px",w:"100%",children:[(0,n.jsxs)(o.kC,{w:"90% ",alignItems:"center",children:[(0,n.jsx)(i.s7,{size:"search"===t?"8":"9",borderRadius:"search"===t?"50%":"0.625rem",endColor:"skeleton.end",startColor:"skeleton.start"}),(0,n.jsx)(i.Od,{height:"15px",width:"search"===t?"90%":"60%",ml:"8px",endColor:"skeleton.end",startColor:"skeleton.start"})]}),"search"===t?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(i.Od,{height:"10px",width:"10%",endColor:"skeleton.end",startColor:"skeleton.start"})]})}},85230:function(e,t,r){"use strict";r.d(t,{YY:function(){return n},ZR:function(){return o},XS:function(){return i},_n:function(){return a}});var n="5.5rem",o="3.5rem",i=function(e){var t="brand.600",r="Contest";switch(e){case 1:case 5:r="Contest",t="active.primary";break;case 2:r="Live",t="warning.200";break;case 3:r="Webinar",t="text.secondary";break;case 4:r="Interview",t="active.secondary";break;case 6:r="Hackathon",t="#D2369D";break;default:t="indicator.primary"}return{color:t,info:r}},a=[{type:0,title:"Need a placement Assistance",info:"Get placed in top product based companies.",contact:"Chat now"},{type:1,title:"Ask a doubt",info:"Got stuck somewhere, Ask from our doubt support.",contact:"Chat now"},{type:2,title:"Buy a course",info:"Want to learn something new, Click here to checkout what we have for you.",contact:"Buy now"},{type:3,title:"Contact us",info:"Unable to take decision or need help with something, Make a contact to us.",contact:"Contact us"}]},73107:function(e,t,r){"use strict";r.d(t,{vj:function(){return c},RQ:function(){return s},JQ:function(){return d}});var n=r(11163),o=r(67294),i=r(88767),a=r(13084),u=r(11787);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){var e=(0,o.useState)(),t=e[0],r=e[1],l=(0,a.Iy)(),c=(0,n.useRouter)().query.uuid,s=(0,i.useQuery)(["getLastViewers"],u.P8,{enabled:!1,onSuccess:function(e){r(e)},onError:function(e){console.log(e)}});return(0,o.useEffect)((function(){c===(null===l||void 0===l?void 0:l.uuid)&&s.refetch()}),[]),t},s=function(e){var t=e.type,r=(0,a.Iy)(),l=(0,o.useState)(),c=l[0],s=l[1],d=(0,n.useRouter)().query.uuid,f=(0,i.useQuery)(["getProfileContentAnaltics",{userId:d||(null===r||void 0===r?void 0:r.uuid),type:t}],u.X4,{onSuccess:function(e){s(e)},onError:console.error,enabled:!1});return(0,o.useEffect)((function(){return f.refetch(),function(){s(null)}}),[t,d]),c},d=function(e){var t=e.type,r=(0,a.Iy)(),c=(0,o.useState)(),s=c[0],d=c[1],f=(0,o.useState)(!0),p=f[0],v=f[1],m=(0,n.useRouter)().query.uuid,h=(0,i.useQuery)(["getHeatmapAnalytics",{userId:m||(null===r||void 0===r?void 0:r.uuid),type:t}],u.ZU,{onSuccess:function(e){v(!1);var t=new Map;e.result.forEach((function(e){t.set(e.submitted_on,e.total_submissions)})),d((function(r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}({},e,{result:t})}))},onError:function(){v(!1)},enabled:!1});return(0,o.useEffect)((function(){return v(!0),h.refetch(),function(){d(null)}}),[t,m]),{data:s,loading:p}}},83172:function(e,t,r){"use strict";r.d(t,{w:function(){return n}});var n=(0,r(2804).atom)({key:"friendRequestsState",default:{friendRequests:{data:[],pagination:{limit:0,offset:0,total:0},unreadCount:0},offset:0}})},48692:function(e,t,r){"use strict";r.d(t,{H6:function(){return o},dD:function(){return i},HK:function(){return a},PO:function(){return u}});var n=r(2804),o=(0,n.atom)({key:"NewPost",default:void 0}),i=(0,n.atom)({key:"EditedPost",default:void 0}),a=(0,n.atom)({key:"EditPostData",default:void 0}),u=(0,n.atom)({key:"CreatePostIsOpen",default:!1})},70436:function(e,t,r){"use strict";r.d(t,{o:function(){return o},I:function(){return i}});var n=r(2804),o=(0,n.atom)({default:"",key:"Search"}),i=(0,n.atom)({key:"searchIsOpen",default:{bool:!1,mode:-1}})},88810:function(e,t,r){"use strict";r.d(t,{l:function(){return o}});var n=r(2804),o=(0,n.atom)({key:"CallData",default:{incoming:!1,active:!1,from:null,incomingSignal:"",outgoing:!1,myPeerId:"",to:null,type:"video",acceptCall:null,callUser:null,time:0}});(0,n.atom)({key:"CallSpecs",default:{micOn:!0,videoOn:!0,sharingScreen:!1,friendVideoOn:!0,switchVideo:!1,busy:!1,ringing:!1,pipMode:!1,message:""}})},38845:function(e,t,r){"use strict";r.d(t,{V_:function(){return s},$I:function(){return d},NV:function(){return f},S4:function(){return p},bG:function(){return v},Vw:function(){return m},ZF:function(){return h},Mn:function(){return g},a5:function(){return x},qs:function(){return b},E5:function(){return y},QV:function(){return j},k6:function(){return w}});var n=r(34051),o=r.n(n),i=r(67157);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1].offset,e.next=4,i.Z.get("/message/recentConversations?offset=".concat(a));case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.uuid,l=a.offset,e.next=4,i.Z.get("/message/user/".concat(u,"?offset=").concat(l));case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.uuid,l=a.offset,s=a.query,e.next=4,i.Z.get("/friends/search".concat(u?"/".concat(u):"","?offset=").concat(l,"&limit=",10).concat(s.length?"&query=".concat(s):""));case 4:return d=e.sent,e.abrupt("return",d.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.offset,l=a.query,e.next=4,i.Z.get("/conversation/search?offset=".concat(u,"&limit=",10).concat(l.length?"&query=".concat(l):""," "));case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,e.next=3,i.Z.post("/conversation/",{userId:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,e.next=3,i.Z.put("/friends/block",{userId:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,e.next=3,i.Z.put("/friends/unblock",{userId:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=l(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/placementBot/user/status");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.questionNo,l=a.newEntry,console.log(u),e.next=5,i.Z.get("/placementBot/question/".concat(u,"?").concat(l?"newEntry=".concat(l):""));case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.response,n=t.skip,a=t.questionNo,e.next=3,i.Z.post("/placementBot/response?".concat(n?"skip=".concat(!0):""," "),{questionIndex:a,response:r});case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,1),n[0],e.next=4,i.Z.get("/doubt");case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,1),n[0],e.next=4,i.Z.get("/course/program");case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,1),n[0],e.next=4,i.Z.get("/course/sales");case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},88569:function(e,t,r){"use strict";r.d(t,{uA:function(){return s},_b:function(){return d},Zp:function(){return f}});var n=r(34051),o=r.n(n),i=r(67157);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.offSet,l=a.limit,e.next=4,i.Z.get("/friends/pendingRequests?offset=".concat(u,"&&limit=").concat(l));case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accept,n=t.id,console.log(r,n),e.next=4,i.Z.post("/friends/connect/".concat(n),{accept:r});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,e.next=3,i.Z.post("/friends/connect/".concat(r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},75303:function(e,t,r){"use strict";r.d(t,{fQ:function(){return s},JJ:function(){return d},Vg:function(){return f},Os:function(){return p}});var n=r(34051),o=r.n(n),i=r(67157);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.offSet,l=a.limit,s=void 0===l?10:l,e.next=4,i.Z.get("/user/notifications?offset=".concat(u,"&&limit=").concat(s));case 4:return d=e.sent,e.abrupt("return",d.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.type,e.next=3,i.Z.put("/user/notification/read?type=".concat(r));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1].recommendationId,e.next=4,i.Z.get("/recommendation/id/".concat(a));case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.isApproved,n=t.recommendationId,e.next=3,i.Z.put("/recommendation/approveorDecline/".concat(n),{isApproved:r});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},11787:function(e,t,r){"use strict";r.d(t,{l:function(){return f},IB:function(){return p},A0:function(){return v},Yr:function(){return m},Lx:function(){return h},AP:function(){return g},T6:function(){return x},jQ:function(){return b},Hu:function(){return y},g2:function(){return j},yo:function(){return w},CU:function(){return C},Zp:function(){return k},Gn:function(){return S},dF:function(){return O},Mk:function(){return I},lQ:function(){return R},Hh:function(){return A},VY:function(){return E},Yn:function(){return F},Qo:function(){return U},cp:function(){return P},l6:function(){return D},XK:function(){return M},jh:function(){return z},jB:function(){return _},oz:function(){return B},LV:function(){return T},P8:function(){return Z},X4:function(){return N},ZU:function(){return W}});var n=r(34051),o=r.n(n),i=r(67157);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.coverPhotoUrl,e.next=3,i.Z.put("/profile/coverPhoto",{coverPhotoUrl:r});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profilePhotoUrl,e.next=3,i.Z.put("/profile/photo",{profilePhotoUrl:r});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.uuid,l=a.offset,c=a.limit,s=void 0===c?4:c,e.next=4,i.Z.get("/profile/workExperience/".concat(u,"?offset=").concat(l,"&limit=").concat(s));case 4:return f=e.sent,e.abrupt("return",f.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.companyName,n=t.imageUrl,a=t.role,u=t.description,l=t.designation,c=t.ended_at,s=t.started_at,d=t.isPresent,e.next=3,i.Z.post("/profile/workExperience",{companyName:r,imageUrl:n,role:a,description:u,designation:l,ended_at:c,started_at:s,isPresent:d});case 3:return f=e.sent,e.abrupt("return",f);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1].id,e.next=4,i.Z.get("/profile/"+a);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1].id,e.next=4,i.Z.get("/profile/public/"+a);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=l(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.put("/profile",s({},t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.uuid,l=a.offset,c=a.limit,s=void 0===c?4:c,e.next=4,i.Z.get("/profile/education/".concat(u,"?offset=").concat(l,"&limit=").concat(s));case 4:return f=e.sent,e.abrupt("return",f.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.instituteName,n=t.degree,a=t.fieldOfStudy,u=t.started_at,l=t.ended_at,c=t.isPresent,e.next=3,i.Z.post("/profile/education",{instituteName:r,degree:n,fieldOfStudy:a,started_at:u,ended_at:l,isPresent:c});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,d,f,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.companyName,n=t.description,a=t.designation,u=t.ended_at,l=t.id,c=t.imageUrl,s=t.isPresent,d=t.role,f=t.started_at,e.next=3,i.Z.put("/profile/workExperience/"+l,{companyName:r,description:n,designation:a,ended_at:u,imageUrl:c,isPresent:s,role:d,started_at:f});case 3:return p=e.sent,e.abrupt("return",p);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.uuid,l=a.limit,c=void 0===l?3:l,s=a.offset,e.next=4,i.Z.get("/profile/project/".concat(u,"?offset=").concat(s,"&limit=").concat(c));case 4:return f=e.sent,e.abrupt("return",f.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,d,f,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.description,a=t.started_at,u=t.ended_at,l=t.isPresent,c=t.skills,s=t.links,d=t.imageUrl,f=t.videoUrl,e.next=3,i.Z.post("/profile/project",{title:r,description:n,started_at:a,ended_at:u,isPresent:l,skills:c,links:s,imageUrl:d,videoUrl:f});case 3:return p=e.sent,e.abrupt("return",p);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.instituteName,a=t.fieldOfStudy,u=t.degree,l=t.started_at,c=t.ended_at,s=t.isPresent,e.next=3,i.Z.put("/profile/education/"+r,{instituteName:n,fieldOfStudy:a,degree:u,started_at:l,ended_at:c,isPresent:s});case 3:return d=e.sent,e.abrupt("return",d);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,e.next=3,i.Z.delete("/profile/education/".concat(r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,i.Z.delete("/profile/workExperience/"+r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1].skill,e.next=4,i.Z.get("/profile/skills/search?query="+a);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=l(o().mark((function e(t){var r,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],i=n[1].companyQueryInput,e.next=4,fetch("https://autocomplete.clearbit.com/v1/companies/suggest?query="+i,{method:"GET",headers:{Authorization:"1234"}});case 4:return a=e.sent,e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,d,f,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.description,a=t.started_at,u=t.ended_at,l=t.isPresent,c=t.skills,s=t.links,d=t.id,f=t.imageUrl,p=t.videoUrl,e.next=3,i.Z.put("/profile/project/"+d,{title:r,description:n,started_at:a,ended_at:u,isPresent:l,skills:c,links:s,imageUrl:f,videoUrl:p});case 3:return v=e.sent,e.abrupt("return",v);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=l(o().mark((function e(t){var r,n,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1].id,e.next=4,i.Z.get("/profile/skills/"+a);case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.skills,e.next=3,i.Z.put("/profile/skills",{skills:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,i.Z.delete("/profile/project/"+r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.text,n=t.id,e.next=3,i.Z.post("/recommendation/"+n,{text:r});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.id,l=a.offset,c=a.limit,s=void 0===c?10:c,e.next=4,i.Z.get("/recommendation/"+u+"?offset=".concat(l,"&limit=").concat(s));case 4:return f=e.sent,e.abrupt("return",f.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.id,l=a.offset,c=a.limit,s=void 0===c?10:c,e.next=4,i.Z.get("/recommendation/public/"+u+"?offset=".concat(l,"&limit=").concat(s));case 4:return f=e.sent,e.abrupt("return",f.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.text,n=t.id,e.next=3,i.Z.put("/recommendation/"+n,{text:r});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,i.Z.put("/recommendation/hide/"+r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=l(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,i.Z.delete("/recommendation/"+r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=l(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("/profile/resume");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=l(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,1),n[0],e.next=4,i.Z.get("/profile/views");case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.userId,l=a.type,e.next=4,i.Z.get("/analytics/".concat(u,"?type=").concat(l));case 4:return c=e.sent.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=d(r,2),n[0],a=n[1],u=a.userId,l=a.type,e.next=4,i.Z.get("/analytics/heatmap/".concat(u,"?type=").concat(l));case 4:return c=e.sent.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},59576:function(e,t,r){"use strict";r.d(t,{Zd:function(){return s},q3:function(){return d},jz:function(){return f}});var n=r(34051),o=r.n(n),i=r(67157);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.query,l=a.offset,s=void 0===l?0:l,d=u&&""!==u.trim()?"/user/search?offset=".concat(s,"&limit=5&query=")+u:"/user/search?offset=".concat(s,"&limit=5"),e.next=6,i.Z.get(d);case 6:return f=e.sent.data,e.abrupt("return",f);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.query,l=a.offset,s=void 0===l?0:l,""===u){e.next=13;break}return e.next=5,i.Z.get("/tag/search?offset=".concat(s,"&limit=5&query=").concat(u));case 5:if(!(d=e.sent.data)){e.next=10;break}return e.abrupt("return",d);case 10:case 20:return e.abrupt("return",{data:[]});case 11:e.next=21;break;case 13:return e.next=15,i.Z.get("/tag/search?offset=".concat(s,"&limit=5"));case 15:if(!(f=e.sent.data)){e.next=20;break}return e.abrupt("return",f);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=l(o().mark((function e(t){var r,n,a,u,l,s,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.queryKey,n=c(r,2),n[0],a=n[1],u=a.query,l=a.offset,s=void 0===l?0:l,""===u){e.next=13;break}return e.next=5,i.Z.get("/content/search?offset=".concat(s,"&limit=5&query=").concat(u));case 5:if(!(d=e.sent.data)){e.next=10;break}return e.abrupt("return",d);case 10:case 20:return e.abrupt("return",{data:[]});case 11:e.next=21;break;case 13:return e.next=15,i.Z.get("/content/search?offset=".concat(s,"&limit=5"));case 15:if(!(f=e.sent.data)){e.next=20;break}return e.abrupt("return",f);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},52361:function(){},94616:function(){}}]);