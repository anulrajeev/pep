!function(e,a){e.PEP=e.PEP||{};var i=e.PEP,o=i.Resources.ResourceId(),s=(i.Resources.CourseId(),i.Resources.LectureId(),"codeEditor"+o),t=!1;function n(){lastActiveTab=this.hash}function d(){a.ajax({url:"/question/solution/"+o,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){e?(e=JSON.parse(e),actualSolution=e,a("#solutionEditor_sample_code").val(JSON.stringify(actualSolution)),i.CodeEditor.Init("solutionEditor",{readOnly:!0,saveInSessionStorage:!1,copyPasteDisabled:!0,setCursor:!0,disableAutoCollapseOutput:!0}),a("#solVideoSection").removeClass("hide")):(i.Component.alert("No solution found for this question"),n())},error:function(e){window.PEP.handleException(e)}})}function l(){var s;lastActiveTab=this.hash,a(this).hasClass("active")||(s=a(this).attr("solutionid"),window.PEP.showLoader(),a.ajax({url:"/question/submitteSolution/"+s,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){var t=e.testCaseHtml,o=s+"historyEditor";i.CodeEditor.Init(o,{readOnly:!0,disableAutoCollapseOutput:!0}),i.CodeEditor.SetContent(o,e.submittedCode),a("#testCasesList"+s).html(t),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}}))}function u(){$compileResultSection.addClass("hide"),$submitResultSection.html(""),$submitResultSection.removeClass("hide");var e=i.CodeEditor.GetSelectedLangCode(s),t={source_code:i.CodeEditor.GetContent(s),language_id:e,marks:a("#marks").val()},o=i.Resources.ResourceId(),e=a("#outputSection");a("#expectedOutput").addClass("hide"),a(e).addClass("hide"),a(e).find("span#heading").class="",window.PEP.showLoader(),a.ajax({url:"/submitCode/"+o,data:t,dataType:"json",method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){$submitResultSection.html(e.data),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}})}function c(){for(var e=["input","expectedOutput","actualOutput"],t=0;t<e.length;t++){var o=e[t],s=a("#"+o).val(),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(s)),i.setAttribute("download","testCase_"+o),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}$resourceNavTabs=null,$btnSubmitCode=null,$btnFullScreen=null,$btnDownloadTestCase=null,$compileResultSection=null,$submitResultSection=null,i.ResourceEditorInit=function(){var e;t||($resourceNavTabs=a("#resourceNavTabs"),$ioSection=a("#"+s+"_ioSection"),e=$ioSection.find("#submitCode"),a(e).on("click",u),$btnDownloadTestCase=a(".downloadTestCase"),$compileResultSection=$ioSection.find("#compileResultSection"),$submitResultSection=$ioSection.find("#submitResultSection"),a(document).on("click","a[action=downloadTestCase]",c),t=!0),function(){lastActiveTab=this.hash;var e=$resourceNavTabs.find("li a.active");$resourceNavTabs.find("li").each(function(e){a(this).removeClass("active")}),a(e).parent("li").addClass("active");var t=e.attr("action");switch(a(e).parent("li").find(".showEditorOptions").removeClass("hide"),t){case"showHistory":window.PEP.showLoader(),a.ajax({url:"/getQuestionHistory/"+o,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){a("div[purpose=questionsHistory]").html(e.data),a("li[action=showSubmittedCode]").each(function(){a(this).on("click",l)}),a(".collapsible").collapsible(),window.PEP.hideLoader()},error:function(e){window.PEP.handleException(e)}});break;case"showSolution":a("#solutionContainer").hasClass("active")&&a(".solution-text-video").css("position","absolute"),a.ajax({url:"/resourceSeen/"+o,dataType:"json",method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){e&&e.success&&(e.data?d():i.Component.dialog("your marks will be deducted",{title:"Please Confirm",modalType:"modal-fixed-footer",buttons:{close:{className:"  red white-text",text:"close",modalClose:!0,callback:function(){n()}},confirm:{className:" ",text:"confirm",modalClose:!0,callback:function(){d()}}}}))},error:function(e){window.PEP.handleException(e)}});break;case"showStats":showStats(1,"/stats/resource/"+o+"/pageSize/20/pageFrom/1");break;case"showQuestion":n()}}(),function(){$sampleCode=a("#codeEditor"+o+"_sample_code");var e="";if($sampleCode.val())try{e=JSON.parse($sampleCode.val())}catch(e){}i.CodeEditor.Init(s,{defaultCode:e,saveInSessionStorage:!0,copyPasteDisabled:!1})}()},i.ResourceEditorInit()}(window,window.jQuery);